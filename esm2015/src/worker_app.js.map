{"version":3,"file":"worker_app.js","sourceRoot":"","sources":["../../../../packages/platform-webworker/src/worker_app.ts"],"names":[],"mappings":";;;;;;;;;;;AAQA,OAAO,EAAC,YAAY,EAAE,uBAAuB,IAAI,sBAAsB,EAAC,MAAM,iBAAiB,CAAC;AAChG,OAAO,EAAC,eAAe,EAAE,iBAAiB,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAe,gBAAgB,EAAgC,qBAAqB,EAAE,YAAY,EAAC,MAAM,eAAe,CAAC;AAChN,OAAO,EAAC,QAAQ,EAAE,+BAA+B,IAAI,8BAA8B,EAAC,MAAM,2BAA2B,CAAC;AAEtH,OAAO,EAAC,aAAa,EAAC,MAAM,0BAA0B,CAAC;AACvD,OAAO,EAAC,0BAA0B,EAAC,MAAM,4CAA4C,CAAC;AACtF,OAAO,EAAC,UAAU,EAAC,MAAM,kCAAkC,CAAC;AAC5D,OAAO,EAAC,cAAc,EAAE,kBAAkB,EAAE,oBAAoB,EAAC,MAAM,uCAAuC,CAAC;AAC/G,OAAO,EAAC,WAAW,EAAC,MAAM,mCAAmC,CAAC;AAC9D,OAAO,EAAC,UAAU,EAAC,MAAM,iCAAiC,CAAC;AAC3D,OAAO,EAAC,2BAA2B,EAAC,MAAM,6CAA6C,CAAC;AACxF,OAAO,EAAC,yBAAyB,EAAC,MAAM,+BAA+B,CAAC;AACxE,OAAO,EAAC,gBAAgB,EAAC,MAAM,qCAAqC,CAAC;;;;AAOrE,MAAM,CAAC,uBAAM,iBAAiB,GAAG,qBAAqB,CAClD,YAAY,EAAE,WAAW,EAAE,CAAC,EAAC,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,sBAAsB,EAAC,CAAC,CAAC,CAAC;;;;AAE3F,MAAM;IACJ,MAAM,CAAC,IAAI,YAAY,EAAE,CAAC;CAC3B;WAKc,CAAC,OAAY,EAAE,cAA8B,EAAE,EAAE;IAC5D,mBAAM,WAAW,EAAC,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;CAC7C;;AAHH,uBAAM,YAAY,GAAG;IACnB,WAAW,IAEV;CACF,CAAC;;;;;AAEF,MAAM,2BAA2B,IAAY;IAC3C,uBAAM,IAAI,GAAG,IAAI,kBAAkB,CAAC,YAAY,CAAC,CAAC;IAClD,uBAAM,MAAM,GAAG,IAAI,oBAAoB,EAAE,CAAC;IAC1C,uBAAM,GAAG,GAAG,IAAI,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IAC7C,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IACvB,MAAM,CAAC,GAAG,CAAC;CACZ;;;;AAED,MAAM;IACJ,gBAAgB,CAAC,WAAW,EAAE,CAAC;CAChC;;;;;;AA2BD,MAAM;;;YApBL,QAAQ,SAAC;gBACR,SAAS,EAAE;oBACT,8BAA8B;oBAC9B,UAAU;oBACV,EAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAC;oBACnC,0BAA0B;oBAC1B,2BAA2B;oBAC3B,yBAAyB;oBACzB,EAAC,OAAO,EAAE,gBAAgB,EAAE,WAAW,EAAE,yBAAyB,EAAC;oBACnE,EAAC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,IAAI,EAAC;oBACxC,WAAW;oBACX,EAAC,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,EAAE,EAAE,EAAC;oBAC3D,EAAC,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC,MAAM,CAAC,EAAC;oBACnE,EAAC,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,cAAc,EAAE,KAAK,EAAE,IAAI,EAAC;iBAClE;gBACD,OAAO,EAAE;oBACP,YAAY;oBACZ,iBAAiB;iBAClB;aACF","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {CommonModule, ɵPLATFORM_WORKER_APP_ID as PLATFORM_WORKER_APP_ID} from '@angular/common';\nimport {APP_INITIALIZER, ApplicationModule, ErrorHandler, NgModule, NgZone, PLATFORM_ID, PlatformRef, RendererFactory2, RootRenderer, StaticProvider, createPlatformFactory, platformCore} from '@angular/core';\nimport {DOCUMENT, ɵBROWSER_SANITIZATION_PROVIDERS as BROWSER_SANITIZATION_PROVIDERS} from '@angular/platform-browser';\n\nimport {ON_WEB_WORKER} from './web_workers/shared/api';\nimport {ClientMessageBrokerFactory} from './web_workers/shared/client_message_broker';\nimport {MessageBus} from './web_workers/shared/message_bus';\nimport {PostMessageBus, PostMessageBusSink, PostMessageBusSource} from './web_workers/shared/post_message_bus';\nimport {RenderStore} from './web_workers/shared/render_store';\nimport {Serializer} from './web_workers/shared/serializer';\nimport {ServiceMessageBrokerFactory} from './web_workers/shared/service_message_broker';\nimport {WebWorkerRendererFactory2} from './web_workers/worker/renderer';\nimport {WorkerDomAdapter} from './web_workers/worker/worker_adapter';\n\n\n\n/**\n * @experimental\n */\nexport const platformWorkerApp = createPlatformFactory(\n    platformCore, 'workerApp', [{provide: PLATFORM_ID, useValue: PLATFORM_WORKER_APP_ID}]);\n\nexport function errorHandler(): ErrorHandler {\n  return new ErrorHandler();\n}\n\n\n// TODO(jteplitz602): remove this and compile with lib.webworker.d.ts (#3492)\nconst _postMessage = {\n  postMessage: (message: any, transferrables?: [ArrayBuffer]) => {\n    (<any>postMessage)(message, transferrables);\n  }\n};\n\nexport function createMessageBus(zone: NgZone): MessageBus {\n  const sink = new PostMessageBusSink(_postMessage);\n  const source = new PostMessageBusSource();\n  const bus = new PostMessageBus(sink, source);\n  bus.attachToZone(zone);\n  return bus;\n}\n\nexport function setupWebWorker(): void {\n  WorkerDomAdapter.makeCurrent();\n}\n\n/**\n * The ng module for the worker app side.\n *\n * @experimental\n */\n@NgModule({\n  providers: [\n    BROWSER_SANITIZATION_PROVIDERS,\n    Serializer,\n    {provide: DOCUMENT, useValue: null},\n    ClientMessageBrokerFactory,\n    ServiceMessageBrokerFactory,\n    WebWorkerRendererFactory2,\n    {provide: RendererFactory2, useExisting: WebWorkerRendererFactory2},\n    {provide: ON_WEB_WORKER, useValue: true},\n    RenderStore,\n    {provide: ErrorHandler, useFactory: errorHandler, deps: []},\n    {provide: MessageBus, useFactory: createMessageBus, deps: [NgZone]},\n    {provide: APP_INITIALIZER, useValue: setupWebWorker, multi: true},\n  ],\n  exports: [\n    CommonModule,\n    ApplicationModule,\n  ]\n})\nexport class WorkerAppModule {\n}\n"]}