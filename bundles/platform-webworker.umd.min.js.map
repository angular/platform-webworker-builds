{"version":3,"sources":["packages/platform-webworker/platform-webworker.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ng","platformWebworker","common","core","platformBrowser","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","ON_WEB_WORKER","InjectionToken","MessageBus","RenderStore","_nextIndex","_lookupById","Map","_lookupByObject","allocateId","store","obj","id","set","remove","index","get","delete","deserialize","has","serialize","decorators","type","Injectable","LocationType","href","protocol","host","hostname","port","pathname","search","hash","origin","Serializer","_renderStore","_this","isArray","map","v","_serializeRendererType2","_serializeLocation","Error","ɵstringify","data","val","_deserializeRendererType2","_deserializeLocation","loc","encapsulation","styles","props","ctorParameters","ClientMessageBrokerFactory","_messageBus","_serializer","createMessageBroker","channel","runInZone","initChannel","ClientMessageBroker","messageBus","_pending","_sink","to","from","subscribe","message","_handleMessage","_generateMessageId","name","time","Date","getTime","iteration","runOnService","args","returnType","promise","fnArgs","forEach","argument","completer_1","undefined","Promise","resolve","reject","method","catch","err","console","then","emit","FnArg","UiArguments","PostMessageBusSink","_postMessageTarget","_channels","_messageBuffer","attachToZone","zone","_zone","runOutsideAngular","onStable","_handleOnEventDone","emitter","EventEmitter","channelInfo","_Channel","_sendMessages","messages","postMessage","PostMessageBusSource","eventTarget","addEventListener","ev","_handleMessages","channelInfo_1","run","PostMessageBus","sink","source","ServiceMessageBrokerFactory","ServiceMessageBroker","_methods","registerMethod","methodName","signature","serializedArgs","numArgs","deserializedArgs","apply","_wrapWebWorkerPromise","result","MOUSE_EVENT_PROPERTIES","KEYBOARD_EVENT_PROPERTIES","TRANSITION_EVENT_PROPERTIES","EVENT_PROPERTIES","NODES_WITH_VALUE","Set","addTarget","serializedEvent","target","tagName","toLowerCase","files","serializeEvent","properties","serialized","prop","EventDispatcher","dispatchAnimationEvent","player","phaseName","element","animationPlayer","dispatchRenderEvent","eventName","event","serializeMouseEvent","serializeKeyboardEvent","serializeEventWithTarget","serializeGenericEvent","serializeTransitionEvent","MessageBasedRenderer2","_brokerFactory","_bus","_rendererFactory","start","broker","_eventDispatcher","_a","RSO","P","createRenderer","createElement","createComment","createText","appendChild","insertBefore","removeChild","selectRootElement","parentNode","nextSibling","setAttribute","removeAttribute","addClass","removeClass","setStyle","removeStyle","setProperty","setValue","listen","unlisten","destroy","destroyNode","_b","argTypes","slice","bind","node","el","namespace","parent","child","ref","selector","style","flags","elName","unlistenId","RendererFactory2","WebWorkerInstance","init","worker","bus","WORKER_SCRIPT","WORKER_UI_STARTABLE_MESSAGING_SERVICE","_WORKER_UI_PLATFORM_PROVIDERS","provide","NgZone","useFactory","createNgZone","enableLongStackTrace","isDevMode","deps","useExisting","multi","ɵBROWSER_SANITIZATION_PROVIDERS","ErrorHandler","_exceptionHandler","DOCUMENT","_document","ɵsetDocument","document","EVENT_MANAGER_PLUGINS","useClass","ɵDomEventsPlugin","ɵKeyEventsPlugin","ɵHammerGesturesPlugin","HAMMER_GESTURE_CONFIG","HammerGestureConfig","ɵAPP_ID_RANDOM_PROVIDER","ɵDomRendererFactory2","EventManager","ɵDomSharedStylesHost","ɵSharedStylesHost","useValue","Testability","PLATFORM_INITIALIZER","initWebWorkerRenderPlatform","injector","scriptUri","ɵBrowserDomAdapter","makeCurrent","ɵBrowserGetTestability","spawnWebWorker","uri","instance","webWorker","Worker","initializeGenericWorkerRenderer","services","runGuarded","svc","Injector","PLATFORM_ID","ɵPLATFORM_WORKER_UI_ID","messageBusFactory","platformWorkerUi","createPlatformFactory","platformCore","VERSION","Version","MessageBasedPlatformLocation","_platformLocation","onPopState","_sendUrlChangeEvent","onHashChange","_broker","_channelSink","_getLocation","_setPathname","pushState","replaceState","forward","back","location","ɵBrowserPlatformLocation","WORKER_UI_LOCATION_PROVIDERS","initUiLocation","WebWorkerPlatformLocation","_super","brokerFactory","_popStateListeners","_hashChangeListeners","_location","_channelSource","msg","listeners","fn","initialized","res","initializedResolve","getBaseHrefFromDOM","defineProperty","enumerable","configurable","newPath","state","title","url","getState","PlatformLocation","WORKER_APP_LOCATION_PROVIDERS","APP_INITIALIZER","appInitFnFactory","LOCATION_INITIALIZED","locationInitialized","platformLocation","NamedEventEmitter","callback","_getListeners","listener","indexOf","splice","dispatchEvent","_listeners","WebWorkerRendererFactory2","messageBrokerFactory","renderStore","globalEvents","_messageBroker","_dispatchEvent","renderer","WebWorkerRenderer2","callUI","begin","end","fnName","allocateNode","WebWorkerRenderNode","freeNode","eventNameWithTarget","events","asFnArg","callUIWithRenderer","newChild","refChild","oldChild","selectorOrNode","targetEl","targetName","fullName","WorkerDomAdapter","ɵsetRootDomAdapter","log","logGroup","group","logGroupEnd","groupEnd","getProperty","onAndCancel","evt","doc","createHtmlDocument","getDefaultDocument","isElementNode","isShadowRoot","supportsDOMEvents","getGlobalEventTarget","getHistory","getLocation","getBaseHref","resetBaseElement","getUserAgent","performanceNow","supportsCookies","getCookie","ɵDomAdapter","platformWorkerApp","ɵPLATFORM_WORKER_APP_ID","errorHandler","WorkerAppModule","_postMessage","transferrables","createMessageBus","setupWebWorker","NgModule","providers","ɵINJECTOR_SCOPE","ViewportScroller","ɵNullViewportScroller","CommonModule","ApplicationModule","bootstrapWorkerUi","workerScriptUri","customProviders","platform","ɵangular_packages_platform_webworker_platform_webworker_a","ɵangular_packages_platform_webworker_platform_webworker_b","ɵangular_packages_platform_webworker_platform_webworker_c","ɵangular_packages_platform_webworker_platform_webworker_d","ɵangular_packages_platform_webworker_platform_webworker_e","ɵangular_packages_platform_webworker_platform_webworker_f","ɵangular_packages_platform_webworker_platform_webworker_g","ɵangular_packages_platform_webworker_platform_webworker_h","ɵangular_packages_platform_webworker_platform_webworker_i","ɵangular_packages_platform_webworker_platform_webworker_j","ɵangular_packages_platform_webworker_platform_webworker_k"],"mappings":"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","sourcesContent":["/**\n * @license Angular v10.1.0-next.4+32.sha-250e299\n * (c) 2010-2020 Google LLC. https://angular.io/\n * License: MIT\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('@angular/platform-browser')) :\n    typeof define === 'function' && define.amd ? define('@angular/platform-webworker', ['exports', '@angular/common', '@angular/core', '@angular/platform-browser'], factory) :\n    (global = global || self, factory((global.ng = global.ng || {}, global.ng.platformWebworker = {}), global.ng.common, global.ng.core, global.ng.platformBrowser));\n}(this, (function (exports, common, core, platformBrowser) { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    /* global Reflect, Promise */\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b)\n                if (b.hasOwnProperty(p))\n                    d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    function __extends(d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    var __assign = function () {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s)\n                    if (Object.prototype.hasOwnProperty.call(s, p))\n                        t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n        var t = {};\n        for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n                t[p] = s[p];\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                    t[p[i]] = s[p[i]];\n            }\n        return t;\n    }\n    function __decorate(decorators, target, key, desc) {\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n            r = Reflect.decorate(decorators, target, key, desc);\n        else\n            for (var i = decorators.length - 1; i >= 0; i--)\n                if (d = decorators[i])\n                    r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\n    }\n    function __param(paramIndex, decorator) {\n        return function (target, key) { decorator(target, key, paramIndex); };\n    }\n    function __metadata(metadataKey, metadataValue) {\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\")\n            return Reflect.metadata(metadataKey, metadataValue);\n    }\n    function __awaiter(thisArg, _arguments, P, generator) {\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n        return new (P || (P = Promise))(function (resolve, reject) {\n            function fulfilled(value) { try {\n                step(generator.next(value));\n            }\n            catch (e) {\n                reject(e);\n            } }\n            function rejected(value) { try {\n                step(generator[\"throw\"](value));\n            }\n            catch (e) {\n                reject(e);\n            } }\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    }\n    function __generator(thisArg, body) {\n        var _ = { label: 0, sent: function () { if (t[0] & 1)\n                throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () { return this; }), g;\n        function verb(n) { return function (v) { return step([n, v]); }; }\n        function step(op) {\n            if (f)\n                throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)\n                        return t;\n                    if (y = 0, t)\n                        op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2])\n                                _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                }\n                catch (e) {\n                    op = [6, e];\n                    y = 0;\n                }\n                finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5)\n                throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    }\n    var __createBinding = Object.create ? (function (o, m, k, k2) {\n        if (k2 === undefined)\n            k2 = k;\n        Object.defineProperty(o, k2, { enumerable: true, get: function () { return m[k]; } });\n    }) : (function (o, m, k, k2) {\n        if (k2 === undefined)\n            k2 = k;\n        o[k2] = m[k];\n    });\n    function __exportStar(m, exports) {\n        for (var p in m)\n            if (p !== \"default\" && !exports.hasOwnProperty(p))\n                __createBinding(exports, m, p);\n    }\n    function __values(o) {\n        var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n        if (m)\n            return m.call(o);\n        if (o && typeof o.length === \"number\")\n            return {\n                next: function () {\n                    if (o && i >= o.length)\n                        o = void 0;\n                    return { value: o && o[i++], done: !o };\n                }\n            };\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n    }\n    function __read(o, n) {\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n        if (!m)\n            return o;\n        var i = m.call(o), r, ar = [], e;\n        try {\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)\n                ar.push(r.value);\n        }\n        catch (error) {\n            e = { error: error };\n        }\n        finally {\n            try {\n                if (r && !r.done && (m = i[\"return\"]))\n                    m.call(i);\n            }\n            finally {\n                if (e)\n                    throw e.error;\n            }\n        }\n        return ar;\n    }\n    function __spread() {\n        for (var ar = [], i = 0; i < arguments.length; i++)\n            ar = ar.concat(__read(arguments[i]));\n        return ar;\n    }\n    function __spreadArrays() {\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n            s += arguments[i].length;\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n                r[k] = a[j];\n        return r;\n    }\n    ;\n    function __await(v) {\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\n    }\n    function __asyncGenerator(thisArg, _arguments, generator) {\n        if (!Symbol.asyncIterator)\n            throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n        function verb(n) { if (g[n])\n            i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n        function resume(n, v) { try {\n            step(g[n](v));\n        }\n        catch (e) {\n            settle(q[0][3], e);\n        } }\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n        function fulfill(value) { resume(\"next\", value); }\n        function reject(value) { resume(\"throw\", value); }\n        function settle(f, v) { if (f(v), q.shift(), q.length)\n            resume(q[0][0], q[0][1]); }\n    }\n    function __asyncDelegator(o) {\n        var i, p;\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\n    }\n    function __asyncValues(o) {\n        if (!Symbol.asyncIterator)\n            throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var m = o[Symbol.asyncIterator], i;\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function (v) { resolve({ value: v, done: d }); }, reject); }\n    }\n    function __makeTemplateObject(cooked, raw) {\n        if (Object.defineProperty) {\n            Object.defineProperty(cooked, \"raw\", { value: raw });\n        }\n        else {\n            cooked.raw = raw;\n        }\n        return cooked;\n    }\n    ;\n    var __setModuleDefault = Object.create ? (function (o, v) {\n        Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n    }) : function (o, v) {\n        o[\"default\"] = v;\n    };\n    function __importStar(mod) {\n        if (mod && mod.__esModule)\n            return mod;\n        var result = {};\n        if (mod != null)\n            for (var k in mod)\n                if (Object.hasOwnProperty.call(mod, k))\n                    __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n    }\n    function __importDefault(mod) {\n        return (mod && mod.__esModule) ? mod : { default: mod };\n    }\n    function __classPrivateFieldGet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError(\"attempted to get private field on non-instance\");\n        }\n        return privateMap.get(receiver);\n    }\n    function __classPrivateFieldSet(receiver, privateMap, value) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError(\"attempted to set private field on non-instance\");\n        }\n        privateMap.set(receiver, value);\n        return value;\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var ON_WEB_WORKER = new core.InjectionToken('WebWorker.onWebWorker');\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Message Bus is a low level API used to communicate between the UI and the background.\n     * Communication is based on a channel abstraction. Messages published in a\n     * given channel to one MessageBusSink are received on the same channel\n     * by the corresponding MessageBusSource.\n     *\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var MessageBus = /** @class */ (function () {\n        function MessageBus() {\n        }\n        return MessageBus;\n    }());\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var RenderStore = /** @class */ (function () {\n        function RenderStore() {\n            this._nextIndex = 0;\n            this._lookupById = new Map();\n            this._lookupByObject = new Map();\n        }\n        RenderStore.prototype.allocateId = function () {\n            return this._nextIndex++;\n        };\n        RenderStore.prototype.store = function (obj, id) {\n            if (id == null)\n                return;\n            this._lookupById.set(id, obj);\n            this._lookupByObject.set(obj, id);\n        };\n        RenderStore.prototype.remove = function (obj) {\n            var index = this._lookupByObject.get(obj);\n            if (index != null) {\n                this._lookupByObject.delete(obj);\n                this._lookupById.delete(index);\n            }\n        };\n        RenderStore.prototype.deserialize = function (id) {\n            return this._lookupById.has(id) ? this._lookupById.get(id) : null;\n        };\n        RenderStore.prototype.serialize = function (obj) {\n            return obj == null ? null : this._lookupByObject.get(obj);\n        };\n        return RenderStore;\n    }());\n    RenderStore.decorators = [\n        { type: core.Injectable }\n    ];\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var LocationType = /** @class */ (function () {\n        function LocationType(href, protocol, host, hostname, port, pathname, search, hash, origin) {\n            this.href = href;\n            this.protocol = protocol;\n            this.host = host;\n            this.hostname = hostname;\n            this.port = port;\n            this.pathname = pathname;\n            this.search = search;\n            this.hash = hash;\n            this.origin = origin;\n        }\n        return LocationType;\n    }());\n    var Serializer = /** @class */ (function () {\n        function Serializer(_renderStore) {\n            this._renderStore = _renderStore;\n        }\n        Serializer.prototype.serialize = function (obj, type /* PRIMITIVE */) {\n            var _this = this;\n            if (type === void 0) { type = 1; }\n            if (obj == null || type === 1 /* PRIMITIVE */) {\n                return obj;\n            }\n            if (Array.isArray(obj)) {\n                return obj.map(function (v) { return _this.serialize(v, type); });\n            }\n            if (type === 2 /* RENDER_STORE_OBJECT */) {\n                return this._renderStore.serialize(obj);\n            }\n            if (type === 0 /* RENDERER_TYPE_2 */) {\n                return this._serializeRendererType2(obj);\n            }\n            if (type === LocationType) {\n                return this._serializeLocation(obj);\n            }\n            throw new Error(\"No serializer for type \" + core.ɵstringify(type));\n        };\n        Serializer.prototype.deserialize = function (map, type /* PRIMITIVE */, data) {\n            var _this = this;\n            if (type === void 0) { type = 1; }\n            if (map == null || type === 1 /* PRIMITIVE */) {\n                return map;\n            }\n            if (Array.isArray(map)) {\n                return map.map(function (val) { return _this.deserialize(val, type, data); });\n            }\n            if (type === 2 /* RENDER_STORE_OBJECT */) {\n                return this._renderStore.deserialize(map);\n            }\n            if (type === 0 /* RENDERER_TYPE_2 */) {\n                return this._deserializeRendererType2(map);\n            }\n            if (type === LocationType) {\n                return this._deserializeLocation(map);\n            }\n            throw new Error(\"No deserializer for type \" + core.ɵstringify(type));\n        };\n        Serializer.prototype._serializeLocation = function (loc) {\n            return {\n                'href': loc.href,\n                'protocol': loc.protocol,\n                'host': loc.host,\n                'hostname': loc.hostname,\n                'port': loc.port,\n                'pathname': loc.pathname,\n                'search': loc.search,\n                'hash': loc.hash,\n                'origin': loc.origin,\n            };\n        };\n        Serializer.prototype._deserializeLocation = function (loc) {\n            return new LocationType(loc['href'], loc['protocol'], loc['host'], loc['hostname'], loc['port'], loc['pathname'], loc['search'], loc['hash'], loc['origin']);\n        };\n        Serializer.prototype._serializeRendererType2 = function (type) {\n            return {\n                'id': type.id,\n                'encapsulation': this.serialize(type.encapsulation),\n                'styles': this.serialize(type.styles),\n                'data': this.serialize(type.data),\n            };\n        };\n        Serializer.prototype._deserializeRendererType2 = function (props) {\n            return {\n                id: props['id'],\n                encapsulation: props['encapsulation'],\n                styles: this.deserialize(props['styles']),\n                data: this.deserialize(props['data'])\n            };\n        };\n        return Serializer;\n    }());\n    Serializer.decorators = [\n        { type: core.Injectable }\n    ];\n    Serializer.ctorParameters = function () { return [\n        { type: RenderStore }\n    ]; };\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var ClientMessageBrokerFactory = /** @class */ (function () {\n        /** @internal */\n        function ClientMessageBrokerFactory(_messageBus, _serializer) {\n            this._messageBus = _messageBus;\n            this._serializer = _serializer;\n        }\n        /**\n         * Initializes the given channel and attaches a new {@link ClientMessageBroker} to it.\n         */\n        ClientMessageBrokerFactory.prototype.createMessageBroker = function (channel, runInZone) {\n            if (runInZone === void 0) { runInZone = true; }\n            this._messageBus.initChannel(channel, runInZone);\n            return new ClientMessageBroker(this._messageBus, this._serializer, channel);\n        };\n        return ClientMessageBrokerFactory;\n    }());\n    ClientMessageBrokerFactory.decorators = [\n        { type: core.Injectable }\n    ];\n    ClientMessageBrokerFactory.ctorParameters = function () { return [\n        { type: MessageBus },\n        { type: Serializer }\n    ]; };\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var ClientMessageBroker = /** @class */ (function () {\n        /** @internal */\n        function ClientMessageBroker(messageBus, _serializer, channel) {\n            var _this = this;\n            this.channel = channel;\n            this._pending = new Map();\n            this._sink = messageBus.to(channel);\n            this._serializer = _serializer;\n            var source = messageBus.from(channel);\n            source.subscribe({ next: function (message) { return _this._handleMessage(message); } });\n        }\n        ClientMessageBroker.prototype._generateMessageId = function (name) {\n            var time = core.ɵstringify(new Date().getTime());\n            var iteration = 0;\n            var id = name + time + core.ɵstringify(iteration);\n            while (this._pending.has(id)) {\n                id = \"\" + name + time + iteration;\n                iteration++;\n            }\n            return id;\n        };\n        ClientMessageBroker.prototype.runOnService = function (args, returnType) {\n            var _this = this;\n            var fnArgs = [];\n            if (args.args) {\n                args.args.forEach(function (argument) {\n                    if (argument.type != null) {\n                        fnArgs.push(_this._serializer.serialize(argument.value, argument.type));\n                    }\n                    else {\n                        fnArgs.push(argument.value);\n                    }\n                });\n            }\n            var promise;\n            var id = null;\n            if (returnType != null) {\n                var completer_1 = undefined;\n                promise = new Promise(function (resolve, reject) {\n                    completer_1 = { resolve: resolve, reject: reject };\n                });\n                id = this._generateMessageId(args.method);\n                this._pending.set(id, completer_1);\n                promise.catch(function (err) {\n                    if (console && console.error) {\n                        // tslint:disable-next-line:no-console\n                        console.error(err);\n                    }\n                    completer_1.reject(err);\n                });\n                promise = promise.then(function (v) { return _this._serializer ? _this._serializer.deserialize(v, returnType) : v; });\n            }\n            else {\n                promise = null;\n            }\n            var message = {\n                'method': args.method,\n                'args': fnArgs,\n            };\n            if (id != null) {\n                message['id'] = id;\n            }\n            this._sink.emit(message);\n            return promise;\n        };\n        ClientMessageBroker.prototype._handleMessage = function (message) {\n            if (message.type === 'result' || message.type === 'error') {\n                var id = message.id;\n                if (this._pending.has(id)) {\n                    if (message.type === 'result') {\n                        this._pending.get(id).resolve(message.value);\n                    }\n                    else {\n                        this._pending.get(id).reject(message.value);\n                    }\n                    this._pending.delete(id);\n                }\n            }\n        };\n        return ClientMessageBroker;\n    }());\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var FnArg = /** @class */ (function () {\n        function FnArg(value, type /* PRIMITIVE */) {\n            if (type === void 0) { type = 1; }\n            this.value = value;\n            this.type = type;\n        }\n        return FnArg;\n    }());\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var UiArguments = /** @class */ (function () {\n        function UiArguments(method, args) {\n            this.method = method;\n            this.args = args;\n        }\n        return UiArguments;\n    }());\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var PostMessageBusSink = /** @class */ (function () {\n        function PostMessageBusSink(_postMessageTarget) {\n            this._postMessageTarget = _postMessageTarget;\n            this._channels = {};\n            this._messageBuffer = [];\n        }\n        PostMessageBusSink.prototype.attachToZone = function (zone) {\n            var _this = this;\n            this._zone = zone;\n            this._zone.runOutsideAngular(function () {\n                _this._zone.onStable.subscribe({\n                    next: function () {\n                        _this._handleOnEventDone();\n                    }\n                });\n            });\n        };\n        PostMessageBusSink.prototype.initChannel = function (channel, runInZone) {\n            var _this = this;\n            if (runInZone === void 0) { runInZone = true; }\n            if (this._channels.hasOwnProperty(channel)) {\n                throw new Error(channel + \" has already been initialized\");\n            }\n            var emitter = new core.EventEmitter(false);\n            var channelInfo = new _Channel(emitter, runInZone);\n            this._channels[channel] = channelInfo;\n            emitter.subscribe(function (data) {\n                var message = { channel: channel, message: data };\n                if (runInZone) {\n                    _this._messageBuffer.push(message);\n                }\n                else {\n                    _this._sendMessages([message]);\n                }\n            });\n        };\n        PostMessageBusSink.prototype.to = function (channel) {\n            if (this._channels.hasOwnProperty(channel)) {\n                return this._channels[channel].emitter;\n            }\n            else {\n                throw new Error(channel + \" is not set up. Did you forget to call initChannel?\");\n            }\n        };\n        PostMessageBusSink.prototype._handleOnEventDone = function () {\n            if (this._messageBuffer.length > 0) {\n                this._sendMessages(this._messageBuffer);\n                this._messageBuffer = [];\n            }\n        };\n        PostMessageBusSink.prototype._sendMessages = function (messages) {\n            this._postMessageTarget.postMessage(messages);\n        };\n        return PostMessageBusSink;\n    }());\n    var PostMessageBusSource = /** @class */ (function () {\n        function PostMessageBusSource(eventTarget) {\n            var _this = this;\n            this._channels = {};\n            if (eventTarget) {\n                eventTarget.addEventListener('message', function (ev) { return _this._handleMessages(ev); });\n            }\n            else {\n                // if no eventTarget is given we assume we're in a WebWorker and listen on the global scope\n                var workerScope = self;\n                workerScope.addEventListener('message', function (ev) { return _this._handleMessages(ev); });\n            }\n        }\n        PostMessageBusSource.prototype.attachToZone = function (zone) {\n            this._zone = zone;\n        };\n        PostMessageBusSource.prototype.initChannel = function (channel, runInZone) {\n            if (runInZone === void 0) { runInZone = true; }\n            if (this._channels.hasOwnProperty(channel)) {\n                throw new Error(channel + \" has already been initialized\");\n            }\n            var emitter = new core.EventEmitter(false);\n            var channelInfo = new _Channel(emitter, runInZone);\n            this._channels[channel] = channelInfo;\n        };\n        PostMessageBusSource.prototype.from = function (channel) {\n            if (this._channels.hasOwnProperty(channel)) {\n                return this._channels[channel].emitter;\n            }\n            else {\n                throw new Error(channel + \" is not set up. Did you forget to call initChannel?\");\n            }\n        };\n        PostMessageBusSource.prototype._handleMessages = function (ev) {\n            var messages = ev.data;\n            for (var i = 0; i < messages.length; i++) {\n                this._handleMessage(messages[i]);\n            }\n        };\n        PostMessageBusSource.prototype._handleMessage = function (data) {\n            var channel = data.channel;\n            if (this._channels.hasOwnProperty(channel)) {\n                var channelInfo_1 = this._channels[channel];\n                if (channelInfo_1.runInZone) {\n                    this._zone.run(function () {\n                        channelInfo_1.emitter.emit(data.message);\n                    });\n                }\n                else {\n                    channelInfo_1.emitter.emit(data.message);\n                }\n            }\n        };\n        return PostMessageBusSource;\n    }());\n    /**\n     * A TypeScript implementation of {@link MessageBus} for communicating via JavaScript's\n     * postMessage API.\n     */\n    var PostMessageBus = /** @class */ (function () {\n        function PostMessageBus(sink, source) {\n            this.sink = sink;\n            this.source = source;\n        }\n        PostMessageBus.prototype.attachToZone = function (zone) {\n            this.source.attachToZone(zone);\n            this.sink.attachToZone(zone);\n        };\n        PostMessageBus.prototype.initChannel = function (channel, runInZone) {\n            if (runInZone === void 0) { runInZone = true; }\n            this.source.initChannel(channel, runInZone);\n            this.sink.initChannel(channel, runInZone);\n        };\n        PostMessageBus.prototype.from = function (channel) {\n            return this.source.from(channel);\n        };\n        PostMessageBus.prototype.to = function (channel) {\n            return this.sink.to(channel);\n        };\n        return PostMessageBus;\n    }());\n    PostMessageBus.decorators = [\n        { type: core.Injectable }\n    ];\n    PostMessageBus.ctorParameters = function () { return [\n        { type: PostMessageBusSink },\n        { type: PostMessageBusSource }\n    ]; };\n    /**\n     * Helper class that wraps a channel's {@link EventEmitter} and\n     * keeps track of if it should run in the zone.\n     */\n    var _Channel = /** @class */ (function () {\n        function _Channel(emitter, runInZone) {\n            this.emitter = emitter;\n            this.runInZone = runInZone;\n        }\n        return _Channel;\n    }());\n\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var ServiceMessageBrokerFactory = /** @class */ (function () {\n        /** @internal */\n        function ServiceMessageBrokerFactory(_messageBus, _serializer) {\n            this._messageBus = _messageBus;\n            this._serializer = _serializer;\n        }\n        /**\n         * Initializes the given channel and attaches a new {@link ServiceMessageBroker} to it.\n         */\n        ServiceMessageBrokerFactory.prototype.createMessageBroker = function (channel, runInZone) {\n            if (runInZone === void 0) { runInZone = true; }\n            this._messageBus.initChannel(channel, runInZone);\n            return new ServiceMessageBroker(this._messageBus, this._serializer, channel);\n        };\n        return ServiceMessageBrokerFactory;\n    }());\n    ServiceMessageBrokerFactory.decorators = [\n        { type: core.Injectable }\n    ];\n    ServiceMessageBrokerFactory.ctorParameters = function () { return [\n        { type: MessageBus },\n        { type: Serializer }\n    ]; };\n    /**\n     * Helper class for UIComponents that allows components to register methods.\n     * If a registered method message is received from the broker on the worker,\n     * the UIMessageBroker deserializes its arguments and calls the registered method.\n     * If that method returns a promise, the UIMessageBroker returns the result to the worker.\n     *\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var ServiceMessageBroker = /** @class */ (function () {\n        /** @internal */\n        function ServiceMessageBroker(messageBus, _serializer, channel) {\n            var _this = this;\n            this._serializer = _serializer;\n            this.channel = channel;\n            this._methods = new Map();\n            this._sink = messageBus.to(channel);\n            var source = messageBus.from(channel);\n            source.subscribe({ next: function (message) { return _this._handleMessage(message); } });\n        }\n        ServiceMessageBroker.prototype.registerMethod = function (methodName, signature, method, returnType) {\n            var _this = this;\n            this._methods.set(methodName, function (message) {\n                var serializedArgs = message.args;\n                var numArgs = signature ? signature.length : 0;\n                var deserializedArgs = [];\n                for (var i = 0; i < numArgs; i++) {\n                    var serializedArg = serializedArgs[i];\n                    deserializedArgs[i] = _this._serializer.deserialize(serializedArg, signature[i]);\n                }\n                var promise = method.apply(void 0, __spread(deserializedArgs));\n                if (returnType && promise) {\n                    _this._wrapWebWorkerPromise(message.id, promise, returnType);\n                }\n            });\n        };\n        ServiceMessageBroker.prototype._handleMessage = function (message) {\n            if (this._methods.has(message.method)) {\n                this._methods.get(message.method)(message);\n            }\n        };\n        ServiceMessageBroker.prototype._wrapWebWorkerPromise = function (id, promise, type) {\n            var _this = this;\n            promise.then(function (result) {\n                _this._sink.emit({\n                    'type': 'result',\n                    'value': _this._serializer.serialize(result, type),\n                    'id': id,\n                });\n            });\n        };\n        return ServiceMessageBroker;\n    }());\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * All channels used by angular's WebWorker components are listed here.\n     * You should not use these channels in your application code.\n     */\n    var RENDERER_2_CHANNEL = 'v2.ng-Renderer';\n    var EVENT_2_CHANNEL = 'v2.ng-Events';\n    var ROUTER_CHANNEL = 'ng-Router';\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var MOUSE_EVENT_PROPERTIES = [\n        'altKey', 'button', 'clientX', 'clientY', 'metaKey', 'movementX', 'movementY', 'offsetX',\n        'offsetY', 'region', 'screenX', 'screenY', 'shiftKey'\n    ];\n    var KEYBOARD_EVENT_PROPERTIES = [\n        'altkey', 'charCode', 'code', 'ctrlKey', 'isComposing', 'key', 'keyCode', 'location', 'metaKey',\n        'repeat', 'shiftKey', 'which'\n    ];\n    var TRANSITION_EVENT_PROPERTIES = ['propertyName', 'elapsedTime', 'pseudoElement'];\n    var EVENT_PROPERTIES = ['type', 'bubbles', 'cancelable'];\n    var NODES_WITH_VALUE = new Set(['input', 'select', 'option', 'button', 'li', 'meter', 'progress', 'param', 'textarea']);\n    function serializeGenericEvent(e) {\n        return serializeEvent(e, EVENT_PROPERTIES);\n    }\n    // TODO(jteplitz602): Allow users to specify the properties they need rather than always\n    // adding value and files #3374\n    function serializeEventWithTarget(e) {\n        var serializedEvent = serializeEvent(e, EVENT_PROPERTIES);\n        return addTarget(e, serializedEvent);\n    }\n    function serializeMouseEvent(e) {\n        return serializeEvent(e, MOUSE_EVENT_PROPERTIES);\n    }\n    function serializeKeyboardEvent(e) {\n        var serializedEvent = serializeEvent(e, KEYBOARD_EVENT_PROPERTIES);\n        return addTarget(e, serializedEvent);\n    }\n    function serializeTransitionEvent(e) {\n        var serializedEvent = serializeEvent(e, TRANSITION_EVENT_PROPERTIES);\n        return addTarget(e, serializedEvent);\n    }\n    // TODO(jteplitz602): #3374. See above.\n    function addTarget(e, serializedEvent) {\n        if (NODES_WITH_VALUE.has(e.target.tagName.toLowerCase())) {\n            var target = e.target;\n            serializedEvent['target'] = { 'value': target.value };\n            if (target.files) {\n                serializedEvent['target']['files'] = target.files;\n            }\n        }\n        return serializedEvent;\n    }\n    function serializeEvent(e, properties) {\n        var serialized = {};\n        for (var i = 0; i < properties.length; i++) {\n            var prop = properties[i];\n            serialized[prop] = e[prop];\n        }\n        return serialized;\n    }\n\n    var EventDispatcher = /** @class */ (function () {\n        function EventDispatcher(_sink, _serializer) {\n            this._sink = _sink;\n            this._serializer = _serializer;\n        }\n        EventDispatcher.prototype.dispatchAnimationEvent = function (player, phaseName, element) {\n            this._sink.emit({\n                'element': this._serializer.serialize(element, 2 /* RENDER_STORE_OBJECT */),\n                'animationPlayer': this._serializer.serialize(player, 2 /* RENDER_STORE_OBJECT */),\n                'phaseName': phaseName,\n            });\n            return true;\n        };\n        EventDispatcher.prototype.dispatchRenderEvent = function (element, eventTarget, eventName, event) {\n            var serializedEvent;\n            // TODO (jteplitz602): support custom events #3350\n            switch (event.type) {\n                case 'click':\n                case 'mouseup':\n                case 'mousedown':\n                case 'dblclick':\n                case 'contextmenu':\n                case 'mouseenter':\n                case 'mouseleave':\n                case 'mousemove':\n                case 'mouseout':\n                case 'mouseover':\n                case 'show':\n                    serializedEvent = serializeMouseEvent(event);\n                    break;\n                case 'keydown':\n                case 'keypress':\n                case 'keyup':\n                    serializedEvent = serializeKeyboardEvent(event);\n                    break;\n                case 'input':\n                case 'change':\n                case 'blur':\n                    serializedEvent = serializeEventWithTarget(event);\n                    break;\n                case 'abort':\n                case 'afterprint':\n                case 'beforeprint':\n                case 'cached':\n                case 'canplay':\n                case 'canplaythrough':\n                case 'chargingchange':\n                case 'chargingtimechange':\n                case 'close':\n                case 'dischargingtimechange':\n                case 'DOMContentLoaded':\n                case 'downloading':\n                case 'durationchange':\n                case 'emptied':\n                case 'ended':\n                case 'error':\n                case 'fullscreenchange':\n                case 'fullscreenerror':\n                case 'invalid':\n                case 'languagechange':\n                case 'levelfchange':\n                case 'loadeddata':\n                case 'loadedmetadata':\n                case 'obsolete':\n                case 'offline':\n                case 'online':\n                case 'open':\n                case 'orientatoinchange':\n                case 'pause':\n                case 'pointerlockchange':\n                case 'pointerlockerror':\n                case 'play':\n                case 'playing':\n                case 'ratechange':\n                case 'readystatechange':\n                case 'reset':\n                case 'scroll':\n                case 'seeked':\n                case 'seeking':\n                case 'stalled':\n                case 'submit':\n                case 'success':\n                case 'suspend':\n                case 'timeupdate':\n                case 'updateready':\n                case 'visibilitychange':\n                case 'volumechange':\n                case 'waiting':\n                    serializedEvent = serializeGenericEvent(event);\n                    break;\n                case 'transitionend':\n                    serializedEvent = serializeTransitionEvent(event);\n                    break;\n                default:\n                    throw new Error(eventName + ' not supported on WebWorkers');\n            }\n            this._sink.emit({\n                'element': this._serializer.serialize(element, 2 /* RENDER_STORE_OBJECT */),\n                'eventName': eventName,\n                'eventTarget': eventTarget,\n                'event': serializedEvent,\n            });\n            // TODO(kegluneq): Eventually, we want the user to indicate from the UI side whether the event\n            // should be canceled, but for now just call `preventDefault` on the original DOM event.\n            return false;\n        };\n        return EventDispatcher;\n    }());\n\n    var MessageBasedRenderer2 = /** @class */ (function () {\n        function MessageBasedRenderer2(_brokerFactory, _bus, _serializer, _renderStore, _rendererFactory) {\n            this._brokerFactory = _brokerFactory;\n            this._bus = _bus;\n            this._serializer = _serializer;\n            this._renderStore = _renderStore;\n            this._rendererFactory = _rendererFactory;\n        }\n        MessageBasedRenderer2.prototype.start = function () {\n            var _this = this;\n            var broker = this._brokerFactory.createMessageBroker(RENDERER_2_CHANNEL);\n            this._bus.initChannel(EVENT_2_CHANNEL);\n            this._eventDispatcher = new EventDispatcher(this._bus.to(EVENT_2_CHANNEL), this._serializer);\n            var _a = __read([\n                2 /* RENDER_STORE_OBJECT */,\n                1 /* PRIMITIVE */,\n                0 /* RENDERER_TYPE_2 */,\n            ], 3), RSO = _a[0], P = _a[1], CRT = _a[2];\n            var methods = [\n                ['createRenderer', this.createRenderer, RSO, CRT, P],\n                ['createElement', this.createElement, RSO, P, P, P],\n                ['createComment', this.createComment, RSO, P, P],\n                ['createText', this.createText, RSO, P, P],\n                ['appendChild', this.appendChild, RSO, RSO, RSO],\n                ['insertBefore', this.insertBefore, RSO, RSO, RSO, RSO],\n                ['removeChild', this.removeChild, RSO, RSO, RSO],\n                ['selectRootElement', this.selectRootElement, RSO, P, P],\n                ['parentNode', this.parentNode, RSO, RSO, P],\n                ['nextSibling', this.nextSibling, RSO, RSO, P],\n                ['setAttribute', this.setAttribute, RSO, RSO, P, P, P],\n                ['removeAttribute', this.removeAttribute, RSO, RSO, P, P],\n                ['addClass', this.addClass, RSO, RSO, P],\n                ['removeClass', this.removeClass, RSO, RSO, P],\n                ['setStyle', this.setStyle, RSO, RSO, P, P, P],\n                ['removeStyle', this.removeStyle, RSO, RSO, P, P],\n                ['setProperty', this.setProperty, RSO, RSO, P, P],\n                ['setValue', this.setValue, RSO, RSO, P],\n                ['listen', this.listen, RSO, RSO, P, P, P],\n                ['unlisten', this.unlisten, RSO, RSO],\n                ['destroy', this.destroy, RSO],\n                ['destroyNode', this.destroyNode, RSO, P]\n            ];\n            methods.forEach(function (_a) {\n                var _b = __read(_a), name = _b[0], method = _b[1], argTypes = _b.slice(2);\n                broker.registerMethod(name, argTypes, method.bind(_this));\n            });\n        };\n        MessageBasedRenderer2.prototype.destroy = function (r) {\n            r.destroy();\n        };\n        MessageBasedRenderer2.prototype.destroyNode = function (r, node) {\n            if (r.destroyNode) {\n                r.destroyNode(node);\n            }\n            this._renderStore.remove(node);\n        };\n        MessageBasedRenderer2.prototype.createRenderer = function (el, type, id) {\n            this._renderStore.store(this._rendererFactory.createRenderer(el, type), id);\n        };\n        MessageBasedRenderer2.prototype.createElement = function (r, name, namespace, id) {\n            this._renderStore.store(r.createElement(name, namespace), id);\n        };\n        MessageBasedRenderer2.prototype.createComment = function (r, value, id) {\n            this._renderStore.store(r.createComment(value), id);\n        };\n        MessageBasedRenderer2.prototype.createText = function (r, value, id) {\n            this._renderStore.store(r.createText(value), id);\n        };\n        MessageBasedRenderer2.prototype.appendChild = function (r, parent, child) {\n            r.appendChild(parent, child);\n        };\n        MessageBasedRenderer2.prototype.insertBefore = function (r, parent, child, ref) {\n            r.insertBefore(parent, child, ref);\n        };\n        MessageBasedRenderer2.prototype.removeChild = function (r, parent, child) {\n            r.removeChild(parent, child);\n        };\n        MessageBasedRenderer2.prototype.selectRootElement = function (r, selector, id) {\n            this._renderStore.store(r.selectRootElement(selector), id);\n        };\n        MessageBasedRenderer2.prototype.parentNode = function (r, node, id) {\n            this._renderStore.store(r.parentNode(node), id);\n        };\n        MessageBasedRenderer2.prototype.nextSibling = function (r, node, id) {\n            this._renderStore.store(r.nextSibling(node), id);\n        };\n        MessageBasedRenderer2.prototype.setAttribute = function (r, el, name, value, namespace) {\n            r.setAttribute(el, name, value, namespace);\n        };\n        MessageBasedRenderer2.prototype.removeAttribute = function (r, el, name, namespace) {\n            r.removeAttribute(el, name, namespace);\n        };\n        MessageBasedRenderer2.prototype.addClass = function (r, el, name) {\n            r.addClass(el, name);\n        };\n        MessageBasedRenderer2.prototype.removeClass = function (r, el, name) {\n            r.removeClass(el, name);\n        };\n        MessageBasedRenderer2.prototype.setStyle = function (r, el, style, value, flags) {\n            r.setStyle(el, style, value, flags);\n        };\n        MessageBasedRenderer2.prototype.removeStyle = function (r, el, style, flags) {\n            r.removeStyle(el, style, flags);\n        };\n        MessageBasedRenderer2.prototype.setProperty = function (r, el, name, value) {\n            r.setProperty(el, name, value);\n        };\n        MessageBasedRenderer2.prototype.setValue = function (r, node, value) {\n            r.setValue(node, value);\n        };\n        MessageBasedRenderer2.prototype.listen = function (r, el, elName, eventName, unlistenId) {\n            var _this = this;\n            var listener = function (event) {\n                return _this._eventDispatcher.dispatchRenderEvent(el, elName, eventName, event);\n            };\n            var unlisten = r.listen(el || elName, eventName, listener);\n            this._renderStore.store(unlisten, unlistenId);\n        };\n        MessageBasedRenderer2.prototype.unlisten = function (r, unlisten) {\n            unlisten();\n        };\n        return MessageBasedRenderer2;\n    }());\n    MessageBasedRenderer2.decorators = [\n        { type: core.Injectable }\n    ];\n    MessageBasedRenderer2.ctorParameters = function () { return [\n        { type: ServiceMessageBrokerFactory },\n        { type: MessageBus },\n        { type: Serializer },\n        { type: RenderStore },\n        { type: core.RendererFactory2 }\n    ]; };\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Wrapper class that exposes the Worker\n     * and underlying {@link MessageBus} for lower level message passing.\n     *\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var WebWorkerInstance = /** @class */ (function () {\n        function WebWorkerInstance() {\n        }\n        /** @internal */\n        WebWorkerInstance.prototype.init = function (worker, bus) {\n            this.worker = worker;\n            this.bus = bus;\n        };\n        return WebWorkerInstance;\n    }());\n    WebWorkerInstance.decorators = [\n        { type: core.Injectable }\n    ];\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var WORKER_SCRIPT = new core.InjectionToken('WebWorkerScript');\n    /**\n     * A multi-provider used to automatically call the `start()` method after the service is\n     * created.\n     *\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var WORKER_UI_STARTABLE_MESSAGING_SERVICE = new core.InjectionToken('WorkerRenderStartableMsgService');\n    var _WORKER_UI_PLATFORM_PROVIDERS = [\n        { provide: core.NgZone, useFactory: createNgZone, deps: [] },\n        {\n            provide: MessageBasedRenderer2,\n            deps: [ServiceMessageBrokerFactory, MessageBus, Serializer, RenderStore, core.RendererFactory2]\n        },\n        { provide: WORKER_UI_STARTABLE_MESSAGING_SERVICE, useExisting: MessageBasedRenderer2, multi: true },\n        platformBrowser.ɵBROWSER_SANITIZATION_PROVIDERS,\n        { provide: core.ErrorHandler, useFactory: _exceptionHandler, deps: [] },\n        { provide: common.DOCUMENT, useFactory: _document, deps: [] },\n        // TODO(jteplitz602): Investigate if we definitely need EVENT_MANAGER on the render thread\n        // #5298\n        {\n            provide: platformBrowser.EVENT_MANAGER_PLUGINS,\n            useClass: platformBrowser.ɵDomEventsPlugin,\n            deps: [common.DOCUMENT, core.NgZone],\n            multi: true\n        },\n        { provide: platformBrowser.EVENT_MANAGER_PLUGINS, useClass: platformBrowser.ɵKeyEventsPlugin, deps: [common.DOCUMENT], multi: true },\n        {\n            provide: platformBrowser.EVENT_MANAGER_PLUGINS,\n            useClass: platformBrowser.ɵHammerGesturesPlugin,\n            deps: [common.DOCUMENT, platformBrowser.HAMMER_GESTURE_CONFIG],\n            multi: true\n        },\n        { provide: platformBrowser.HAMMER_GESTURE_CONFIG, useClass: platformBrowser.HammerGestureConfig, deps: [] },\n        core.ɵAPP_ID_RANDOM_PROVIDER,\n        { provide: platformBrowser.ɵDomRendererFactory2, deps: [platformBrowser.EventManager, platformBrowser.ɵDomSharedStylesHost] },\n        { provide: core.RendererFactory2, useExisting: platformBrowser.ɵDomRendererFactory2 },\n        { provide: platformBrowser.ɵSharedStylesHost, useExisting: platformBrowser.ɵDomSharedStylesHost },\n        {\n            provide: ServiceMessageBrokerFactory,\n            useClass: ServiceMessageBrokerFactory,\n            deps: [MessageBus, Serializer]\n        },\n        {\n            provide: ClientMessageBrokerFactory,\n            useClass: ClientMessageBrokerFactory,\n            deps: [MessageBus, Serializer]\n        },\n        { provide: Serializer, deps: [RenderStore] },\n        { provide: ON_WEB_WORKER, useValue: false },\n        { provide: RenderStore, deps: [] },\n        { provide: platformBrowser.ɵDomSharedStylesHost, deps: [common.DOCUMENT] },\n        { provide: core.Testability, deps: [core.NgZone] },\n        { provide: platformBrowser.EventManager, deps: [platformBrowser.EVENT_MANAGER_PLUGINS, core.NgZone] },\n        { provide: WebWorkerInstance, deps: [] },\n        {\n            provide: core.PLATFORM_INITIALIZER,\n            useFactory: initWebWorkerRenderPlatform,\n            multi: true,\n            deps: [core.Injector]\n        },\n        { provide: core.PLATFORM_ID, useValue: common.ɵPLATFORM_WORKER_UI_ID },\n        { provide: MessageBus, useFactory: messageBusFactory, deps: [WebWorkerInstance] },\n    ];\n    function initializeGenericWorkerRenderer(injector) {\n        var bus = injector.get(MessageBus);\n        var zone = injector.get(core.NgZone);\n        bus.attachToZone(zone);\n        // initialize message services after the bus has been created\n        var services = injector.get(WORKER_UI_STARTABLE_MESSAGING_SERVICE);\n        zone.runGuarded(function () {\n            services.forEach(function (svc) {\n                svc.start();\n            });\n        });\n    }\n    function messageBusFactory(instance) {\n        return instance.bus;\n    }\n    function initWebWorkerRenderPlatform(injector) {\n        return function () {\n            platformBrowser.ɵBrowserDomAdapter.makeCurrent();\n            platformBrowser.ɵBrowserGetTestability.init();\n            var scriptUri;\n            try {\n                scriptUri = injector.get(WORKER_SCRIPT);\n            }\n            catch (_a) {\n                throw new Error('You must provide your WebWorker\\'s initialization script with the WORKER_SCRIPT token');\n            }\n            var instance = injector.get(WebWorkerInstance);\n            spawnWebWorker(scriptUri, instance);\n            initializeGenericWorkerRenderer(injector);\n        };\n    }\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var platformWorkerUi = core.createPlatformFactory(core.platformCore, 'workerUi', _WORKER_UI_PLATFORM_PROVIDERS);\n    function _exceptionHandler() {\n        return new core.ErrorHandler();\n    }\n    function _document() {\n        // Tell ivy about the global document\n        core.ɵsetDocument(document);\n        return document;\n    }\n    function createNgZone() {\n        return new core.NgZone({ enableLongStackTrace: core.isDevMode() });\n    }\n    /**\n     * Spawns a new class and initializes the WebWorkerInstance\n     */\n    function spawnWebWorker(uri, instance) {\n        var webWorker = new Worker(uri);\n        // webWorker is casted to any because the lib.d.ts signature changed in TS3.5 to require the\n        // transfer argument in postMessage method.\n        // this seems wrong but since all of this code is deprecated it shouldn't matter that much.\n        var sink = new PostMessageBusSink(webWorker);\n        var source = new PostMessageBusSource(webWorker);\n        var bus = new PostMessageBus(sink, source);\n        instance.init(webWorker, bus);\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var VERSION = new core.Version('10.1.0-next.4+32.sha-250e299');\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var MessageBasedPlatformLocation = /** @class */ (function () {\n        function MessageBasedPlatformLocation(_brokerFactory, _platformLocation, bus, _serializer) {\n            this._brokerFactory = _brokerFactory;\n            this._platformLocation = _platformLocation;\n            this._serializer = _serializer;\n            this._platformLocation.onPopState(this._sendUrlChangeEvent.bind(this));\n            this._platformLocation.onHashChange(this._sendUrlChangeEvent.bind(this));\n            this._broker = this._brokerFactory.createMessageBroker(ROUTER_CHANNEL);\n            this._channelSink = bus.to(ROUTER_CHANNEL);\n        }\n        MessageBasedPlatformLocation.prototype.start = function () {\n            var P = 1 /* PRIMITIVE */;\n            this._broker.registerMethod('getLocation', null, this._getLocation.bind(this), LocationType);\n            this._broker.registerMethod('setPathname', [P], this._setPathname.bind(this));\n            this._broker.registerMethod('pushState', [P, P, P], this._platformLocation.pushState.bind(this._platformLocation));\n            this._broker.registerMethod('replaceState', [P, P, P], this._platformLocation.replaceState.bind(this._platformLocation));\n            this._broker.registerMethod('forward', null, this._platformLocation.forward.bind(this._platformLocation));\n            this._broker.registerMethod('back', null, this._platformLocation.back.bind(this._platformLocation));\n        };\n        MessageBasedPlatformLocation.prototype._getLocation = function () {\n            return Promise.resolve(this._platformLocation.location);\n        };\n        MessageBasedPlatformLocation.prototype._sendUrlChangeEvent = function (e) {\n            this._channelSink.emit({\n                'event': { 'type': e.type },\n                'location': this._serializer.serialize(this._platformLocation.location, LocationType),\n            });\n        };\n        MessageBasedPlatformLocation.prototype._setPathname = function (pathname) {\n            this._platformLocation.pathname = pathname;\n        };\n        return MessageBasedPlatformLocation;\n    }());\n    MessageBasedPlatformLocation.decorators = [\n        { type: core.Injectable }\n    ];\n    MessageBasedPlatformLocation.ctorParameters = function () { return [\n        { type: ServiceMessageBrokerFactory },\n        { type: common.ɵBrowserPlatformLocation },\n        { type: MessageBus },\n        { type: Serializer }\n    ]; };\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * A list of {@link Provider}s. To use the router in a Worker enabled application you must\n     * include these providers when setting up the render thread.\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var WORKER_UI_LOCATION_PROVIDERS = [\n        {\n            provide: MessageBasedPlatformLocation,\n            deps: [ServiceMessageBrokerFactory, common.ɵBrowserPlatformLocation, MessageBus, Serializer]\n        },\n        { provide: common.ɵBrowserPlatformLocation, deps: [common.DOCUMENT] },\n        { provide: core.PLATFORM_INITIALIZER, useFactory: initUiLocation, multi: true, deps: [core.Injector] }\n    ];\n    function initUiLocation(injector) {\n        return function () {\n            var zone = injector.get(core.NgZone);\n            zone.runGuarded(function () { return injector.get(MessageBasedPlatformLocation).start(); });\n        };\n    }\n\n    var WebWorkerPlatformLocation = /** @class */ (function (_super) {\n        __extends(WebWorkerPlatformLocation, _super);\n        function WebWorkerPlatformLocation(brokerFactory, bus, _serializer) {\n            var _this = _super.call(this) || this;\n            _this._serializer = _serializer;\n            _this._popStateListeners = [];\n            _this._hashChangeListeners = [];\n            _this._location = null;\n            _this._broker = brokerFactory.createMessageBroker(ROUTER_CHANNEL);\n            _this._channelSource = bus.from(ROUTER_CHANNEL);\n            _this._channelSource.subscribe({\n                next: function (msg) {\n                    var listeners = null;\n                    if (msg.hasOwnProperty('event')) {\n                        var type = msg['event']['type'];\n                        if (type === 'popstate') {\n                            listeners = _this._popStateListeners;\n                        }\n                        else if (type === 'hashchange') {\n                            listeners = _this._hashChangeListeners;\n                        }\n                        if (listeners) {\n                            // There was a popState or hashChange event, so the location object thas been updated\n                            _this._location = _this._serializer.deserialize(msg['location'], LocationType);\n                            listeners.forEach(function (fn) { return fn(msg['event']); });\n                        }\n                    }\n                }\n            });\n            _this.initialized = new Promise(function (res) { return _this.initializedResolve = res; });\n            return _this;\n        }\n        /** @internal **/\n        WebWorkerPlatformLocation.prototype.init = function () {\n            var _this = this;\n            var args = new UiArguments('getLocation');\n            return this._broker.runOnService(args, LocationType).then(function (val) {\n                _this._location = val;\n                _this.initializedResolve();\n                return true;\n            }, function (err) {\n                throw new Error(err);\n            });\n        };\n        WebWorkerPlatformLocation.prototype.getBaseHrefFromDOM = function () {\n            throw new Error('Attempt to get base href from DOM from WebWorker. You must either provide a value for the APP_BASE_HREF token through DI or use the hash location strategy.');\n        };\n        WebWorkerPlatformLocation.prototype.onPopState = function (fn) {\n            this._popStateListeners.push(fn);\n        };\n        WebWorkerPlatformLocation.prototype.onHashChange = function (fn) {\n            this._hashChangeListeners.push(fn);\n        };\n        Object.defineProperty(WebWorkerPlatformLocation.prototype, \"href\", {\n            get: function () {\n                return this._location ? this._location.href : '<unknown>';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(WebWorkerPlatformLocation.prototype, \"hostname\", {\n            get: function () {\n                return this._location ? this._location.host : '<unknown>';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(WebWorkerPlatformLocation.prototype, \"port\", {\n            get: function () {\n                return this._location ? this._location.port : '<unknown>';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(WebWorkerPlatformLocation.prototype, \"protocol\", {\n            get: function () {\n                return this._location ? this._location.protocol : '<unknown>';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(WebWorkerPlatformLocation.prototype, \"search\", {\n            get: function () {\n                return this._location ? this._location.search : '<unknown>';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(WebWorkerPlatformLocation.prototype, \"hash\", {\n            get: function () {\n                return this._location ? this._location.hash : '<unknown>';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(WebWorkerPlatformLocation.prototype, \"pathname\", {\n            set: function (newPath) {\n                if (this._location === null) {\n                    throw new Error('Attempt to set pathname before value is obtained from UI');\n                }\n                this._location.pathname = newPath;\n                var fnArgs = [new FnArg(newPath, 1 /* PRIMITIVE */)];\n                var args = new UiArguments('setPathname', fnArgs);\n                this._broker.runOnService(args, null);\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WebWorkerPlatformLocation.prototype.pushState = function (state, title, url) {\n            var fnArgs = [\n                new FnArg(state, 1 /* PRIMITIVE */),\n                new FnArg(title, 1 /* PRIMITIVE */),\n                new FnArg(url, 1 /* PRIMITIVE */),\n            ];\n            var args = new UiArguments('pushState', fnArgs);\n            this._broker.runOnService(args, null);\n        };\n        WebWorkerPlatformLocation.prototype.replaceState = function (state, title, url) {\n            var fnArgs = [\n                new FnArg(state, 1 /* PRIMITIVE */),\n                new FnArg(title, 1 /* PRIMITIVE */),\n                new FnArg(url, 1 /* PRIMITIVE */),\n            ];\n            var args = new UiArguments('replaceState', fnArgs);\n            this._broker.runOnService(args, null);\n        };\n        WebWorkerPlatformLocation.prototype.forward = function () {\n            var args = new UiArguments('forward');\n            this._broker.runOnService(args, null);\n        };\n        WebWorkerPlatformLocation.prototype.back = function () {\n            var args = new UiArguments('back');\n            this._broker.runOnService(args, null);\n        };\n        // History API isn't available on WebWorkers, therefore return undefined\n        WebWorkerPlatformLocation.prototype.getState = function () {\n            return undefined;\n        };\n        return WebWorkerPlatformLocation;\n    }(common.PlatformLocation));\n    WebWorkerPlatformLocation.decorators = [\n        { type: core.Injectable }\n    ];\n    WebWorkerPlatformLocation.ctorParameters = function () { return [\n        { type: ClientMessageBrokerFactory },\n        { type: MessageBus },\n        { type: Serializer }\n    ]; };\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * The {@link PlatformLocation} providers that should be added when the {@link Location} is used in\n     * a worker context.\n     *\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var WORKER_APP_LOCATION_PROVIDERS = [\n        { provide: common.PlatformLocation, useClass: WebWorkerPlatformLocation },\n        {\n            provide: core.APP_INITIALIZER,\n            useFactory: appInitFnFactory,\n            multi: true,\n            deps: [common.PlatformLocation, core.NgZone]\n        },\n        { provide: common.LOCATION_INITIALIZED, useFactory: locationInitialized, deps: [common.PlatformLocation] }\n    ];\n    function locationInitialized(platformLocation) {\n        return platformLocation.initialized;\n    }\n    function appInitFnFactory(platformLocation, zone) {\n        return function () { return zone.runGuarded(function () { return platformLocation.init(); }); };\n    }\n\n    var NamedEventEmitter = /** @class */ (function () {\n        function NamedEventEmitter() {\n        }\n        NamedEventEmitter.prototype.listen = function (eventName, callback) {\n            this._getListeners(eventName).push(callback);\n        };\n        NamedEventEmitter.prototype.unlisten = function (eventName, listener) {\n            var listeners = this._getListeners(eventName);\n            var index = listeners.indexOf(listener);\n            if (index > -1) {\n                listeners.splice(index, 1);\n            }\n        };\n        NamedEventEmitter.prototype.dispatchEvent = function (eventName, event) {\n            var listeners = this._getListeners(eventName);\n            for (var i = 0; i < listeners.length; i++) {\n                listeners[i](event);\n            }\n        };\n        NamedEventEmitter.prototype._getListeners = function (eventName) {\n            if (!this._listeners) {\n                this._listeners = new Map();\n            }\n            var listeners = this._listeners.get(eventName);\n            if (!listeners) {\n                listeners = [];\n                this._listeners.set(eventName, listeners);\n            }\n            return listeners;\n        };\n        return NamedEventEmitter;\n    }());\n    function eventNameWithTarget(target, eventName) {\n        return target + \":\" + eventName;\n    }\n    var WebWorkerRendererFactory2 = /** @class */ (function () {\n        function WebWorkerRendererFactory2(messageBrokerFactory, bus, _serializer, renderStore) {\n            var _this = this;\n            this._serializer = _serializer;\n            this.renderStore = renderStore;\n            this.globalEvents = new NamedEventEmitter();\n            this._messageBroker = messageBrokerFactory.createMessageBroker(RENDERER_2_CHANNEL);\n            bus.initChannel(EVENT_2_CHANNEL);\n            var source = bus.from(EVENT_2_CHANNEL);\n            source.subscribe({ next: function (message) { return _this._dispatchEvent(message); } });\n        }\n        WebWorkerRendererFactory2.prototype.createRenderer = function (element, type) {\n            var renderer = new WebWorkerRenderer2(this);\n            var id = this.renderStore.allocateId();\n            this.renderStore.store(renderer, id);\n            this.callUI('createRenderer', [\n                new FnArg(element, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(type, 0 /* RENDERER_TYPE_2 */),\n                new FnArg(renderer, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n            return renderer;\n        };\n        WebWorkerRendererFactory2.prototype.begin = function () { };\n        WebWorkerRendererFactory2.prototype.end = function () { };\n        WebWorkerRendererFactory2.prototype.callUI = function (fnName, fnArgs) {\n            var args = new UiArguments(fnName, fnArgs);\n            this._messageBroker.runOnService(args, null);\n        };\n        WebWorkerRendererFactory2.prototype.allocateNode = function () {\n            var result = new WebWorkerRenderNode();\n            var id = this.renderStore.allocateId();\n            this.renderStore.store(result, id);\n            return result;\n        };\n        WebWorkerRendererFactory2.prototype.freeNode = function (node) {\n            this.renderStore.remove(node);\n        };\n        WebWorkerRendererFactory2.prototype.allocateId = function () {\n            return this.renderStore.allocateId();\n        };\n        WebWorkerRendererFactory2.prototype._dispatchEvent = function (message) {\n            var element = this._serializer.deserialize(message['element'], 2 /* RENDER_STORE_OBJECT */);\n            var eventName = message['eventName'];\n            var target = message['eventTarget'];\n            var event = message['event'];\n            if (target) {\n                this.globalEvents.dispatchEvent(eventNameWithTarget(target, eventName), event);\n            }\n            else {\n                element.events.dispatchEvent(eventName, event);\n            }\n        };\n        return WebWorkerRendererFactory2;\n    }());\n    WebWorkerRendererFactory2.decorators = [\n        { type: core.Injectable }\n    ];\n    WebWorkerRendererFactory2.ctorParameters = function () { return [\n        { type: ClientMessageBrokerFactory },\n        { type: MessageBus },\n        { type: Serializer },\n        { type: RenderStore }\n    ]; };\n    var WebWorkerRenderer2 = /** @class */ (function () {\n        function WebWorkerRenderer2(_rendererFactory) {\n            this._rendererFactory = _rendererFactory;\n            this.data = Object.create(null);\n            this.asFnArg = new FnArg(this, 2 /* RENDER_STORE_OBJECT */);\n        }\n        WebWorkerRenderer2.prototype.destroy = function () {\n            this.callUIWithRenderer('destroy');\n        };\n        WebWorkerRenderer2.prototype.destroyNode = function (node) {\n            this.callUIWithRenderer('destroyNode', [new FnArg(node, 2 /* RENDER_STORE_OBJECT */)]);\n            this._rendererFactory.freeNode(node);\n        };\n        WebWorkerRenderer2.prototype.createElement = function (name, namespace) {\n            var node = this._rendererFactory.allocateNode();\n            this.callUIWithRenderer('createElement', [\n                new FnArg(name),\n                new FnArg(namespace),\n                new FnArg(node, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n            return node;\n        };\n        WebWorkerRenderer2.prototype.createComment = function (value) {\n            var node = this._rendererFactory.allocateNode();\n            this.callUIWithRenderer('createComment', [\n                new FnArg(value),\n                new FnArg(node, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n            return node;\n        };\n        WebWorkerRenderer2.prototype.createText = function (value) {\n            var node = this._rendererFactory.allocateNode();\n            this.callUIWithRenderer('createText', [\n                new FnArg(value),\n                new FnArg(node, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n            return node;\n        };\n        WebWorkerRenderer2.prototype.appendChild = function (parent, newChild) {\n            this.callUIWithRenderer('appendChild', [\n                new FnArg(parent, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(newChild, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {\n            if (!parent) {\n                return;\n            }\n            this.callUIWithRenderer('insertBefore', [\n                new FnArg(parent, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(newChild, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(refChild, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.removeChild = function (parent, oldChild) {\n            this.callUIWithRenderer('removeChild', [\n                new FnArg(parent, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(oldChild, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.selectRootElement = function (selectorOrNode) {\n            var node = this._rendererFactory.allocateNode();\n            this.callUIWithRenderer('selectRootElement', [\n                new FnArg(selectorOrNode),\n                new FnArg(node, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n            return node;\n        };\n        WebWorkerRenderer2.prototype.parentNode = function (node) {\n            var res = this._rendererFactory.allocateNode();\n            this.callUIWithRenderer('parentNode', [\n                new FnArg(node, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(res, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n            return res;\n        };\n        WebWorkerRenderer2.prototype.nextSibling = function (node) {\n            var res = this._rendererFactory.allocateNode();\n            this.callUIWithRenderer('nextSibling', [\n                new FnArg(node, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(res, 2 /* RENDER_STORE_OBJECT */),\n            ]);\n            return res;\n        };\n        WebWorkerRenderer2.prototype.setAttribute = function (el, name, value, namespace) {\n            this.callUIWithRenderer('setAttribute', [\n                new FnArg(el, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(name),\n                new FnArg(value),\n                new FnArg(namespace),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.removeAttribute = function (el, name, namespace) {\n            this.callUIWithRenderer('removeAttribute', [\n                new FnArg(el, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(name),\n                new FnArg(namespace),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.addClass = function (el, name) {\n            this.callUIWithRenderer('addClass', [\n                new FnArg(el, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(name),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.removeClass = function (el, name) {\n            this.callUIWithRenderer('removeClass', [\n                new FnArg(el, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(name),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.setStyle = function (el, style, value, flags) {\n            this.callUIWithRenderer('setStyle', [\n                new FnArg(el, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(style),\n                new FnArg(value),\n                new FnArg(flags),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.removeStyle = function (el, style, flags) {\n            this.callUIWithRenderer('removeStyle', [\n                new FnArg(el, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(style),\n                new FnArg(flags),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.setProperty = function (el, name, value) {\n            this.callUIWithRenderer('setProperty', [\n                new FnArg(el, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(name),\n                new FnArg(value),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.setValue = function (node, value) {\n            this.callUIWithRenderer('setValue', [\n                new FnArg(node, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(value),\n            ]);\n        };\n        WebWorkerRenderer2.prototype.listen = function (target, eventName, listener) {\n            var _this = this;\n            var unlistenId = this._rendererFactory.allocateId();\n            var _a = __read(typeof target === 'string' ? [null, target, target + \":\" + eventName] :\n                [target, null, null], 3), targetEl = _a[0], targetName = _a[1], fullName = _a[2];\n            if (fullName) {\n                this._rendererFactory.globalEvents.listen(fullName, listener);\n            }\n            else {\n                targetEl.events.listen(eventName, listener);\n            }\n            this.callUIWithRenderer('listen', [\n                new FnArg(targetEl, 2 /* RENDER_STORE_OBJECT */),\n                new FnArg(targetName),\n                new FnArg(eventName),\n                new FnArg(unlistenId),\n            ]);\n            return function () {\n                if (fullName) {\n                    _this._rendererFactory.globalEvents.unlisten(fullName, listener);\n                }\n                else {\n                    targetEl.events.unlisten(eventName, listener);\n                }\n                _this.callUIWithRenderer('unlisten', [new FnArg(unlistenId)]);\n            };\n        };\n        WebWorkerRenderer2.prototype.callUIWithRenderer = function (fnName, fnArgs) {\n            if (fnArgs === void 0) { fnArgs = []; }\n            // always pass the renderer as the first arg\n            this._rendererFactory.callUI(fnName, __spread([this.asFnArg], fnArgs));\n        };\n        return WebWorkerRenderer2;\n    }());\n    var WebWorkerRenderNode = /** @class */ (function () {\n        function WebWorkerRenderNode() {\n            this.events = new NamedEventEmitter();\n        }\n        return WebWorkerRenderNode;\n    }());\n\n    /**\n     * This adapter is required to log error messages.\n     *\n     * Note: other methods all throw as the DOM is not accessible directly in web worker context.\n     */\n    var WorkerDomAdapter = /** @class */ (function (_super) {\n        __extends(WorkerDomAdapter, _super);\n        function WorkerDomAdapter() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        WorkerDomAdapter.makeCurrent = function () {\n            common.ɵsetRootDomAdapter(new WorkerDomAdapter());\n        };\n        WorkerDomAdapter.prototype.log = function (error) {\n            // tslint:disable-next-line:no-console\n            console.log(error);\n        };\n        WorkerDomAdapter.prototype.logGroup = function (error) {\n            if (console.group) {\n                console.group(error);\n                if (console.error) {\n                    console.error(error);\n                }\n                else {\n                    // tslint:disable-next-line:no-console\n                    console.log(error);\n                }\n            }\n            else {\n                // tslint:disable-next-line:no-console\n                console.log(error);\n            }\n        };\n        WorkerDomAdapter.prototype.logGroupEnd = function () {\n            if (console.groupEnd) {\n                console.groupEnd();\n            }\n        };\n        WorkerDomAdapter.prototype.getProperty = function (el, name) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.onAndCancel = function (el, evt, listener) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.dispatchEvent = function (el, evt) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.remove = function (el) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.createElement = function (tagName, doc) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.createHtmlDocument = function () {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.getDefaultDocument = function () {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.isElementNode = function (node) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.isShadowRoot = function (node) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.supportsDOMEvents = function () {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.getGlobalEventTarget = function (doc, target) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.getHistory = function () {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.getLocation = function () {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.getBaseHref = function (doc) {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.resetBaseElement = function () {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.getUserAgent = function () {\n            return 'Fake user agent';\n        };\n        WorkerDomAdapter.prototype.performanceNow = function () {\n            throw 'not implemented';\n        };\n        WorkerDomAdapter.prototype.supportsCookies = function () {\n            return false;\n        };\n        WorkerDomAdapter.prototype.getCookie = function (name) {\n            throw 'not implemented';\n        };\n        return WorkerDomAdapter;\n    }(common.ɵDomAdapter));\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var ɵ0 = common.ɵPLATFORM_WORKER_APP_ID;\n    /**\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var platformWorkerApp = core.createPlatformFactory(core.platformCore, 'workerApp', [{ provide: core.PLATFORM_ID, useValue: ɵ0 }]);\n    function errorHandler() {\n        return new core.ErrorHandler();\n    }\n    var ɵ1 = function (message, transferrables) {\n        postMessage(message, transferrables);\n    };\n    // TODO(jteplitz602): remove this and compile with lib.webworker.d.ts (#3492)\n    var _postMessage = {\n        postMessage: ɵ1\n    };\n    function createMessageBus(zone) {\n        var sink = new PostMessageBusSink(_postMessage);\n        var source = new PostMessageBusSource();\n        var bus = new PostMessageBus(sink, source);\n        bus.attachToZone(zone);\n        return bus;\n    }\n    function setupWebWorker() {\n        WorkerDomAdapter.makeCurrent();\n    }\n    /**\n     * The ng module for the worker app side.\n     *\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    var WorkerAppModule = /** @class */ (function () {\n        function WorkerAppModule() {\n        }\n        return WorkerAppModule;\n    }());\n    WorkerAppModule.decorators = [\n        { type: core.NgModule, args: [{\n                    providers: [\n                        platformBrowser.ɵBROWSER_SANITIZATION_PROVIDERS,\n                        { provide: core.ɵINJECTOR_SCOPE, useValue: 'root' },\n                        Serializer,\n                        { provide: common.DOCUMENT, useValue: null },\n                        ClientMessageBrokerFactory,\n                        ServiceMessageBrokerFactory,\n                        WebWorkerRendererFactory2,\n                        { provide: core.RendererFactory2, useExisting: WebWorkerRendererFactory2 },\n                        { provide: ON_WEB_WORKER, useValue: true },\n                        RenderStore,\n                        { provide: core.ErrorHandler, useFactory: errorHandler, deps: [] },\n                        { provide: MessageBus, useFactory: createMessageBus, deps: [core.NgZone] },\n                        { provide: core.APP_INITIALIZER, useValue: setupWebWorker, multi: true },\n                        { provide: common.ViewportScroller, useClass: common.ɵNullViewportScroller, deps: [] },\n                    ],\n                    exports: [\n                        common.CommonModule,\n                        core.ApplicationModule,\n                    ]\n                },] }\n    ];\n\n    /**\n     * Bootstraps the worker ui.\n     *\n     * @publicApi\n     * @deprecated platform-webworker is deprecated in Angular and will be removed in a future version\n     *     of Angular\n     */\n    function bootstrapWorkerUi(workerScriptUri, customProviders) {\n        if (customProviders === void 0) { customProviders = []; }\n        // For now, just creates the worker ui platform...\n        var platform = platformWorkerUi(__spread([\n            { provide: WORKER_SCRIPT, useValue: workerScriptUri }\n        ], customProviders));\n        return Promise.resolve(platform);\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    // This file only reexports content of the `src` folder. Keep it that way.\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.ClientMessageBroker = ClientMessageBroker;\n    exports.ClientMessageBrokerFactory = ClientMessageBrokerFactory;\n    exports.FnArg = FnArg;\n    exports.MessageBus = MessageBus;\n    exports.ServiceMessageBroker = ServiceMessageBroker;\n    exports.ServiceMessageBrokerFactory = ServiceMessageBrokerFactory;\n    exports.UiArguments = UiArguments;\n    exports.VERSION = VERSION;\n    exports.WORKER_APP_LOCATION_PROVIDERS = WORKER_APP_LOCATION_PROVIDERS;\n    exports.WORKER_UI_LOCATION_PROVIDERS = WORKER_UI_LOCATION_PROVIDERS;\n    exports.WorkerAppModule = WorkerAppModule;\n    exports.bootstrapWorkerUi = bootstrapWorkerUi;\n    exports.platformWorkerApp = platformWorkerApp;\n    exports.platformWorkerUi = platformWorkerUi;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_a = Serializer;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_b = locationInitialized;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_c = appInitFnFactory;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_d = errorHandler;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_e = createMessageBus;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_f = setupWebWorker;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_g = _WORKER_UI_PLATFORM_PROVIDERS;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_h = RenderStore;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_i = WebWorkerPlatformLocation;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_j = WebWorkerRendererFactory2;\n    exports.ɵangular_packages_platform_webworker_platform_webworker_k = ON_WEB_WORKER;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=platform-webworker.umd.js.map\n"]}