{"version":3,"file":"platform-webworker.umd.js","sources":["../../../../../external/npm/node_modules/tslib/tslib.es6.js","../../../../../packages/platform-webworker/src/web_workers/shared/api.ts","../../../../../packages/platform-webworker/src/web_workers/shared/message_bus.ts","../../../../../packages/platform-webworker/src/web_workers/shared/render_store.ts","../../../../../packages/platform-webworker/src/web_workers/shared/serializer.ts","../../../../../packages/platform-webworker/src/web_workers/shared/client_message_broker.ts","../../../../../packages/platform-webworker/src/web_workers/shared/post_message_bus.ts","../../../../../packages/platform-webworker/src/web_workers/shared/service_message_broker.ts","../../../../../packages/platform-webworker/src/web_workers/shared/messaging_api.ts","../../../../../packages/platform-webworker/src/web_workers/ui/event_serializer.ts","../../../../../packages/platform-webworker/src/web_workers/ui/event_dispatcher.ts","../../../../../packages/platform-webworker/src/web_workers/ui/renderer.ts","../../../../../packages/platform-webworker/src/worker_render.ts","../../../../../packages/platform-webworker/src/version.ts","../../../../../packages/platform-webworker/src/web_workers/ui/platform_location.ts","../../../../../packages/platform-webworker/src/web_workers/ui/location_providers.ts","../../../../../packages/platform-webworker/src/web_workers/worker/platform_location.ts","../../../../../packages/platform-webworker/src/web_workers/worker/location_providers.ts","../../../../../packages/platform-webworker/src/web_workers/worker/renderer.ts","../../../../../packages/platform-webworker/src/web_workers/worker/worker_adapter.ts","../../../../../packages/platform-webworker/src/worker_app.ts","../../../../../packages/platform-webworker/src/platform-webworker.ts","../../../../../packages/platform-webworker/public_api.ts","../../../../../packages/platform-webworker/index.ts","../../../../../packages/platform-webworker/platform-webworker.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {InjectionToken} from '@angular/core';\n\nexport const ON_WEB_WORKER = new InjectionToken<boolean>('WebWorker.onWebWorker');\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EventEmitter, NgZone} from '@angular/core';\n\n\n\n/**\n * Message Bus is a low level API used to communicate between the UI and the background.\n * Communication is based on a channel abstraction. Messages published in a\n * given channel to one MessageBusSink are received on the same channel\n * by the corresponding MessageBusSource.\n *\n * @publicApi\n */\nexport abstract class MessageBus implements MessageBusSource, MessageBusSink {\n  /**\n   * Sets up a new channel on the MessageBus.\n   * MUST be called before calling from or to on the channel.\n   * If runInZone is true then the source will emit events inside the angular zone\n   * and the sink will buffer messages and send only once the zone exits.\n   * if runInZone is false then the source will emit events inside the global zone\n   * and the sink will send messages immediately.\n   */\n  abstract initChannel(channel: string, runInZone?: boolean): void;\n\n  /**\n   * Assigns this bus to the given zone.\n   * Any callbacks attached to channels where runInZone was set to true on initialization\n   * will be executed in the given zone.\n   */\n  abstract attachToZone(zone: NgZone): void;\n\n  /**\n   * Returns an {@link EventEmitter} that emits every time a message\n   * is received on the given channel.\n   */\n  abstract from(channel: string): EventEmitter<any>;\n\n\n  /**\n   * Returns an {@link EventEmitter} for the given channel\n   * To publish methods to that channel just call next on the returned emitter\n   */\n  abstract to(channel: string): EventEmitter<any>;\n}\n\n/**\n * @publicApi\n */\nexport interface MessageBusSource {\n  /**\n   * Sets up a new channel on the MessageBusSource.\n   * MUST be called before calling from on the channel.\n   * If runInZone is true then the source will emit events inside the angular zone.\n   * if runInZone is false then the source will emit events inside the global zone.\n   */\n  initChannel(channel: string, runInZone: boolean): void;\n\n  /**\n   * Assigns this source to the given zone.\n   * Any channels which are initialized with runInZone set to true will emit events that will be\n   * executed within the given zone.\n   */\n  attachToZone(zone: NgZone): void;\n\n  /**\n   * Returns an {@link EventEmitter} that emits every time a message\n   * is received on the given channel.\n   */\n  from(channel: string): EventEmitter<any>;\n}\n\n/**\n * @publicApi\n */\nexport interface MessageBusSink {\n  /**\n   * Sets up a new channel on the MessageBusSink.\n   * MUST be called before calling to on the channel.\n   * If runInZone is true the sink will buffer messages and send only once the zone exits.\n   * if runInZone is false the sink will send messages immediately.\n   */\n  initChannel(channel: string, runInZone: boolean): void;\n\n  /**\n   * Assigns this sink to the given zone.\n   * Any channels which are initialized with runInZone set to true will wait for the given zone\n   * to exit before sending messages.\n   */\n  attachToZone(zone: NgZone): void;\n\n  /**\n   * Returns an {@link EventEmitter} for the given channel\n   * To publish methods to that channel just call next on the returned emitter\n   */\n  to(channel: string): EventEmitter<any>;\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable} from '@angular/core';\n\n@Injectable()\nexport class RenderStore {\n  private _nextIndex = 0;\n  private _lookupById = new Map<number, any>();\n  private _lookupByObject = new Map<any, number>();\n\n  allocateId(): number { return this._nextIndex++; }\n\n  store(obj: any, id: number): void {\n    if (id == null) return;\n    this._lookupById.set(id, obj);\n    this._lookupByObject.set(obj, id);\n  }\n\n  remove(obj: any): void {\n    const index = this._lookupByObject.get(obj);\n    if (index != null) {\n      this._lookupByObject.delete(obj);\n      this._lookupById.delete(index);\n    }\n  }\n\n  deserialize(id: number): any {\n    return this._lookupById.has(id) ? this._lookupById.get(id) : null;\n  }\n\n  serialize(obj: any): number|null|undefined {\n    return obj == null ? null : this._lookupByObject.get(obj);\n  }\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, RenderComponentType, RendererType2, Type, Éµstringify as stringify} from '@angular/core';\nimport {RenderStore} from './render_store';\n\n\n/**\n * @publicApi\n */\nexport const enum SerializerTypes {\n  // RendererType2\n  RENDERER_TYPE_2,\n  // Primitive types\n  PRIMITIVE,\n  // An object stored in a RenderStore\n  RENDER_STORE_OBJECT,\n}\n\nexport class LocationType {\n  constructor(\n      public href: string, public protocol: string, public host: string, public hostname: string,\n      public port: string, public pathname: string|null, public search: string, public hash: string,\n      public origin: string) {}\n}\n\n@Injectable()\nexport class Serializer {\n  constructor(private _renderStore: RenderStore) {}\n\n  serialize(obj: any, type: Type<any>|SerializerTypes = SerializerTypes.PRIMITIVE): Object {\n    if (obj == null || type === SerializerTypes.PRIMITIVE) {\n      return obj;\n    }\n    if (Array.isArray(obj)) {\n      return obj.map(v => this.serialize(v, type));\n    }\n    if (type === SerializerTypes.RENDER_STORE_OBJECT) {\n      return this._renderStore.serialize(obj) !;\n    }\n    if (type === RenderComponentType) {\n      return this._serializeRenderComponentType(obj);\n    }\n    if (type === SerializerTypes.RENDERER_TYPE_2) {\n      return this._serializeRendererType2(obj);\n    }\n    if (type === LocationType) {\n      return this._serializeLocation(obj);\n    }\n    throw new Error(`No serializer for type ${stringify(type)}`);\n  }\n\n  deserialize(map: any, type: Type<any>|SerializerTypes = SerializerTypes.PRIMITIVE, data?: any):\n      any {\n    if (map == null || type === SerializerTypes.PRIMITIVE) {\n      return map;\n    }\n    if (Array.isArray(map)) {\n      return map.map(val => this.deserialize(val, type, data));\n    }\n    if (type === SerializerTypes.RENDER_STORE_OBJECT) {\n      return this._renderStore.deserialize(map);\n    }\n    if (type === RenderComponentType) {\n      return this._deserializeRenderComponentType(map);\n    }\n    if (type === SerializerTypes.RENDERER_TYPE_2) {\n      return this._deserializeRendererType2(map);\n    }\n    if (type === LocationType) {\n      return this._deserializeLocation(map);\n    }\n    throw new Error(`No deserializer for type ${stringify(type)}`);\n  }\n\n  private _serializeLocation(loc: LocationType): Object {\n    return {\n      'href': loc.href,\n      'protocol': loc.protocol,\n      'host': loc.host,\n      'hostname': loc.hostname,\n      'port': loc.port,\n      'pathname': loc.pathname,\n      'search': loc.search,\n      'hash': loc.hash,\n      'origin': loc.origin,\n    };\n  }\n\n  private _deserializeLocation(loc: {[key: string]: any}): LocationType {\n    return new LocationType(\n        loc['href'], loc['protocol'], loc['host'], loc['hostname'], loc['port'], loc['pathname'],\n        loc['search'], loc['hash'], loc['origin']);\n  }\n\n  private _serializeRenderComponentType(type: RenderComponentType): Object {\n    return {\n      'id': type.id,\n      'templateUrl': type.templateUrl,\n      'slotCount': type.slotCount,\n      'encapsulation': this.serialize(type.encapsulation),\n      'styles': this.serialize(type.styles),\n    };\n  }\n\n  private _deserializeRenderComponentType(props: {[key: string]: any}): RenderComponentType {\n    return new RenderComponentType(\n        props['id'], props['templateUrl'], props['slotCount'],\n        this.deserialize(props['encapsulation']), this.deserialize(props['styles']), {});\n  }\n\n  private _serializeRendererType2(type: RendererType2): {[key: string]: any} {\n    return {\n      'id': type.id,\n      'encapsulation': this.serialize(type.encapsulation),\n      'styles': this.serialize(type.styles),\n      'data': this.serialize(type.data),\n    };\n  }\n\n  private _deserializeRendererType2(props: {[key: string]: any}): RendererType2 {\n    return {\n      id: props['id'],\n      encapsulation: props['encapsulation'],\n      styles: this.deserialize(props['styles']),\n      data: this.deserialize(props['data'])\n    };\n  }\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EventEmitter, Injectable, Type, Éµstringify as stringify} from '@angular/core';\nimport {MessageBus} from './message_bus';\nimport {Serializer, SerializerTypes} from './serializer';\n\n/**\n * @publicApi\n */\n@Injectable()\nexport class ClientMessageBrokerFactory {\n  /** @internal */\n  _serializer: Serializer;\n\n  /** @internal */\n  constructor(private _messageBus: MessageBus, _serializer: Serializer) {\n    this._serializer = _serializer;\n  }\n\n  /**\n   * Initializes the given channel and attaches a new {@link ClientMessageBroker} to it.\n   */\n  createMessageBroker(channel: string, runInZone: boolean = true): ClientMessageBroker {\n    this._messageBus.initChannel(channel, runInZone);\n    return new ClientMessageBroker(this._messageBus, this._serializer, channel);\n  }\n}\n\ninterface PromiseCompleter {\n  resolve: (result: any) => void;\n  reject: (err: any) => void;\n}\n\n/**\n * @publicApi\n */\nexport class ClientMessageBroker {\n  private _pending = new Map<string, PromiseCompleter>();\n  private _sink: EventEmitter<any>;\n  /** @internal */\n  public _serializer: Serializer;\n\n  /** @internal */\n  constructor(messageBus: MessageBus, _serializer: Serializer, private channel: any) {\n    this._sink = messageBus.to(channel);\n    this._serializer = _serializer;\n    const source = messageBus.from(channel);\n\n    source.subscribe({next: (message: ResponseMessageData) => this._handleMessage(message)});\n  }\n\n  private _generateMessageId(name: string): string {\n    const time: string = stringify(new Date().getTime());\n    let iteration: number = 0;\n    let id: string = name + time + stringify(iteration);\n    while (this._pending.has(id)) {\n      id = `${name}${time}${iteration}`;\n      iteration++;\n    }\n    return id;\n  }\n\n  runOnService(args: UiArguments, returnType: Type<any>|SerializerTypes|null): Promise<any>|null {\n    const fnArgs: any[] = [];\n    if (args.args) {\n      args.args.forEach(argument => {\n        if (argument.type != null) {\n          fnArgs.push(this._serializer.serialize(argument.value, argument.type));\n        } else {\n          fnArgs.push(argument.value);\n        }\n      });\n    }\n\n    let promise: Promise<any>|null;\n    let id: string|null = null;\n    if (returnType != null) {\n      let completer: PromiseCompleter = undefined !;\n      promise = new Promise((resolve, reject) => { completer = {resolve, reject}; });\n      id = this._generateMessageId(args.method);\n      this._pending.set(id, completer);\n\n      promise.catch((err) => {\n        if (console && console.error) {\n          // tslint:disable-next-line:no-console\n          console.error(err);\n        }\n\n        completer.reject(err);\n      });\n\n      promise = promise.then(\n          (v: any) => this._serializer ? this._serializer.deserialize(v, returnType) : v);\n    } else {\n      promise = null;\n    }\n\n    const message: RequestMessageData = {\n      'method': args.method,\n      'args': fnArgs,\n    };\n    if (id != null) {\n      message['id'] = id;\n    }\n    this._sink.emit(message);\n\n    return promise;\n  }\n\n  private _handleMessage(message: ResponseMessageData): void {\n    if (message.type === 'result' || message.type === 'error') {\n      const id = message.id !;\n      if (this._pending.has(id)) {\n        if (message.type === 'result') {\n          this._pending.get(id) !.resolve(message.value);\n        } else {\n          this._pending.get(id) !.reject(message.value);\n        }\n        this._pending.delete(id);\n      }\n    }\n  }\n}\n\ninterface RequestMessageData {\n  method: string;\n  args?: any[];\n  id?: string;\n}\n\ninterface ResponseMessageData {\n  type: 'result'|'error';\n  value?: any;\n  id?: string;\n}\n\n/**\n * @publicApi\n */\nexport class FnArg {\n  constructor(\n      public value: any, public type: Type<any>|SerializerTypes = SerializerTypes.PRIMITIVE) {}\n}\n\n/**\n * @publicApi\n */\nexport class UiArguments {\n  constructor(public method: string, public args?: FnArg[]) {}\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EventEmitter, Injectable, NgZone} from '@angular/core';\n\nimport {MessageBus, MessageBusSink, MessageBusSource} from './message_bus';\n\n\n\n// TODO(jteplitz602): Replace this with the definition in lib.webworker.d.ts(#3492)\nexport interface PostMessageTarget {\n  postMessage: (message: any, transfer?: [ArrayBuffer]) => void;\n}\n\nexport class PostMessageBusSink implements MessageBusSink {\n  // TODO(issue/24571): remove '!'.\n  private _zone !: NgZone;\n  private _channels: {[key: string]: _Channel} = {};\n  private _messageBuffer: Array<Object> = [];\n\n  constructor(private _postMessageTarget: PostMessageTarget) {}\n\n  attachToZone(zone: NgZone): void {\n    this._zone = zone;\n    this._zone.runOutsideAngular(\n        () => { this._zone.onStable.subscribe({next: () => { this._handleOnEventDone(); }}); });\n  }\n\n  initChannel(channel: string, runInZone: boolean = true): void {\n    if (this._channels.hasOwnProperty(channel)) {\n      throw new Error(`${channel} has already been initialized`);\n    }\n\n    const emitter = new EventEmitter(false);\n    const channelInfo = new _Channel(emitter, runInZone);\n    this._channels[channel] = channelInfo;\n    emitter.subscribe((data: Object) => {\n      const message = {channel: channel, message: data};\n      if (runInZone) {\n        this._messageBuffer.push(message);\n      } else {\n        this._sendMessages([message]);\n      }\n    });\n  }\n\n  to(channel: string): EventEmitter<any> {\n    if (this._channels.hasOwnProperty(channel)) {\n      return this._channels[channel].emitter;\n    } else {\n      throw new Error(`${channel} is not set up. Did you forget to call initChannel?`);\n    }\n  }\n\n  private _handleOnEventDone() {\n    if (this._messageBuffer.length > 0) {\n      this._sendMessages(this._messageBuffer);\n      this._messageBuffer = [];\n    }\n  }\n\n  private _sendMessages(messages: Array<Object>) { this._postMessageTarget.postMessage(messages); }\n}\n\nexport class PostMessageBusSource implements MessageBusSource {\n  // TODO(issue/24571): remove '!'.\n  private _zone !: NgZone;\n  private _channels: {[key: string]: _Channel} = {};\n\n  constructor(eventTarget?: EventTarget) {\n    if (eventTarget) {\n      eventTarget.addEventListener('message', (ev: MessageEvent) => this._handleMessages(ev));\n    } else {\n      // if no eventTarget is given we assume we're in a WebWorker and listen on the global scope\n      const workerScope = <EventTarget>self;\n      workerScope.addEventListener('message', (ev: MessageEvent) => this._handleMessages(ev));\n    }\n  }\n\n  attachToZone(zone: NgZone) { this._zone = zone; }\n\n  initChannel(channel: string, runInZone: boolean = true) {\n    if (this._channels.hasOwnProperty(channel)) {\n      throw new Error(`${channel} has already been initialized`);\n    }\n\n    const emitter = new EventEmitter(false);\n    const channelInfo = new _Channel(emitter, runInZone);\n    this._channels[channel] = channelInfo;\n  }\n\n  from(channel: string): EventEmitter<any> {\n    if (this._channels.hasOwnProperty(channel)) {\n      return this._channels[channel].emitter;\n    } else {\n      throw new Error(`${channel} is not set up. Did you forget to call initChannel?`);\n    }\n  }\n\n  private _handleMessages(ev: MessageEvent): void {\n    const messages = ev.data;\n    for (let i = 0; i < messages.length; i++) {\n      this._handleMessage(messages[i]);\n    }\n  }\n\n  private _handleMessage(data: any): void {\n    const channel = data.channel;\n    if (this._channels.hasOwnProperty(channel)) {\n      const channelInfo = this._channels[channel];\n      if (channelInfo.runInZone) {\n        this._zone.run(() => { channelInfo.emitter.emit(data.message); });\n      } else {\n        channelInfo.emitter.emit(data.message);\n      }\n    }\n  }\n}\n\n/**\n * A TypeScript implementation of {@link MessageBus} for communicating via JavaScript's\n * postMessage API.\n */\n@Injectable()\nexport class PostMessageBus implements MessageBus {\n  constructor(public sink: PostMessageBusSink, public source: PostMessageBusSource) {}\n\n  attachToZone(zone: NgZone): void {\n    this.source.attachToZone(zone);\n    this.sink.attachToZone(zone);\n  }\n\n  initChannel(channel: string, runInZone: boolean = true): void {\n    this.source.initChannel(channel, runInZone);\n    this.sink.initChannel(channel, runInZone);\n  }\n\n  from(channel: string): EventEmitter<any> { return this.source.from(channel); }\n\n  to(channel: string): EventEmitter<any> { return this.sink.to(channel); }\n}\n\n/**\n * Helper class that wraps a channel's {@link EventEmitter} and\n * keeps track of if it should run in the zone.\n */\nclass _Channel {\n  constructor(public emitter: EventEmitter<any>, public runInZone: boolean) {}\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EventEmitter, Injectable, Type} from '@angular/core';\nimport {MessageBus} from '../shared/message_bus';\nimport {Serializer, SerializerTypes} from '../shared/serializer';\n\n\n/**\n * @publicApi\n */\n@Injectable()\nexport class ServiceMessageBrokerFactory {\n  /** @internal */\n  _serializer: Serializer;\n\n  /** @internal */\n  constructor(private _messageBus: MessageBus, _serializer: Serializer) {\n    this._serializer = _serializer;\n  }\n\n  /**\n   * Initializes the given channel and attaches a new {@link ServiceMessageBroker} to it.\n   */\n  createMessageBroker(channel: string, runInZone: boolean = true): ServiceMessageBroker {\n    this._messageBus.initChannel(channel, runInZone);\n    return new ServiceMessageBroker(this._messageBus, this._serializer, channel);\n  }\n}\n\n/**\n * Helper class for UIComponents that allows components to register methods.\n * If a registered method message is received from the broker on the worker,\n * the UIMessageBroker deserializes its arguments and calls the registered method.\n * If that method returns a promise, the UIMessageBroker returns the result to the worker.\n *\n * @publicApi\n */\nexport class ServiceMessageBroker {\n  private _sink: EventEmitter<any>;\n  private _methods = new Map<string, Function>();\n\n  /** @internal */\n  constructor(messageBus: MessageBus, private _serializer: Serializer, private channel: string) {\n    this._sink = messageBus.to(channel);\n    const source = messageBus.from(channel);\n    source.subscribe({next: (message: any) => this._handleMessage(message)});\n  }\n\n  registerMethod(\n      methodName: string, signature: Array<Type<any>|SerializerTypes>|null,\n      method: (..._: any[]) => Promise<any>| void, returnType?: Type<any>|SerializerTypes): void {\n    this._methods.set(methodName, (message: ReceivedMessage) => {\n      const serializedArgs = message.args;\n      const numArgs = signature ? signature.length : 0;\n      const deserializedArgs = new Array(numArgs);\n      for (let i = 0; i < numArgs; i++) {\n        const serializedArg = serializedArgs[i];\n        deserializedArgs[i] = this._serializer.deserialize(serializedArg, signature ![i]);\n      }\n\n      const promise = method(...deserializedArgs);\n      if (returnType && promise) {\n        this._wrapWebWorkerPromise(message.id, promise, returnType);\n      }\n    });\n  }\n\n  private _handleMessage(message: ReceivedMessage): void {\n    if (this._methods.has(message.method)) {\n      this._methods.get(message.method) !(message);\n    }\n  }\n\n  private _wrapWebWorkerPromise(id: string, promise: Promise<any>, type: Type<any>|SerializerTypes):\n      void {\n    promise.then((result: any) => {\n      this._sink.emit({\n        'type': 'result',\n        'value': this._serializer.serialize(result, type),\n        'id': id,\n      });\n    });\n  }\n}\n\n/**\n * @publicApi\n */\nexport interface ReceivedMessage {\n  method: string;\n  args: any[];\n  id: string;\n  type: string;\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * All channels used by angular's WebWorker components are listed here.\n * You should not use these channels in your application code.\n */\nexport const RENDERER_2_CHANNEL = 'v2.ng-Renderer';\nexport const EVENT_2_CHANNEL = 'v2.ng-Events';\n\nexport const ROUTER_CHANNEL = 'ng-Router';\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nconst MOUSE_EVENT_PROPERTIES = [\n  'altKey', 'button', 'clientX', 'clientY', 'metaKey', 'movementX', 'movementY', 'offsetX',\n  'offsetY', 'region', 'screenX', 'screenY', 'shiftKey'\n];\n\nconst KEYBOARD_EVENT_PROPERTIES = [\n  'altkey', 'charCode', 'code', 'ctrlKey', 'isComposing', 'key', 'keyCode', 'location', 'metaKey',\n  'repeat', 'shiftKey', 'which'\n];\n\nconst TRANSITION_EVENT_PROPERTIES = ['propertyName', 'elapsedTime', 'pseudoElement'];\n\nconst EVENT_PROPERTIES = ['type', 'bubbles', 'cancelable'];\n\nconst NODES_WITH_VALUE = new Set(\n    ['input', 'select', 'option', 'button', 'li', 'meter', 'progress', 'param', 'textarea']);\n\nexport function serializeGenericEvent(e: Event): {[key: string]: any} {\n  return serializeEvent(e, EVENT_PROPERTIES);\n}\n\n// TODO(jteplitz602): Allow users to specify the properties they need rather than always\n// adding value and files #3374\nexport function serializeEventWithTarget(e: Event): {[key: string]: any} {\n  const serializedEvent = serializeEvent(e, EVENT_PROPERTIES);\n  return addTarget(e, serializedEvent);\n}\n\nexport function serializeMouseEvent(e: MouseEvent): {[key: string]: any} {\n  return serializeEvent(e, MOUSE_EVENT_PROPERTIES);\n}\n\nexport function serializeKeyboardEvent(e: KeyboardEvent): {[key: string]: any} {\n  const serializedEvent = serializeEvent(e, KEYBOARD_EVENT_PROPERTIES);\n  return addTarget(e, serializedEvent);\n}\n\nexport function serializeTransitionEvent(e: TransitionEvent): {[key: string]: any} {\n  const serializedEvent = serializeEvent(e, TRANSITION_EVENT_PROPERTIES);\n  return addTarget(e, serializedEvent);\n}\n\n// TODO(jteplitz602): #3374. See above.\nfunction addTarget(e: Event, serializedEvent: {[key: string]: any}): {[key: string]: any} {\n  if (NODES_WITH_VALUE.has((<HTMLElement>e.target).tagName.toLowerCase())) {\n    const target = <HTMLInputElement>e.target;\n    serializedEvent['target'] = {'value': target.value};\n    if (target.files) {\n      serializedEvent['target']['files'] = target.files;\n    }\n  }\n  return serializedEvent;\n}\n\nfunction serializeEvent(e: any, properties: string[]): {[key: string]: any} {\n  const serialized: {[k: string]: any} = {};\n  for (let i = 0; i < properties.length; i++) {\n    const prop = properties[i];\n    serialized[prop] = e[prop];\n  }\n  return serialized;\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {EventEmitter} from '@angular/core';\nimport {Serializer, SerializerTypes} from '../shared/serializer';\n\nimport {serializeEventWithTarget, serializeGenericEvent, serializeKeyboardEvent, serializeMouseEvent, serializeTransitionEvent} from './event_serializer';\n\nexport class EventDispatcher {\n  constructor(private _sink: EventEmitter<any>, private _serializer: Serializer) {}\n\n  dispatchAnimationEvent(player: any, phaseName: string, element: any): boolean {\n    this._sink.emit({\n      'element': this._serializer.serialize(element, SerializerTypes.RENDER_STORE_OBJECT),\n      'animationPlayer': this._serializer.serialize(player, SerializerTypes.RENDER_STORE_OBJECT),\n      'phaseName': phaseName,\n    });\n    return true;\n  }\n\n  dispatchRenderEvent(element: any, eventTarget: string, eventName: string, event: any): boolean {\n    let serializedEvent: any;\n    // TODO (jteplitz602): support custom events #3350\n    switch (event.type) {\n      case 'click':\n      case 'mouseup':\n      case 'mousedown':\n      case 'dblclick':\n      case 'contextmenu':\n      case 'mouseenter':\n      case 'mouseleave':\n      case 'mousemove':\n      case 'mouseout':\n      case 'mouseover':\n      case 'show':\n        serializedEvent = serializeMouseEvent(event);\n        break;\n      case 'keydown':\n      case 'keypress':\n      case 'keyup':\n        serializedEvent = serializeKeyboardEvent(event);\n        break;\n      case 'input':\n      case 'change':\n      case 'blur':\n        serializedEvent = serializeEventWithTarget(event);\n        break;\n      case 'abort':\n      case 'afterprint':\n      case 'beforeprint':\n      case 'cached':\n      case 'canplay':\n      case 'canplaythrough':\n      case 'chargingchange':\n      case 'chargingtimechange':\n      case 'close':\n      case 'dischargingtimechange':\n      case 'DOMContentLoaded':\n      case 'downloading':\n      case 'durationchange':\n      case 'emptied':\n      case 'ended':\n      case 'error':\n      case 'fullscreenchange':\n      case 'fullscreenerror':\n      case 'invalid':\n      case 'languagechange':\n      case 'levelfchange':\n      case 'loadeddata':\n      case 'loadedmetadata':\n      case 'obsolete':\n      case 'offline':\n      case 'online':\n      case 'open':\n      case 'orientatoinchange':\n      case 'pause':\n      case 'pointerlockchange':\n      case 'pointerlockerror':\n      case 'play':\n      case 'playing':\n      case 'ratechange':\n      case 'readystatechange':\n      case 'reset':\n      case 'scroll':\n      case 'seeked':\n      case 'seeking':\n      case 'stalled':\n      case 'submit':\n      case 'success':\n      case 'suspend':\n      case 'timeupdate':\n      case 'updateready':\n      case 'visibilitychange':\n      case 'volumechange':\n      case 'waiting':\n        serializedEvent = serializeGenericEvent(event);\n        break;\n      case 'transitionend':\n        serializedEvent = serializeTransitionEvent(event);\n        break;\n      default:\n        throw new Error(eventName + ' not supported on WebWorkers');\n    }\n\n    this._sink.emit({\n      'element': this._serializer.serialize(element, SerializerTypes.RENDER_STORE_OBJECT),\n      'eventName': eventName,\n      'eventTarget': eventTarget,\n      'event': serializedEvent,\n    });\n\n    // TODO(kegluneq): Eventually, we want the user to indicate from the UI side whether the event\n    // should be canceled, but for now just call `preventDefault` on the original DOM event.\n    return false;\n  }\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, Renderer2, RendererFactory2, RendererStyleFlags2, RendererType2} from '@angular/core';\n\nimport {MessageBus} from '../shared/message_bus';\nimport {EVENT_2_CHANNEL, RENDERER_2_CHANNEL} from '../shared/messaging_api';\nimport {RenderStore} from '../shared/render_store';\nimport {Serializer, SerializerTypes} from '../shared/serializer';\nimport {ServiceMessageBroker, ServiceMessageBrokerFactory} from '../shared/service_message_broker';\nimport {EventDispatcher} from '../ui/event_dispatcher';\n\n@Injectable()\nexport class MessageBasedRenderer2 {\n  // TODO(issue/24571): remove '!'.\n  private _eventDispatcher !: EventDispatcher;\n\n  constructor(\n      private _brokerFactory: ServiceMessageBrokerFactory, private _bus: MessageBus,\n      private _serializer: Serializer, private _renderStore: RenderStore,\n      private _rendererFactory: RendererFactory2) {}\n\n  start(): void {\n    const broker = this._brokerFactory.createMessageBroker(RENDERER_2_CHANNEL);\n\n    this._bus.initChannel(EVENT_2_CHANNEL);\n    this._eventDispatcher = new EventDispatcher(this._bus.to(EVENT_2_CHANNEL), this._serializer);\n\n    const [RSO, P, CRT] = [\n      SerializerTypes.RENDER_STORE_OBJECT,\n      SerializerTypes.PRIMITIVE,\n      SerializerTypes.RENDERER_TYPE_2,\n    ];\n\n    const methods: any[][] = [\n      ['createRenderer', this.createRenderer, RSO, CRT, P],\n      ['createElement', this.createElement, RSO, P, P, P],\n      ['createComment', this.createComment, RSO, P, P], ['createText', this.createText, RSO, P, P],\n      ['appendChild', this.appendChild, RSO, RSO, RSO],\n      ['insertBefore', this.insertBefore, RSO, RSO, RSO, RSO],\n      ['removeChild', this.removeChild, RSO, RSO, RSO],\n      ['selectRootElement', this.selectRootElement, RSO, P, P],\n      ['parentNode', this.parentNode, RSO, RSO, P], ['nextSibling', this.nextSibling, RSO, RSO, P],\n      ['setAttribute', this.setAttribute, RSO, RSO, P, P, P],\n      ['removeAttribute', this.removeAttribute, RSO, RSO, P, P],\n      ['addClass', this.addClass, RSO, RSO, P], ['removeClass', this.removeClass, RSO, RSO, P],\n      ['setStyle', this.setStyle, RSO, RSO, P, P, P],\n      ['removeStyle', this.removeStyle, RSO, RSO, P, P],\n      ['setProperty', this.setProperty, RSO, RSO, P, P], ['setValue', this.setValue, RSO, RSO, P],\n      ['listen', this.listen, RSO, RSO, P, P, P], ['unlisten', this.unlisten, RSO, RSO],\n      ['destroy', this.destroy, RSO], ['destroyNode', this.destroyNode, RSO, P]\n\n    ];\n\n    methods.forEach(([name, method, ...argTypes]: any[]) => {\n      broker.registerMethod(name, argTypes, method.bind(this));\n    });\n  }\n\n  private destroy(r: Renderer2) { r.destroy(); }\n\n  private destroyNode(r: Renderer2, node: any) {\n    if (r.destroyNode) {\n      r.destroyNode(node);\n    }\n    this._renderStore.remove(node);\n  }\n\n  private createRenderer(el: any, type: RendererType2, id: number) {\n    this._renderStore.store(this._rendererFactory.createRenderer(el, type), id);\n  }\n\n  private createElement(r: Renderer2, name: string, namespace: string, id: number) {\n    this._renderStore.store(r.createElement(name, namespace), id);\n  }\n\n  private createComment(r: Renderer2, value: string, id: number) {\n    this._renderStore.store(r.createComment(value), id);\n  }\n\n  private createText(r: Renderer2, value: string, id: number) {\n    this._renderStore.store(r.createText(value), id);\n  }\n\n  private appendChild(r: Renderer2, parent: any, child: any) { r.appendChild(parent, child); }\n\n  private insertBefore(r: Renderer2, parent: any, child: any, ref: any) {\n    r.insertBefore(parent, child, ref);\n  }\n\n  private removeChild(r: Renderer2, parent: any, child: any) { r.removeChild(parent, child); }\n\n  private selectRootElement(r: Renderer2, selector: string, id: number) {\n    this._renderStore.store(r.selectRootElement(selector), id);\n  }\n\n  private parentNode(r: Renderer2, node: any, id: number) {\n    this._renderStore.store(r.parentNode(node), id);\n  }\n\n  private nextSibling(r: Renderer2, node: any, id: number) {\n    this._renderStore.store(r.nextSibling(node), id);\n  }\n\n  private setAttribute(r: Renderer2, el: any, name: string, value: string, namespace: string) {\n    r.setAttribute(el, name, value, namespace);\n  }\n\n  private removeAttribute(r: Renderer2, el: any, name: string, namespace: string) {\n    r.removeAttribute(el, name, namespace);\n  }\n\n  private addClass(r: Renderer2, el: any, name: string) { r.addClass(el, name); }\n\n  private removeClass(r: Renderer2, el: any, name: string) { r.removeClass(el, name); }\n\n  private setStyle(r: Renderer2, el: any, style: string, value: any, flags: RendererStyleFlags2) {\n    r.setStyle(el, style, value, flags);\n  }\n\n  private removeStyle(r: Renderer2, el: any, style: string, flags: RendererStyleFlags2) {\n    r.removeStyle(el, style, flags);\n  }\n\n  private setProperty(r: Renderer2, el: any, name: string, value: any) {\n    r.setProperty(el, name, value);\n  }\n\n  private setValue(r: Renderer2, node: any, value: string) { r.setValue(node, value); }\n\n  private listen(r: Renderer2, el: any, elName: string, eventName: string, unlistenId: number) {\n    const listener = (event: any) => {\n      return this._eventDispatcher.dispatchRenderEvent(el, elName, eventName, event);\n    };\n\n    const unlisten = r.listen(el || elName, eventName, listener);\n    this._renderStore.store(unlisten, unlistenId);\n  }\n\n  private unlisten(r: Renderer2, unlisten: () => boolean) { unlisten(); }\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT, ÉµPLATFORM_WORKER_UI_ID as PLATFORM_WORKER_UI_ID} from '@angular/common';\nimport {ErrorHandler, Injectable, InjectionToken, Injector, NgZone, PLATFORM_ID, PLATFORM_INITIALIZER, PlatformRef, RendererFactory2, StaticProvider, Testability, createPlatformFactory, isDevMode, platformCore, ÉµAPP_ID_RANDOM_PROVIDER as APP_ID_RANDOM_PROVIDER} from '@angular/core';\nimport {EVENT_MANAGER_PLUGINS, EventManager, HAMMER_GESTURE_CONFIG, HammerGestureConfig, ÉµBROWSER_SANITIZATION_PROVIDERS as BROWSER_SANITIZATION_PROVIDERS, ÉµBrowserDomAdapter as BrowserDomAdapter, ÉµBrowserGetTestability as BrowserGetTestability, ÉµDomEventsPlugin as DomEventsPlugin, ÉµDomRendererFactory2 as DomRendererFactory2, ÉµDomSharedStylesHost as DomSharedStylesHost, ÉµHammerGesturesPlugin as HammerGesturesPlugin, ÉµKeyEventsPlugin as KeyEventsPlugin, ÉµSharedStylesHost as SharedStylesHost} from '@angular/platform-browser';\n\nimport {ON_WEB_WORKER} from './web_workers/shared/api';\nimport {ClientMessageBrokerFactory} from './web_workers/shared/client_message_broker';\nimport {MessageBus} from './web_workers/shared/message_bus';\nimport {PostMessageBus, PostMessageBusSink, PostMessageBusSource} from './web_workers/shared/post_message_bus';\nimport {RenderStore} from './web_workers/shared/render_store';\nimport {Serializer} from './web_workers/shared/serializer';\nimport {ServiceMessageBrokerFactory} from './web_workers/shared/service_message_broker';\nimport {MessageBasedRenderer2} from './web_workers/ui/renderer';\n\n\n\n/**\n * Wrapper class that exposes the Worker\n * and underlying {@link MessageBus} for lower level message passing.\n *\n * @publicApi\n */\n@Injectable()\nexport class WebWorkerInstance {\n  // TODO(issue/24571): remove '!'.\n  public worker !: Worker;\n  // TODO(issue/24571): remove '!'.\n  public bus !: MessageBus;\n\n  /** @internal */\n  public init(worker: Worker, bus: MessageBus) {\n    this.worker = worker;\n    this.bus = bus;\n  }\n}\n\n/**\n * @publicApi\n */\nexport const WORKER_SCRIPT = new InjectionToken<string>('WebWorkerScript');\n\n/**\n * A multi-provider used to automatically call the `start()` method after the service is\n * created.\n *\n * @publicApi\n */\nexport const WORKER_UI_STARTABLE_MESSAGING_SERVICE =\n    new InjectionToken<({start: () => void})[]>('WorkerRenderStartableMsgService');\n\nexport const _WORKER_UI_PLATFORM_PROVIDERS: StaticProvider[] = [\n  {provide: NgZone, useFactory: createNgZone, deps: []},\n  {\n    provide: MessageBasedRenderer2,\n    deps: [ServiceMessageBrokerFactory, MessageBus, Serializer, RenderStore, RendererFactory2]\n  },\n  {provide: WORKER_UI_STARTABLE_MESSAGING_SERVICE, useExisting: MessageBasedRenderer2, multi: true},\n  BROWSER_SANITIZATION_PROVIDERS,\n  {provide: ErrorHandler, useFactory: _exceptionHandler, deps: []},\n  {provide: DOCUMENT, useFactory: _document, deps: []},\n  // TODO(jteplitz602): Investigate if we definitely need EVENT_MANAGER on the render thread\n  // #5298\n  {\n    provide: EVENT_MANAGER_PLUGINS,\n    useClass: DomEventsPlugin,\n    deps: [DOCUMENT, NgZone],\n    multi: true\n  },\n  {provide: EVENT_MANAGER_PLUGINS, useClass: KeyEventsPlugin, deps: [DOCUMENT], multi: true},\n  {\n    provide: EVENT_MANAGER_PLUGINS,\n    useClass: HammerGesturesPlugin,\n    deps: [DOCUMENT, HAMMER_GESTURE_CONFIG],\n    multi: true\n  },\n  {provide: HAMMER_GESTURE_CONFIG, useClass: HammerGestureConfig, deps: []},\n  APP_ID_RANDOM_PROVIDER,\n  {provide: DomRendererFactory2, deps: [EventManager, DomSharedStylesHost]},\n  {provide: RendererFactory2, useExisting: DomRendererFactory2},\n  {provide: SharedStylesHost, useExisting: DomSharedStylesHost},\n  {\n    provide: ServiceMessageBrokerFactory,\n    useClass: ServiceMessageBrokerFactory,\n    deps: [MessageBus, Serializer]\n  },\n  {\n    provide: ClientMessageBrokerFactory,\n    useClass: ClientMessageBrokerFactory,\n    deps: [MessageBus, Serializer]\n  },\n  {provide: Serializer, deps: [RenderStore]},\n  {provide: ON_WEB_WORKER, useValue: false},\n  {provide: RenderStore, deps: []},\n  {provide: DomSharedStylesHost, deps: [DOCUMENT]},\n  {provide: Testability, deps: [NgZone]},\n  {provide: EventManager, deps: [EVENT_MANAGER_PLUGINS, NgZone]},\n  {provide: WebWorkerInstance, deps: []},\n  {\n    provide: PLATFORM_INITIALIZER,\n    useFactory: initWebWorkerRenderPlatform,\n    multi: true,\n    deps: [Injector]\n  },\n  {provide: PLATFORM_ID, useValue: PLATFORM_WORKER_UI_ID},\n  {provide: MessageBus, useFactory: messageBusFactory, deps: [WebWorkerInstance]},\n];\n\nfunction initializeGenericWorkerRenderer(injector: Injector) {\n  const bus = injector.get(MessageBus);\n  const zone = injector.get<NgZone>(NgZone);\n  bus.attachToZone(zone);\n\n  // initialize message services after the bus has been created\n  const services = injector.get(WORKER_UI_STARTABLE_MESSAGING_SERVICE);\n  zone.runGuarded(() => { services.forEach((svc: any) => { svc.start(); }); });\n}\n\nfunction messageBusFactory(instance: WebWorkerInstance): MessageBus {\n  return instance.bus;\n}\n\nfunction initWebWorkerRenderPlatform(injector: Injector): () => void {\n  return () => {\n    BrowserDomAdapter.makeCurrent();\n    BrowserGetTestability.init();\n    let scriptUri: string;\n    try {\n      scriptUri = injector.get(WORKER_SCRIPT);\n    } catch {\n      throw new Error(\n          'You must provide your WebWorker\\'s initialization script with the WORKER_SCRIPT token');\n    }\n\n    const instance = injector.get(WebWorkerInstance);\n    spawnWebWorker(scriptUri, instance);\n\n    initializeGenericWorkerRenderer(injector);\n  };\n}\n\n/**\n * @publicApi\n */\nexport const platformWorkerUi =\n    createPlatformFactory(platformCore, 'workerUi', _WORKER_UI_PLATFORM_PROVIDERS);\n\nfunction _exceptionHandler(): ErrorHandler {\n  return new ErrorHandler();\n}\n\nfunction _document(): any {\n  return document;\n}\n\nfunction createNgZone(): NgZone {\n  return new NgZone({enableLongStackTrace: isDevMode()});\n}\n\n/**\n * Spawns a new class and initializes the WebWorkerInstance\n */\nfunction spawnWebWorker(uri: string, instance: WebWorkerInstance): void {\n  const webWorker: Worker = new Worker(uri);\n  const sink = new PostMessageBusSink(webWorker);\n  const source = new PostMessageBusSource(webWorker);\n  const bus = new PostMessageBus(sink, source);\n\n  instance.init(webWorker, bus);\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\n\nimport {Version} from '@angular/core';\n\n/**\n * @publicApi\n */\nexport const VERSION = new Version('8.0.0-rc.0+243.sha-0937062.with-local-changes');\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LocationChangeListener} from '@angular/common';\nimport {EventEmitter, Injectable} from '@angular/core';\nimport {ÉµBrowserPlatformLocation as BrowserPlatformLocation} from '@angular/platform-browser';\nimport {MessageBus} from '../shared/message_bus';\nimport {ROUTER_CHANNEL} from '../shared/messaging_api';\nimport {LocationType, Serializer, SerializerTypes} from '../shared/serializer';\nimport {ServiceMessageBroker, ServiceMessageBrokerFactory} from '../shared/service_message_broker';\n\n@Injectable()\nexport class MessageBasedPlatformLocation {\n  private _channelSink: EventEmitter<Object>;\n  private _broker: ServiceMessageBroker;\n\n  constructor(\n      private _brokerFactory: ServiceMessageBrokerFactory,\n      private _platformLocation: BrowserPlatformLocation, bus: MessageBus,\n      private _serializer: Serializer) {\n    this._platformLocation.onPopState(<LocationChangeListener>this._sendUrlChangeEvent.bind(this));\n    this._platformLocation.onHashChange(\n        <LocationChangeListener>this._sendUrlChangeEvent.bind(this));\n    this._broker = this._brokerFactory.createMessageBroker(ROUTER_CHANNEL);\n    this._channelSink = bus.to(ROUTER_CHANNEL);\n  }\n\n  start(): void {\n    const P = SerializerTypes.PRIMITIVE;\n\n    this._broker.registerMethod('getLocation', null, this._getLocation.bind(this), LocationType);\n    this._broker.registerMethod('setPathname', [P], this._setPathname.bind(this));\n    this._broker.registerMethod(\n        'pushState', [P, P, P], this._platformLocation.pushState.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'replaceState', [P, P, P],\n        this._platformLocation.replaceState.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'forward', null, this._platformLocation.forward.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'back', null, this._platformLocation.back.bind(this._platformLocation));\n  }\n\n  private _getLocation(): Promise<Location> {\n    return Promise.resolve(this._platformLocation.location);\n  }\n\n  private _sendUrlChangeEvent(e: Event): void {\n    this._channelSink.emit({\n      'event': {'type': e.type},\n      'location': this._serializer.serialize(this._platformLocation.location, LocationType),\n    });\n  }\n\n  private _setPathname(pathname: string): void { this._platformLocation.pathname = pathname; }\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT} from '@angular/common';\nimport {Injector, NgZone, PLATFORM_INITIALIZER, StaticProvider} from '@angular/core';\nimport {ÉµBrowserPlatformLocation as BrowserPlatformLocation} from '@angular/platform-browser';\n\nimport {MessageBus} from '../shared/message_bus';\nimport {Serializer} from '../shared/serializer';\nimport {ServiceMessageBrokerFactory} from '../shared/service_message_broker';\n\nimport {MessageBasedPlatformLocation} from './platform_location';\n\n\n\n/**\n * A list of {@link Provider}s. To use the router in a Worker enabled application you must\n * include these providers when setting up the render thread.\n * @publicApi\n */\nexport const WORKER_UI_LOCATION_PROVIDERS = <StaticProvider[]>[\n  {provide: MessageBasedPlatformLocation, deps: [ServiceMessageBrokerFactory,\n    BrowserPlatformLocation, MessageBus, Serializer]},\n  {provide: BrowserPlatformLocation, deps: [DOCUMENT]},\n  {provide: PLATFORM_INITIALIZER, useFactory: initUiLocation, multi: true, deps: [Injector]}\n];\n\nfunction initUiLocation(injector: Injector): () => void {\n  return () => {\n    const zone = injector.get<NgZone>(NgZone);\n\n    zone.runGuarded(() => injector.get(MessageBasedPlatformLocation).start());\n  };\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LocationChangeListener, PlatformLocation} from '@angular/common';\nimport {EventEmitter, Injectable} from '@angular/core';\nimport {ClientMessageBroker, ClientMessageBrokerFactory, FnArg, UiArguments} from '../shared/client_message_broker';\nimport {MessageBus} from '../shared/message_bus';\nimport {ROUTER_CHANNEL} from '../shared/messaging_api';\nimport {LocationType, Serializer, SerializerTypes} from '../shared/serializer';\n\n@Injectable()\nexport class WebWorkerPlatformLocation extends PlatformLocation {\n  private _broker: ClientMessageBroker;\n  private _popStateListeners: Array<Function> = [];\n  private _hashChangeListeners: Array<Function> = [];\n  private _location: LocationType = null !;\n  private _channelSource: EventEmitter<Object>;\n  public initialized: Promise<any>;\n  // TODO(issue/24571): remove '!'.\n  private initializedResolve !: () => void;\n\n  constructor(\n      brokerFactory: ClientMessageBrokerFactory, bus: MessageBus, private _serializer: Serializer) {\n    super();\n    this._broker = brokerFactory.createMessageBroker(ROUTER_CHANNEL);\n    this._channelSource = bus.from(ROUTER_CHANNEL);\n\n    this._channelSource.subscribe({\n      next: (msg: {[key: string]: any}) => {\n        let listeners: Array<Function>|null = null;\n        if (msg.hasOwnProperty('event')) {\n          const type: string = msg['event']['type'];\n          if (type === 'popstate') {\n            listeners = this._popStateListeners;\n          } else if (type === 'hashchange') {\n            listeners = this._hashChangeListeners;\n          }\n\n          if (listeners) {\n            // There was a popState or hashChange event, so the location object thas been updated\n            this._location = this._serializer.deserialize(msg['location'], LocationType);\n            listeners.forEach((fn: Function) => fn(msg['event']));\n          }\n        }\n      }\n    });\n    this.initialized = new Promise(res => this.initializedResolve = res);\n  }\n\n  /** @internal **/\n  init(): Promise<boolean> {\n    const args: UiArguments = new UiArguments('getLocation');\n\n    return this._broker.runOnService(args, LocationType) !.then(\n        (val: LocationType) => {\n          this._location = val;\n          this.initializedResolve();\n          return true;\n        },\n        err => { throw new Error(err); });\n  }\n\n  getBaseHrefFromDOM(): string {\n    throw new Error(\n        'Attempt to get base href from DOM from WebWorker. You must either provide a value for the APP_BASE_HREF token through DI or use the hash location strategy.');\n  }\n\n  onPopState(fn: LocationChangeListener): void { this._popStateListeners.push(fn); }\n\n  onHashChange(fn: LocationChangeListener): void { this._hashChangeListeners.push(fn); }\n\n  get href(): string { return this._location ? this._location.href ! : '<unknown>'; }\n\n  get hostname(): string { return this._location ? this._location.host ! : '<unknown>'; }\n\n  get port(): string { return this._location ? this._location.port ! : '<unknown>'; }\n\n  get protocol(): string { return this._location ? this._location.protocol ! : '<unknown>'; }\n\n  get search(): string { return this._location ? this._location.search : '<unknown>'; }\n\n  get hash(): string { return this._location ? this._location.hash : '<unknown>'; }\n\n  set pathname(newPath: string) {\n    if (this._location === null) {\n      throw new Error('Attempt to set pathname before value is obtained from UI');\n    }\n\n    this._location.pathname = newPath;\n\n    const fnArgs = [new FnArg(newPath, SerializerTypes.PRIMITIVE)];\n    const args = new UiArguments('setPathname', fnArgs);\n    this._broker.runOnService(args, null);\n  }\n\n  pushState(state: any, title: string, url: string): void {\n    const fnArgs = [\n      new FnArg(state, SerializerTypes.PRIMITIVE),\n      new FnArg(title, SerializerTypes.PRIMITIVE),\n      new FnArg(url, SerializerTypes.PRIMITIVE),\n    ];\n    const args = new UiArguments('pushState', fnArgs);\n    this._broker.runOnService(args, null);\n  }\n\n  replaceState(state: any, title: string, url: string): void {\n    const fnArgs = [\n      new FnArg(state, SerializerTypes.PRIMITIVE),\n      new FnArg(title, SerializerTypes.PRIMITIVE),\n      new FnArg(url, SerializerTypes.PRIMITIVE),\n    ];\n    const args = new UiArguments('replaceState', fnArgs);\n    this._broker.runOnService(args, null);\n  }\n\n  forward(): void {\n    const args = new UiArguments('forward');\n    this._broker.runOnService(args, null);\n  }\n\n  back(): void {\n    const args = new UiArguments('back');\n    this._broker.runOnService(args, null);\n  }\n\n  // History API isn't available on WebWorkers, therefore return undefined\n  getState(): unknown { return undefined; }\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LOCATION_INITIALIZED, PlatformLocation} from '@angular/common';\nimport {APP_INITIALIZER, InjectionToken, NgZone} from '@angular/core';\n\nimport {WebWorkerPlatformLocation} from './platform_location';\n\n\n/**\n * The {@link PlatformLocation} providers that should be added when the {@link Location} is used in\n * a worker context.\n *\n * @publicApi\n */\nexport const WORKER_APP_LOCATION_PROVIDERS = [\n  {provide: PlatformLocation, useClass: WebWorkerPlatformLocation}, {\n    provide: APP_INITIALIZER,\n    useFactory: appInitFnFactory,\n    multi: true,\n    deps: [PlatformLocation, NgZone]\n  },\n  {provide: LOCATION_INITIALIZED, useFactory: locationInitialized, deps: [PlatformLocation]}\n];\n\nexport function locationInitialized(platformLocation: WebWorkerPlatformLocation) {\n  return platformLocation.initialized;\n}\n\nexport function appInitFnFactory(platformLocation: WebWorkerPlatformLocation, zone: NgZone): () =>\n    Promise<boolean> {\n  return () => zone.runGuarded(() => platformLocation.init());\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, Renderer2, RendererFactory2, RendererStyleFlags2, RendererType2} from '@angular/core';\n\nimport {ClientMessageBroker, ClientMessageBrokerFactory, FnArg, UiArguments} from '../shared/client_message_broker';\nimport {MessageBus} from '../shared/message_bus';\nimport {EVENT_2_CHANNEL, RENDERER_2_CHANNEL} from '../shared/messaging_api';\nimport {RenderStore} from '../shared/render_store';\nimport {Serializer, SerializerTypes} from '../shared/serializer';\n\nexport class NamedEventEmitter {\n  // TODO(issue/24571): remove '!'.\n  private _listeners !: Map<string, Function[]>;\n\n  listen(eventName: string, callback: Function) { this._getListeners(eventName).push(callback); }\n\n  unlisten(eventName: string, listener: Function) {\n    const listeners = this._getListeners(eventName);\n    const index = listeners.indexOf(listener);\n    if (index > -1) {\n      listeners.splice(index, 1);\n    }\n  }\n\n  dispatchEvent(eventName: string, event: any) {\n    const listeners = this._getListeners(eventName);\n    for (let i = 0; i < listeners.length; i++) {\n      listeners[i](event);\n    }\n  }\n\n  private _getListeners(eventName: string): Function[] {\n    if (!this._listeners) {\n      this._listeners = new Map<string, Function[]>();\n    }\n    let listeners = this._listeners.get(eventName);\n    if (!listeners) {\n      listeners = [];\n      this._listeners.set(eventName, listeners);\n    }\n    return listeners;\n  }\n}\n\n\nfunction eventNameWithTarget(target: string, eventName: string): string {\n  return `${target}:${eventName}`;\n}\n\n@Injectable()\nexport class WebWorkerRendererFactory2 implements RendererFactory2 {\n  globalEvents = new NamedEventEmitter();\n\n  private _messageBroker: ClientMessageBroker;\n\n  constructor(\n      messageBrokerFactory: ClientMessageBrokerFactory, bus: MessageBus,\n      private _serializer: Serializer, public renderStore: RenderStore) {\n    this._messageBroker = messageBrokerFactory.createMessageBroker(RENDERER_2_CHANNEL);\n    bus.initChannel(EVENT_2_CHANNEL);\n    const source = bus.from(EVENT_2_CHANNEL);\n    source.subscribe({next: (message: any) => this._dispatchEvent(message)});\n  }\n\n  createRenderer(element: any, type: RendererType2|null): Renderer2 {\n    const renderer = new WebWorkerRenderer2(this);\n\n    const id = this.renderStore.allocateId();\n    this.renderStore.store(renderer, id);\n    this.callUI('createRenderer', [\n      new FnArg(element, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(type, SerializerTypes.RENDERER_TYPE_2),\n      new FnArg(renderer, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n\n    return renderer;\n  }\n\n  begin() {}\n  end() {}\n\n  callUI(fnName: string, fnArgs: FnArg[]) {\n    const args = new UiArguments(fnName, fnArgs);\n    this._messageBroker.runOnService(args, null);\n  }\n\n  allocateNode(): WebWorkerRenderNode {\n    const result = new WebWorkerRenderNode();\n    const id = this.renderStore.allocateId();\n    this.renderStore.store(result, id);\n    return result;\n  }\n\n  freeNode(node: any) { this.renderStore.remove(node); }\n\n  allocateId(): number { return this.renderStore.allocateId(); }\n\n  private _dispatchEvent(message: {[key: string]: any}): void {\n    const element: WebWorkerRenderNode =\n        this._serializer.deserialize(message['element'], SerializerTypes.RENDER_STORE_OBJECT);\n\n    const eventName = message['eventName'];\n    const target = message['eventTarget'];\n    const event = message['event'];\n\n    if (target) {\n      this.globalEvents.dispatchEvent(eventNameWithTarget(target, eventName), event);\n    } else {\n      element.events.dispatchEvent(eventName, event);\n    }\n  }\n}\n\n\nexport class WebWorkerRenderer2 implements Renderer2 {\n  data: {[key: string]: any} = Object.create(null);\n\n  constructor(private _rendererFactory: WebWorkerRendererFactory2) {}\n\n  private asFnArg = new FnArg(this, SerializerTypes.RENDER_STORE_OBJECT);\n\n  destroy(): void { this.callUIWithRenderer('destroy'); }\n\n  destroyNode(node: any) {\n    this.callUIWithRenderer('destroyNode', [new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT)]);\n    this._rendererFactory.freeNode(node);\n  }\n\n  createElement(name: string, namespace?: string): any {\n    const node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('createElement', [\n      new FnArg(name),\n      new FnArg(namespace),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n\n  createComment(value: string): any {\n    const node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('createComment', [\n      new FnArg(value),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n\n  createText(value: string): any {\n    const node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('createText', [\n      new FnArg(value),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n\n  appendChild(parent: any, newChild: any): void {\n    this.callUIWithRenderer('appendChild', [\n      new FnArg(parent, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(newChild, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n  }\n\n  insertBefore(parent: any, newChild: any, refChild: any): void {\n    if (!parent) {\n      return;\n    }\n\n    this.callUIWithRenderer('insertBefore', [\n      new FnArg(parent, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(newChild, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(refChild, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n  }\n\n  removeChild(parent: any, oldChild: any): void {\n    this.callUIWithRenderer('removeChild', [\n      new FnArg(parent, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(oldChild, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n  }\n\n  selectRootElement(selectorOrNode: string|any): any {\n    const node = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('selectRootElement', [\n      new FnArg(selectorOrNode),\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return node;\n  }\n\n  parentNode(node: any): any {\n    const res = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('parentNode', [\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(res, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return res;\n  }\n\n  nextSibling(node: any): any {\n    const res = this._rendererFactory.allocateNode();\n    this.callUIWithRenderer('nextSibling', [\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(res, SerializerTypes.RENDER_STORE_OBJECT),\n    ]);\n    return res;\n  }\n\n  setAttribute(el: any, name: string, value: string, namespace?: string): void {\n    this.callUIWithRenderer('setAttribute', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n      new FnArg(value),\n      new FnArg(namespace),\n    ]);\n  }\n\n  removeAttribute(el: any, name: string, namespace?: string): void {\n    this.callUIWithRenderer('removeAttribute', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n      new FnArg(namespace),\n    ]);\n  }\n\n  addClass(el: any, name: string): void {\n    this.callUIWithRenderer('addClass', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n    ]);\n  }\n\n  removeClass(el: any, name: string): void {\n    this.callUIWithRenderer('removeClass', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n    ]);\n  }\n\n  setStyle(el: any, style: string, value: any, flags: RendererStyleFlags2): void {\n    this.callUIWithRenderer('setStyle', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(style),\n      new FnArg(value),\n      new FnArg(flags),\n    ]);\n  }\n\n  removeStyle(el: any, style: string, flags: RendererStyleFlags2): void {\n    this.callUIWithRenderer('removeStyle', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(style),\n      new FnArg(flags),\n    ]);\n  }\n\n  setProperty(el: any, name: string, value: any): void {\n    this.callUIWithRenderer('setProperty', [\n      new FnArg(el, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(name),\n      new FnArg(value),\n    ]);\n  }\n\n  setValue(node: any, value: string): void {\n    this.callUIWithRenderer('setValue', [\n      new FnArg(node, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(value),\n    ]);\n  }\n\n  listen(\n      target: 'window'|'document'|'body'|any, eventName: string,\n      listener: (event: any) => boolean): () => void {\n    const unlistenId = this._rendererFactory.allocateId();\n\n    const [targetEl, targetName, fullName]: [any, string | null, string | null] =\n        typeof target === 'string' ? [null, target, `${target}:${eventName}`] :\n                                     [target, null, null];\n\n    if (fullName) {\n      this._rendererFactory.globalEvents.listen(fullName, listener);\n    } else {\n      targetEl.events.listen(eventName, listener);\n    }\n\n    this.callUIWithRenderer('listen', [\n      new FnArg(targetEl, SerializerTypes.RENDER_STORE_OBJECT),\n      new FnArg(targetName),\n      new FnArg(eventName),\n      new FnArg(unlistenId),\n    ]);\n\n    return () => {\n      if (fullName) {\n        this._rendererFactory.globalEvents.unlisten(fullName, listener);\n      } else {\n        targetEl.events.unlisten(eventName, listener);\n      }\n      this.callUIWithRenderer('unlisten', [new FnArg(unlistenId)]);\n    };\n  }\n\n  private callUIWithRenderer(fnName: string, fnArgs: FnArg[] = []) {\n    // always pass the renderer as the first arg\n    this._rendererFactory.callUI(fnName, [this.asFnArg, ...fnArgs]);\n  }\n}\n\nexport class WebWorkerRenderNode { events = new NamedEventEmitter(); }\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ÉµDomAdapter as DomAdapter, ÉµsetRootDomAdapter as setRootDomAdapter} from '@angular/platform-browser';\n\n/**\n * This adapter is required to log error messages.\n *\n * Note: other methods all throw as the DOM is not accessible directly in web worker context.\n */\nexport class WorkerDomAdapter extends DomAdapter {\n  static makeCurrent() { setRootDomAdapter(new WorkerDomAdapter()); }\n\n  logError(error: any) {\n    if (console.error) {\n      console.error(error);\n    } else {\n      // tslint:disable-next-line:no-console\n      console.log(error);\n    }\n  }\n\n  log(error: any) {\n    // tslint:disable-next-line:no-console\n    console.log(error);\n  }\n\n  logGroup(error: any) {\n    if (console.group) {\n      console.group(error);\n      this.logError(error);\n    } else {\n      // tslint:disable-next-line:no-console\n      console.log(error);\n    }\n  }\n\n  logGroupEnd() {\n    if (console.groupEnd) {\n      console.groupEnd();\n    }\n  }\n\n  contains(nodeA: any, nodeB: any): boolean { throw 'not implemented'; }\n  hasProperty(element: any, name: string): boolean { throw 'not implemented'; }\n  setProperty(el: Element, name: string, value: any) { throw 'not implemented'; }\n  getProperty(el: Element, name: string): any { throw 'not implemented'; }\n  invoke(el: Element, methodName: string, args: any[]): any { throw 'not implemented'; }\n\n  get attrToPropMap(): {[key: string]: string} { throw 'not implemented'; }\n  set attrToPropMap(value: {[key: string]: string}) { throw 'not implemented'; }\n\n  parse(templateHtml: string) { throw 'not implemented'; }\n  querySelector(el: any, selector: string): HTMLElement { throw 'not implemented'; }\n  querySelectorAll(el: any, selector: string): any[] { throw 'not implemented'; }\n  on(el: any, evt: any, listener: any) { throw 'not implemented'; }\n  onAndCancel(el: any, evt: any, listener: any): Function { throw 'not implemented'; }\n  dispatchEvent(el: any, evt: any) { throw 'not implemented'; }\n  createMouseEvent(eventType: any): any { throw 'not implemented'; }\n  createEvent(eventType: string): any { throw 'not implemented'; }\n  preventDefault(evt: any) { throw 'not implemented'; }\n  isPrevented(evt: any): boolean { throw 'not implemented'; }\n  getInnerHTML(el: any): string { throw 'not implemented'; }\n  getTemplateContent(el: any): any { throw 'not implemented'; }\n  getOuterHTML(el: any): string { throw 'not implemented'; }\n  nodeName(node: any): string { throw 'not implemented'; }\n  nodeValue(node: any): string { throw 'not implemented'; }\n  type(node: any): string { throw 'not implemented'; }\n  content(node: any): any { throw 'not implemented'; }\n  firstChild(el: any): Node { throw 'not implemented'; }\n  nextSibling(el: any): Node { throw 'not implemented'; }\n  parentElement(el: any): Node { throw 'not implemented'; }\n  childNodes(el: any): Node[] { throw 'not implemented'; }\n  childNodesAsList(el: any): Node[] { throw 'not implemented'; }\n  clearNodes(el: any) { throw 'not implemented'; }\n  appendChild(el: any, node: any) { throw 'not implemented'; }\n  removeChild(el: any, node: any) { throw 'not implemented'; }\n  replaceChild(el: any, newNode: any, oldNode: any) { throw 'not implemented'; }\n  remove(el: any): Node { throw 'not implemented'; }\n  insertBefore(parent: any, el: any, node: any) { throw 'not implemented'; }\n  insertAllBefore(parent: any, el: any, nodes: any) { throw 'not implemented'; }\n  insertAfter(parent: any, el: any, node: any) { throw 'not implemented'; }\n  setInnerHTML(el: any, value: any) { throw 'not implemented'; }\n  getText(el: any): string { throw 'not implemented'; }\n  setText(el: any, value: string) { throw 'not implemented'; }\n  getValue(el: any): string { throw 'not implemented'; }\n  setValue(el: any, value: string) { throw 'not implemented'; }\n  getChecked(el: any): boolean { throw 'not implemented'; }\n  setChecked(el: any, value: boolean) { throw 'not implemented'; }\n  createComment(text: string): any { throw 'not implemented'; }\n  createTemplate(html: any): HTMLElement { throw 'not implemented'; }\n  createElement(tagName: any, doc?: any): HTMLElement { throw 'not implemented'; }\n  createElementNS(ns: string, tagName: string, doc?: any): Element { throw 'not implemented'; }\n  createTextNode(text: string, doc?: any): Text { throw 'not implemented'; }\n  createScriptTag(attrName: string, attrValue: string, doc?: any): HTMLElement {\n    throw 'not implemented';\n  }\n  createStyleElement(css: string, doc?: any): HTMLStyleElement { throw 'not implemented'; }\n  createShadowRoot(el: any): any { throw 'not implemented'; }\n  getShadowRoot(el: any): any { throw 'not implemented'; }\n  getHost(el: any): any { throw 'not implemented'; }\n  getDistributedNodes(el: any): Node[] { throw 'not implemented'; }\n  clone(node: Node): Node { throw 'not implemented'; }\n  getElementsByClassName(element: any, name: string): HTMLElement[] { throw 'not implemented'; }\n  getElementsByTagName(element: any, name: string): HTMLElement[] { throw 'not implemented'; }\n  classList(element: any): any[] { throw 'not implemented'; }\n  addClass(element: any, className: string) { throw 'not implemented'; }\n  removeClass(element: any, className: string) { throw 'not implemented'; }\n  hasClass(element: any, className: string): boolean { throw 'not implemented'; }\n  setStyle(element: any, styleName: string, styleValue: string) { throw 'not implemented'; }\n  removeStyle(element: any, styleName: string) { throw 'not implemented'; }\n  getStyle(element: any, styleName: string): string { throw 'not implemented'; }\n  hasStyle(element: any, styleName: string, styleValue?: string): boolean {\n    throw 'not implemented';\n  }\n  tagName(element: any): string { throw 'not implemented'; }\n  attributeMap(element: any): Map<string, string> { throw 'not implemented'; }\n  hasAttribute(element: any, attribute: string): boolean { throw 'not implemented'; }\n  hasAttributeNS(element: any, ns: string, attribute: string): boolean { throw 'not implemented'; }\n  getAttribute(element: any, attribute: string): string { throw 'not implemented'; }\n  getAttributeNS(element: any, ns: string, attribute: string): string { throw 'not implemented'; }\n  setAttribute(element: any, name: string, value: string) { throw 'not implemented'; }\n  setAttributeNS(element: any, ns: string, name: string, value: string) { throw 'not implemented'; }\n  removeAttribute(element: any, attribute: string) { throw 'not implemented'; }\n  removeAttributeNS(element: any, ns: string, attribute: string) { throw 'not implemented'; }\n  templateAwareRoot(el: any) { throw 'not implemented'; }\n  createHtmlDocument(): HTMLDocument { throw 'not implemented'; }\n  getDefaultDocument(): Document { throw 'not implemented'; }\n  getBoundingClientRect(el: any) { throw 'not implemented'; }\n  getTitle(doc: Document): string { throw 'not implemented'; }\n  setTitle(doc: Document, newTitle: string) { throw 'not implemented'; }\n  elementMatches(n: any, selector: string): boolean { throw 'not implemented'; }\n  isTemplateElement(el: any): boolean { throw 'not implemented'; }\n  isTextNode(node: any): boolean { throw 'not implemented'; }\n  isCommentNode(node: any): boolean { throw 'not implemented'; }\n  isElementNode(node: any): boolean { throw 'not implemented'; }\n  hasShadowRoot(node: any): boolean { throw 'not implemented'; }\n  isShadowRoot(node: any): boolean { throw 'not implemented'; }\n  importIntoDoc(node: Node): Node { throw 'not implemented'; }\n  adoptNode(node: Node): Node { throw 'not implemented'; }\n  getHref(element: any): string { throw 'not implemented'; }\n  getEventKey(event: any): string { throw 'not implemented'; }\n  resolveAndSetHref(element: any, baseUrl: string, href: string) { throw 'not implemented'; }\n  supportsDOMEvents(): boolean { throw 'not implemented'; }\n  supportsNativeShadowDOM(): boolean { throw 'not implemented'; }\n  getGlobalEventTarget(doc: Document, target: string): any { throw 'not implemented'; }\n  getHistory(): History { throw 'not implemented'; }\n  getLocation(): Location { throw 'not implemented'; }\n  getBaseHref(doc: Document): string { throw 'not implemented'; }\n  resetBaseElement(): void { throw 'not implemented'; }\n  getUserAgent(): string { return 'Fake user agent'; }\n  setData(element: any, name: string, value: string) { throw 'not implemented'; }\n  getComputedStyle(element: any): any { throw 'not implemented'; }\n  getData(element: any, name: string): string { throw 'not implemented'; }\n  performanceNow(): number { throw 'not implemented'; }\n  getAnimationPrefix(): string { throw 'not implemented'; }\n  getTransitionEnd(): string { throw 'not implemented'; }\n  supportsAnimation(): boolean { throw 'not implemented'; }\n  supportsWebAnimation(): boolean { throw 'not implemented'; }\n\n  supportsCookies(): boolean { return false; }\n  getCookie(name: string): string { throw 'not implemented'; }\n  setCookie(name: string, value: string) { throw 'not implemented'; }\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {CommonModule, DOCUMENT, ViewportScroller, ÉµNullViewportScroller as NullViewportScroller, ÉµPLATFORM_WORKER_APP_ID as PLATFORM_WORKER_APP_ID} from '@angular/common';\nimport {APP_INITIALIZER, ApplicationModule, ErrorHandler, NgModule, NgZone, PLATFORM_ID, PlatformRef, RendererFactory2, RootRenderer, StaticProvider, createPlatformFactory, platformCore, ÉµAPP_ROOT as APP_ROOT} from '@angular/core';\nimport {ÉµBROWSER_SANITIZATION_PROVIDERS as BROWSER_SANITIZATION_PROVIDERS} from '@angular/platform-browser';\n\nimport {ON_WEB_WORKER} from './web_workers/shared/api';\nimport {ClientMessageBrokerFactory} from './web_workers/shared/client_message_broker';\nimport {MessageBus} from './web_workers/shared/message_bus';\nimport {PostMessageBus, PostMessageBusSink, PostMessageBusSource} from './web_workers/shared/post_message_bus';\nimport {RenderStore} from './web_workers/shared/render_store';\nimport {Serializer} from './web_workers/shared/serializer';\nimport {ServiceMessageBrokerFactory} from './web_workers/shared/service_message_broker';\nimport {WebWorkerRendererFactory2} from './web_workers/worker/renderer';\nimport {WorkerDomAdapter} from './web_workers/worker/worker_adapter';\n\n\n\n/**\n * @publicApi\n */\nexport const platformWorkerApp = createPlatformFactory(\n    platformCore, 'workerApp', [{provide: PLATFORM_ID, useValue: PLATFORM_WORKER_APP_ID}]);\n\nexport function errorHandler(): ErrorHandler {\n  return new ErrorHandler();\n}\n\n\n// TODO(jteplitz602): remove this and compile with lib.webworker.d.ts (#3492)\nconst _postMessage = {\n  postMessage: (message: any, transferrables?: [ArrayBuffer]) => {\n    (<any>postMessage)(message, transferrables);\n  }\n};\n\nexport function createMessageBus(zone: NgZone): MessageBus {\n  const sink = new PostMessageBusSink(_postMessage);\n  const source = new PostMessageBusSource();\n  const bus = new PostMessageBus(sink, source);\n  bus.attachToZone(zone);\n  return bus;\n}\n\nexport function setupWebWorker(): void {\n  WorkerDomAdapter.makeCurrent();\n}\n\n/**\n * The ng module for the worker app side.\n *\n * @publicApi\n */\n@NgModule({\n  providers: [\n    BROWSER_SANITIZATION_PROVIDERS,\n    {provide: APP_ROOT, useValue: true},\n    Serializer,\n    {provide: DOCUMENT, useValue: null},\n    ClientMessageBrokerFactory,\n    ServiceMessageBrokerFactory,\n    WebWorkerRendererFactory2,\n    {provide: RendererFactory2, useExisting: WebWorkerRendererFactory2},\n    {provide: ON_WEB_WORKER, useValue: true},\n    RenderStore,\n    {provide: ErrorHandler, useFactory: errorHandler, deps: []},\n    {provide: MessageBus, useFactory: createMessageBus, deps: [NgZone]},\n    {provide: APP_INITIALIZER, useValue: setupWebWorker, multi: true},\n    {provide: ViewportScroller, useClass: NullViewportScroller, deps: []},\n  ],\n  exports: [\n    CommonModule,\n    ApplicationModule,\n  ]\n})\nexport class WorkerAppModule {\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {PlatformRef, StaticProvider} from '@angular/core';\n\nimport {WORKER_SCRIPT, platformWorkerUi} from './worker_render';\n\nexport {VERSION} from './version';\nexport {ClientMessageBroker, ClientMessageBrokerFactory, FnArg, UiArguments} from './web_workers/shared/client_message_broker';\nexport {MessageBus, MessageBusSink, MessageBusSource} from './web_workers/shared/message_bus';\nexport {SerializerTypes} from './web_workers/shared/serializer';\nexport {ReceivedMessage, ServiceMessageBroker, ServiceMessageBrokerFactory} from './web_workers/shared/service_message_broker';\nexport {WORKER_UI_LOCATION_PROVIDERS} from './web_workers/ui/location_providers';\nexport {WORKER_APP_LOCATION_PROVIDERS} from './web_workers/worker/location_providers';\nexport {WorkerAppModule, platformWorkerApp} from './worker_app';\nexport {platformWorkerUi} from './worker_render';\n\n/**\n * Bootstraps the worker ui.\n *\n * @publicApi\n */\nexport function bootstrapWorkerUi(\n    workerScriptUri: string, customProviders: StaticProvider[] = []): Promise<PlatformRef> {\n  // For now, just creates the worker ui platform...\n  const platform = platformWorkerUi([\n    {provide: WORKER_SCRIPT, useValue: workerScriptUri},\n    ...customProviders,\n  ]);\n\n  return Promise.resolve(platform);\n}\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\nexport * from './src/platform-webworker';\n// This file only reexports content of the `src` folder. Keep it that way.\n","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\nexport * from './public_api';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ON_WEB_WORKER as Éµangular_packages_platform_webworker_platform_webworker_k} from './src/web_workers/shared/api';\nexport {RenderStore as Éµangular_packages_platform_webworker_platform_webworker_h} from './src/web_workers/shared/render_store';\nexport {Serializer as Éµangular_packages_platform_webworker_platform_webworker_a} from './src/web_workers/shared/serializer';\nexport {appInitFnFactory as Éµangular_packages_platform_webworker_platform_webworker_c,locationInitialized as Éµangular_packages_platform_webworker_platform_webworker_b} from './src/web_workers/worker/location_providers';\nexport {WebWorkerPlatformLocation as Éµangular_packages_platform_webworker_platform_webworker_i} from './src/web_workers/worker/platform_location';\nexport {WebWorkerRendererFactory2 as Éµangular_packages_platform_webworker_platform_webworker_j} from './src/web_workers/worker/renderer';\nexport {createMessageBus as Éµangular_packages_platform_webworker_platform_webworker_e,errorHandler as Éµangular_packages_platform_webworker_platform_webworker_d,setupWebWorker as Éµangular_packages_platform_webworker_platform_webworker_f} from './src/worker_app';\nexport {_WORKER_UI_PLATFORM_PROVIDERS as Éµangular_packages_platform_webworker_platform_webworker_g} from './src/worker_render';"],"names":["InjectionToken","Injectable","RenderComponentType","stringify","EventEmitter","RendererFactory2","NgZone","BROWSER_SANITIZATION_PROVIDERS","ErrorHandler","DOCUMENT","EVENT_MANAGER_PLUGINS","DomEventsPlugin","KeyEventsPlugin","HammerGesturesPlugin","HAMMER_GESTURE_CONFIG","HammerGestureConfig","APP_ID_RANDOM_PROVIDER","DomRendererFactory2","EventManager","DomSharedStylesHost","SharedStylesHost","Testability","PLATFORM_INITIALIZER","Injector","PLATFORM_ID","PLATFORM_WORKER_UI_ID","BrowserDomAdapter","BrowserGetTestability","createPlatformFactory","platformCore","isDevMode","Version","BrowserPlatformLocation","tslib_1.__extends","PlatformLocation","APP_INITIALIZER","LOCATION_INITIALIZED","setRootDomAdapter","DomAdapter","PLATFORM_WORKER_APP_ID","NgModule","APP_ROOT","ViewportScroller","NullViewportScroller","CommonModule","ApplicationModule"],"mappings":";;;;;;;;;;;;IAAA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA,IAAI,aAAa,GAAG,SAAS,CAAC,EAAE,CAAC,EAAE;IACnC,IAAI,aAAa,GAAG,MAAM,CAAC,cAAc;IACzC,SAAS,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;IACpF,QAAQ,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACnF,IAAI,OAAO,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;;AAEF,IAAO,SAAS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE;IAChC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxB,IAAI,SAAS,EAAE,GAAG,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;IAC3C,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;AACD,AAqBA;AACA,IAAO,SAAS,UAAU,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;IAC1D,IAAI,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;IACjI,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,EAAE,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;IACnI,SAAS,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;IACtJ,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAClE,CAAC;AACD,AAIA;AACA,IAAO,SAAS,UAAU,CAAC,WAAW,EAAE,aAAa,EAAE;IACvD,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,EAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;IACnI,CAAC;AACD,AAoDA;AACA,IAAO,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;IAC7B,IAAI,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC/D,IAAI,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;IACrB,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;IACrC,IAAI,IAAI;IACR,QAAQ,OAAO,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACnF,KAAK;IACL,IAAI,OAAO,KAAK,EAAE,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE;IAC3C,YAAY;IACZ,QAAQ,IAAI;IACZ,YAAY,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC7D,SAAS;IACT,gBAAgB,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,EAAE;IACzC,KAAK;IACL,IAAI,OAAO,EAAE,CAAC;IACd,CAAC;;AAED,IAAO,SAAS,QAAQ,GAAG;IAC3B,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE;IACtD,QAAQ,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,IAAI,OAAO,EAAE,CAAC;IACd,CAAC;;IC1ID;;;;;;;AAQA,QAEa,aAAa,GAAG,IAAIA,mBAAc,CAAU,uBAAuB,CAAC;;ICVjF;;;;;;;IAYA;;;;;;;;AAQA;QAAA;SA8BC;QAAD,iBAAC;IAAD,CAAC;;IClDD;;;;;;;;QAUA;YAEU,eAAU,GAAG,CAAC,CAAC;YACf,gBAAW,GAAG,IAAI,GAAG,EAAe,CAAC;YACrC,oBAAe,GAAG,IAAI,GAAG,EAAe,CAAC;SAyBlD;QAvBC,gCAAU,GAAV,cAAuB,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE;QAElD,2BAAK,GAAL,UAAM,GAAQ,EAAE,EAAU;YACxB,IAAI,EAAE,IAAI,IAAI;gBAAE,OAAO;YACvB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;YAC9B,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;SACnC;QAED,4BAAM,GAAN,UAAO,GAAQ;YACb,IAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAC5C,IAAI,KAAK,IAAI,IAAI,EAAE;gBACjB,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACjC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aAChC;SACF;QAED,iCAAW,GAAX,UAAY,EAAU;YACpB,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;SACnE;QAED,+BAAS,GAAT,UAAU,GAAQ;YAChB,OAAO,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC3D;QA3BU,WAAW;YADvBC,eAAU,EAAE;WACA,WAAW,CA4BvB;QAAD,kBAAC;KA5BD;;ICXA;;;;;;;IAwBA;QACE,sBACW,IAAY,EAAS,QAAgB,EAAS,IAAY,EAAS,QAAgB,EACnF,IAAY,EAAS,QAAqB,EAAS,MAAc,EAAS,IAAY,EACtF,MAAc;YAFd,SAAI,GAAJ,IAAI,CAAQ;YAAS,aAAQ,GAAR,QAAQ,CAAQ;YAAS,SAAI,GAAJ,IAAI,CAAQ;YAAS,aAAQ,GAAR,QAAQ,CAAQ;YACnF,SAAI,GAAJ,IAAI,CAAQ;YAAS,aAAQ,GAAR,QAAQ,CAAa;YAAS,WAAM,GAAN,MAAM,CAAQ;YAAS,SAAI,GAAJ,IAAI,CAAQ;YACtF,WAAM,GAAN,MAAM,CAAQ;SAAI;QAC/B,mBAAC;IAAD,CAAC,IAAA;;QAIC,oBAAoB,YAAyB;YAAzB,iBAAY,GAAZ,YAAY,CAAa;SAAI;QAEjD,8BAAS,GAAT,UAAU,GAAQ,EAAE,IAA2D;YAA/E,iBAoBC;YApBmB,qBAAA,EAAA;YAClB,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,wBAAgC;gBACrD,OAAO,GAAG,CAAC;aACZ;YACD,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;gBACtB,OAAO,GAAG,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,GAAA,CAAC,CAAC;aAC9C;YACD,IAAI,IAAI,kCAA0C;gBAChD,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,CAAG,CAAC;aAC3C;YACD,IAAI,IAAI,KAAKC,wBAAmB,EAAE;gBAChC,OAAO,IAAI,CAAC,6BAA6B,CAAC,GAAG,CAAC,CAAC;aAChD;YACD,IAAI,IAAI,8BAAsC;gBAC5C,OAAO,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC;aAC1C;YACD,IAAI,IAAI,KAAK,YAAY,EAAE;gBACzB,OAAO,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;aACrC;YACD,MAAM,IAAI,KAAK,CAAC,4BAA0BC,eAAS,CAAC,IAAI,CAAG,CAAC,CAAC;SAC9D;QAED,gCAAW,GAAX,UAAY,GAAQ,EAAE,IAA2D,EAAE,IAAU;YAA7F,iBAqBC;YArBqB,qBAAA,EAAA;YAEpB,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,wBAAgC;gBACrD,OAAO,GAAG,CAAC;aACZ;YACD,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;gBACtB,OAAO,GAAG,CAAC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,GAAA,CAAC,CAAC;aAC1D;YACD,IAAI,IAAI,kCAA0C;gBAChD,OAAO,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;aAC3C;YACD,IAAI,IAAI,KAAKD,wBAAmB,EAAE;gBAChC,OAAO,IAAI,CAAC,+BAA+B,CAAC,GAAG,CAAC,CAAC;aAClD;YACD,IAAI,IAAI,8BAAsC;gBAC5C,OAAO,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC;aAC5C;YACD,IAAI,IAAI,KAAK,YAAY,EAAE;gBACzB,OAAO,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;aACvC;YACD,MAAM,IAAI,KAAK,CAAC,8BAA4BC,eAAS,CAAC,IAAI,CAAG,CAAC,CAAC;SAChE;QAEO,uCAAkB,GAA1B,UAA2B,GAAiB;YAC1C,OAAO;gBACL,MAAM,EAAE,GAAG,CAAC,IAAI;gBAChB,UAAU,EAAE,GAAG,CAAC,QAAQ;gBACxB,MAAM,EAAE,GAAG,CAAC,IAAI;gBAChB,UAAU,EAAE,GAAG,CAAC,QAAQ;gBACxB,MAAM,EAAE,GAAG,CAAC,IAAI;gBAChB,UAAU,EAAE,GAAG,CAAC,QAAQ;gBACxB,QAAQ,EAAE,GAAG,CAAC,MAAM;gBACpB,MAAM,EAAE,GAAG,CAAC,IAAI;gBAChB,QAAQ,EAAE,GAAG,CAAC,MAAM;aACrB,CAAC;SACH;QAEO,yCAAoB,GAA5B,UAA6B,GAAyB;YACpD,OAAO,IAAI,YAAY,CACnB,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,UAAU,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,UAAU,CAAC,EACxF,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;SAChD;QAEO,kDAA6B,GAArC,UAAsC,IAAyB;YAC7D,OAAO;gBACL,IAAI,EAAE,IAAI,CAAC,EAAE;gBACb,aAAa,EAAE,IAAI,CAAC,WAAW;gBAC/B,WAAW,EAAE,IAAI,CAAC,SAAS;gBAC3B,eAAe,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC;gBACnD,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC;aACtC,CAAC;SACH;QAEO,oDAA+B,GAAvC,UAAwC,KAA2B;YACjE,OAAO,IAAID,wBAAmB,CAC1B,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,aAAa,CAAC,EAAE,KAAK,CAAC,WAAW,CAAC,EACrD,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SACtF;QAEO,4CAAuB,GAA/B,UAAgC,IAAmB;YACjD,OAAO;gBACL,IAAI,EAAE,IAAI,CAAC,EAAE;gBACb,eAAe,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC;gBACnD,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC;gBACrC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;aAClC,CAAC;SACH;QAEO,8CAAyB,GAAjC,UAAkC,KAA2B;YAC3D,OAAO;gBACL,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC;gBACf,aAAa,EAAE,KAAK,CAAC,eAAe,CAAC;gBACrC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;gBACzC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;aACtC,CAAC;SACH;QApGU,UAAU;YADtBD,eAAU,EAAE;6CAEuB,WAAW;WADlC,UAAU,CAqGtB;QAAD,iBAAC;KArGD;;IChCA;;;;;;;IAYA;;;AAIA;;QAKE,oCAAoB,WAAuB,EAAE,WAAuB;YAAhD,gBAAW,GAAX,WAAW,CAAY;YACzC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;SAChC;;;;QAKD,wDAAmB,GAAnB,UAAoB,OAAe,EAAE,SAAyB;YAAzB,0BAAA,EAAA,gBAAyB;YAC5D,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;YACjD,OAAO,IAAI,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;SAC7E;QAfU,0BAA0B;YADtCA,eAAU,EAAE;6CAMsB,UAAU,EAAe,UAAU;WALzD,0BAA0B,CAgBtC;QAAD,iCAAC;KAhBD,IAgBC;IAOD;;;AAGA;;QAOE,6BAAY,UAAsB,EAAE,WAAuB,EAAU,OAAY;YAAjF,iBAMC;YANoE,YAAO,GAAP,OAAO,CAAK;YANzE,aAAQ,GAAG,IAAI,GAAG,EAA4B,CAAC;YAOrD,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;YACpC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,IAAM,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAExC,MAAM,CAAC,SAAS,CAAC,EAAC,IAAI,EAAE,UAAC,OAA4B,IAAK,OAAA,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAA,EAAC,CAAC,CAAC;SAC1F;QAEO,gDAAkB,GAA1B,UAA2B,IAAY;YACrC,IAAM,IAAI,GAAWE,eAAS,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC;YACrD,IAAI,SAAS,GAAW,CAAC,CAAC;YAC1B,IAAI,EAAE,GAAW,IAAI,GAAG,IAAI,GAAGA,eAAS,CAAC,SAAS,CAAC,CAAC;YACpD,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;gBAC5B,EAAE,GAAG,KAAG,IAAI,GAAG,IAAI,GAAG,SAAW,CAAC;gBAClC,SAAS,EAAE,CAAC;aACb;YACD,OAAO,EAAE,CAAC;SACX;QAED,0CAAY,GAAZ,UAAa,IAAiB,EAAE,UAA0C;YAA1E,iBA6CC;YA5CC,IAAM,MAAM,GAAU,EAAE,CAAC;YACzB,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,QAAQ;oBACxB,IAAI,QAAQ,CAAC,IAAI,IAAI,IAAI,EAAE;wBACzB,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;qBACxE;yBAAM;wBACL,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;qBAC7B;iBACF,CAAC,CAAC;aACJ;YAED,IAAI,OAA0B,CAAC;YAC/B,IAAI,EAAE,GAAgB,IAAI,CAAC;YAC3B,IAAI,UAAU,IAAI,IAAI,EAAE;gBACtB,IAAI,WAAS,GAAqB,SAAW,CAAC;gBAC9C,OAAO,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,IAAO,WAAS,GAAG,EAAC,OAAO,SAAA,EAAE,MAAM,QAAA,EAAC,CAAC,EAAE,CAAC,CAAC;gBAC/E,EAAE,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC1C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,EAAE,WAAS,CAAC,CAAC;gBAEjC,OAAO,CAAC,KAAK,CAAC,UAAC,GAAG;oBAChB,IAAI,OAAO,IAAI,OAAO,CAAC,KAAK,EAAE;;wBAE5B,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;qBACpB;oBAED,WAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;iBACvB,CAAC,CAAC;gBAEH,OAAO,GAAG,OAAO,CAAC,IAAI,CAClB,UAAC,CAAM,IAAK,OAAA,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,GAAA,CAAC,CAAC;aACrF;iBAAM;gBACL,OAAO,GAAG,IAAI,CAAC;aAChB;YAED,IAAM,OAAO,GAAuB;gBAClC,QAAQ,EAAE,IAAI,CAAC,MAAM;gBACrB,MAAM,EAAE,MAAM;aACf,CAAC;YACF,IAAI,EAAE,IAAI,IAAI,EAAE;gBACd,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;aACpB;YACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAEzB,OAAO,OAAO,CAAC;SAChB;QAEO,4CAAc,GAAtB,UAAuB,OAA4B;YACjD,IAAI,OAAO,CAAC,IAAI,KAAK,QAAQ,IAAI,OAAO,CAAC,IAAI,KAAK,OAAO,EAAE;gBACzD,IAAM,EAAE,GAAG,OAAO,CAAC,EAAI,CAAC;gBACxB,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;oBACzB,IAAI,OAAO,CAAC,IAAI,KAAK,QAAQ,EAAE;wBAC7B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAG,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;qBAChD;yBAAM;wBACL,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAG,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;qBAC/C;oBACD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;iBAC1B;aACF;SACF;QACH,0BAAC;IAAD,CAAC,IAAA;IAcD;;;AAGA;QACE,eACW,KAAU,EAAS,IAA2D;YAA3D,qBAAA,EAAA;YAAnB,UAAK,GAAL,KAAK,CAAK;YAAS,SAAI,GAAJ,IAAI,CAAuD;SAAI;QAC/F,YAAC;IAAD,CAAC,IAAA;IAED;;;AAGA;QACE,qBAAmB,MAAc,EAAS,IAAc;YAArC,WAAM,GAAN,MAAM,CAAQ;YAAS,SAAI,GAAJ,IAAI,CAAU;SAAI;QAC9D,kBAAC;IAAD,CAAC;;IC3JD;;;;;;;IAmBA;QAME,4BAAoB,kBAAqC;YAArC,uBAAkB,GAAlB,kBAAkB,CAAmB;YAHjD,cAAS,GAA8B,EAAE,CAAC;YAC1C,mBAAc,GAAkB,EAAE,CAAC;SAEkB;QAE7D,yCAAY,GAAZ,UAAa,IAAY;YAAzB,iBAIC;YAHC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,KAAK,CAAC,iBAAiB,CACxB,cAAQ,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAC,IAAI,EAAE,cAAQ,KAAI,CAAC,kBAAkB,EAAE,CAAC,EAAE,EAAC,CAAC,CAAC,EAAE,CAAC,CAAC;SAC7F;QAED,wCAAW,GAAX,UAAY,OAAe,EAAE,SAAyB;YAAtD,iBAgBC;YAhB4B,0BAAA,EAAA,gBAAyB;YACpD,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAC1C,MAAM,IAAI,KAAK,CAAI,OAAO,kCAA+B,CAAC,CAAC;aAC5D;YAED,IAAM,OAAO,GAAG,IAAIC,iBAAY,CAAC,KAAK,CAAC,CAAC;YACxC,IAAM,WAAW,GAAG,IAAI,QAAQ,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;YACrD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,WAAW,CAAC;YACtC,OAAO,CAAC,SAAS,CAAC,UAAC,IAAY;gBAC7B,IAAM,OAAO,GAAG,EAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC;gBAClD,IAAI,SAAS,EAAE;oBACb,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACnC;qBAAM;oBACL,KAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;iBAC/B;aACF,CAAC,CAAC;SACJ;QAED,+BAAE,GAAF,UAAG,OAAe;YAChB,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAC1C,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC;aACxC;iBAAM;gBACL,MAAM,IAAI,KAAK,CAAI,OAAO,wDAAqD,CAAC,CAAC;aAClF;SACF;QAEO,+CAAkB,GAA1B;YACE,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;gBAClC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBACxC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;aAC1B;SACF;QAEO,0CAAa,GAArB,UAAsB,QAAuB,IAAI,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,EAAE;QACnG,yBAAC;IAAD,CAAC,IAAA;IAED;QAKE,8BAAY,WAAyB;YAArC,iBAQC;YAVO,cAAS,GAA8B,EAAE,CAAC;YAGhD,IAAI,WAAW,EAAE;gBACf,WAAW,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,EAAgB,IAAK,OAAA,KAAI,CAAC,eAAe,CAAC,EAAE,CAAC,GAAA,CAAC,CAAC;aACzF;iBAAM;;gBAEL,IAAM,WAAW,GAAgB,IAAI,CAAC;gBACtC,WAAW,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,EAAgB,IAAK,OAAA,KAAI,CAAC,eAAe,CAAC,EAAE,CAAC,GAAA,CAAC,CAAC;aACzF;SACF;QAED,2CAAY,GAAZ,UAAa,IAAY,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE;QAEjD,0CAAW,GAAX,UAAY,OAAe,EAAE,SAAyB;YAAzB,0BAAA,EAAA,gBAAyB;YACpD,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAC1C,MAAM,IAAI,KAAK,CAAI,OAAO,kCAA+B,CAAC,CAAC;aAC5D;YAED,IAAM,OAAO,GAAG,IAAIA,iBAAY,CAAC,KAAK,CAAC,CAAC;YACxC,IAAM,WAAW,GAAG,IAAI,QAAQ,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;YACrD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,WAAW,CAAC;SACvC;QAED,mCAAI,GAAJ,UAAK,OAAe;YAClB,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAC1C,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC;aACxC;iBAAM;gBACL,MAAM,IAAI,KAAK,CAAI,OAAO,wDAAqD,CAAC,CAAC;aAClF;SACF;QAEO,8CAAe,GAAvB,UAAwB,EAAgB;YACtC,IAAM,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC;YACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACxC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;aAClC;SACF;QAEO,6CAAc,GAAtB,UAAuB,IAAS;YAC9B,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YAC7B,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAC1C,IAAM,aAAW,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;gBAC5C,IAAI,aAAW,CAAC,SAAS,EAAE;oBACzB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAQ,aAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;iBACnE;qBAAM;oBACL,aAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACxC;aACF;SACF;QACH,2BAAC;IAAD,CAAC,IAAA;IAED;;;;IAKA;QACE,wBAAmB,IAAwB,EAAS,MAA4B;YAA7D,SAAI,GAAJ,IAAI,CAAoB;YAAS,WAAM,GAAN,MAAM,CAAsB;SAAI;QAEpF,qCAAY,GAAZ,UAAa,IAAY;YACvB,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SAC9B;QAED,oCAAW,GAAX,UAAY,OAAe,EAAE,SAAyB;YAAzB,0BAAA,EAAA,gBAAyB;YACpD,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;YAC5C,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;SAC3C;QAED,6BAAI,GAAJ,UAAK,OAAe,IAAuB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE;QAE9E,2BAAE,GAAF,UAAG,OAAe,IAAuB,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE;QAf7D,cAAc;YAD1BH,eAAU,EAAE;6CAEc,kBAAkB,EAAiB,oBAAoB;WADrE,cAAc,CAgB1B;QAAD,qBAAC;KAhBD,IAgBC;IAED;;;;IAIA;QACE,kBAAmB,OAA0B,EAAS,SAAkB;YAArD,YAAO,GAAP,OAAO,CAAmB;YAAS,cAAS,GAAT,SAAS,CAAS;SAAI;QAC9E,eAAC;IAAD,CAAC,IAAA;;ICzJD;;;;;;;IAaA;;;AAIA;;QAKE,qCAAoB,WAAuB,EAAE,WAAuB;YAAhD,gBAAW,GAAX,WAAW,CAAY;YACzC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;SAChC;;;;QAKD,yDAAmB,GAAnB,UAAoB,OAAe,EAAE,SAAyB;YAAzB,0BAAA,EAAA,gBAAyB;YAC5D,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;YACjD,OAAO,IAAI,oBAAoB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;SAC9E;QAfU,2BAA2B;YADvCA,eAAU,EAAE;6CAMsB,UAAU,EAAe,UAAU;WALzD,2BAA2B,CAgBvC;QAAD,kCAAC;KAhBD,IAgBC;IAED;;;;;;;;AAQA;;QAKE,8BAAY,UAAsB,EAAU,WAAuB,EAAU,OAAe;YAA5F,iBAIC;YAJ2C,gBAAW,GAAX,WAAW,CAAY;YAAU,YAAO,GAAP,OAAO,CAAQ;YAHpF,aAAQ,GAAG,IAAI,GAAG,EAAoB,CAAC;YAI7C,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;YACpC,IAAM,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACxC,MAAM,CAAC,SAAS,CAAC,EAAC,IAAI,EAAE,UAAC,OAAY,IAAK,OAAA,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAA,EAAC,CAAC,CAAC;SAC1E;QAED,6CAAc,GAAd,UACI,UAAkB,EAAE,SAAgD,EACpE,MAA2C,EAAE,UAAsC;YAFvF,iBAiBC;YAdC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,EAAE,UAAC,OAAwB;gBACrD,IAAM,cAAc,GAAG,OAAO,CAAC,IAAI,CAAC;gBACpC,IAAM,OAAO,GAAG,SAAS,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;gBACjD,IAAM,gBAAgB,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,EAAE,CAAC,EAAE,EAAE;oBAChC,IAAM,aAAa,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;oBACxC,gBAAgB,CAAC,CAAC,CAAC,GAAG,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,EAAE,SAAW,CAAC,CAAC,CAAC,CAAC,CAAC;iBACnF;gBAED,IAAM,OAAO,GAAG,MAAM,wBAAI,gBAAgB,EAAC,CAAC;gBAC5C,IAAI,UAAU,IAAI,OAAO,EAAE;oBACzB,KAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;iBAC7D;aACF,CAAC,CAAC;SACJ;QAEO,6CAAc,GAAtB,UAAuB,OAAwB;YAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBACrC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAG,CAAC,OAAO,CAAC,CAAC;aAC9C;SACF;QAEO,oDAAqB,GAA7B,UAA8B,EAAU,EAAE,OAAqB,EAAE,IAA+B;YAAhG,iBASC;YAPC,OAAO,CAAC,IAAI,CAAC,UAAC,MAAW;gBACvB,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC;oBACd,MAAM,EAAE,QAAQ;oBAChB,OAAO,EAAE,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC;oBACjD,IAAI,EAAE,EAAE;iBACT,CAAC,CAAC;aACJ,CAAC,CAAC;SACJ;QACH,2BAAC;IAAD,CAAC;;ICzFD;;;;;;;IAQA;;;;AAIA,IAAO,IAAM,kBAAkB,GAAG,gBAAgB,CAAC;AACnD,IAAO,IAAM,eAAe,GAAG,cAAc,CAAC;AAE9C,IAAO,IAAM,cAAc,GAAG,WAAW,CAAC;;ICf1C;;;;;;;IAQA,IAAM,sBAAsB,GAAG;QAC7B,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,EAAE,SAAS;QACxF,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU;KACtD,CAAC;IAEF,IAAM,yBAAyB,GAAG;QAChC,QAAQ,EAAE,UAAU,EAAE,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS;QAC/F,QAAQ,EAAE,UAAU,EAAE,OAAO;KAC9B,CAAC;IAEF,IAAM,2BAA2B,GAAG,CAAC,cAAc,EAAE,aAAa,EAAE,eAAe,CAAC,CAAC;IAErF,IAAM,gBAAgB,GAAG,CAAC,MAAM,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;IAE3D,IAAM,gBAAgB,GAAG,IAAI,GAAG,CAC5B,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;AAE7F,aAAgB,qBAAqB,CAAC,CAAQ;QAC5C,OAAO,cAAc,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC;IAC7C,CAAC;IAED;IACA;AACA,aAAgB,wBAAwB,CAAC,CAAQ;QAC/C,IAAM,eAAe,GAAG,cAAc,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAC5D,OAAO,SAAS,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;IACvC,CAAC;AAED,aAAgB,mBAAmB,CAAC,CAAa;QAC/C,OAAO,cAAc,CAAC,CAAC,EAAE,sBAAsB,CAAC,CAAC;IACnD,CAAC;AAED,aAAgB,sBAAsB,CAAC,CAAgB;QACrD,IAAM,eAAe,GAAG,cAAc,CAAC,CAAC,EAAE,yBAAyB,CAAC,CAAC;QACrE,OAAO,SAAS,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;IACvC,CAAC;AAED,aAAgB,wBAAwB,CAAC,CAAkB;QACzD,IAAM,eAAe,GAAG,cAAc,CAAC,CAAC,EAAE,2BAA2B,CAAC,CAAC;QACvE,OAAO,SAAS,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;IACvC,CAAC;IAED;IACA,SAAS,SAAS,CAAC,CAAQ,EAAE,eAAqC;QAChE,IAAI,gBAAgB,CAAC,GAAG,CAAe,CAAC,CAAC,MAAO,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,EAAE;YACvE,IAAM,MAAM,GAAqB,CAAC,CAAC,MAAM,CAAC;YAC1C,eAAe,CAAC,QAAQ,CAAC,GAAG,EAAC,OAAO,EAAE,MAAM,CAAC,KAAK,EAAC,CAAC;YACpD,IAAI,MAAM,CAAC,KAAK,EAAE;gBAChB,eAAe,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;aACnD;SACF;QACD,OAAO,eAAe,CAAC;IACzB,CAAC;IAED,SAAS,cAAc,CAAC,CAAM,EAAE,UAAoB;QAClD,IAAM,UAAU,GAAuB,EAAE,CAAC;QAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAM,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;SAC5B;QACD,OAAO,UAAU,CAAC;IACpB,CAAC;;ICzDD;QACE,yBAAoB,KAAwB,EAAU,WAAuB;YAAzD,UAAK,GAAL,KAAK,CAAmB;YAAU,gBAAW,GAAX,WAAW,CAAY;SAAI;QAEjF,gDAAsB,GAAtB,UAAuB,MAAW,EAAE,SAAiB,EAAE,OAAY;YACjE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;gBACd,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,8BAAsC;gBACnF,iBAAiB,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,8BAAsC;gBAC1F,WAAW,EAAE,SAAS;aACvB,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACb;QAED,6CAAmB,GAAnB,UAAoB,OAAY,EAAE,WAAmB,EAAE,SAAiB,EAAE,KAAU;YAClF,IAAI,eAAoB,CAAC;;YAEzB,QAAQ,KAAK,CAAC,IAAI;gBAChB,KAAK,OAAO,CAAC;gBACb,KAAK,SAAS,CAAC;gBACf,KAAK,WAAW,CAAC;gBACjB,KAAK,UAAU,CAAC;gBAChB,KAAK,aAAa,CAAC;gBACnB,KAAK,YAAY,CAAC;gBAClB,KAAK,YAAY,CAAC;gBAClB,KAAK,WAAW,CAAC;gBACjB,KAAK,UAAU,CAAC;gBAChB,KAAK,WAAW,CAAC;gBACjB,KAAK,MAAM;oBACT,eAAe,GAAG,mBAAmB,CAAC,KAAK,CAAC,CAAC;oBAC7C,MAAM;gBACR,KAAK,SAAS,CAAC;gBACf,KAAK,UAAU,CAAC;gBAChB,KAAK,OAAO;oBACV,eAAe,GAAG,sBAAsB,CAAC,KAAK,CAAC,CAAC;oBAChD,MAAM;gBACR,KAAK,OAAO,CAAC;gBACb,KAAK,QAAQ,CAAC;gBACd,KAAK,MAAM;oBACT,eAAe,GAAG,wBAAwB,CAAC,KAAK,CAAC,CAAC;oBAClD,MAAM;gBACR,KAAK,OAAO,CAAC;gBACb,KAAK,YAAY,CAAC;gBAClB,KAAK,aAAa,CAAC;gBACnB,KAAK,QAAQ,CAAC;gBACd,KAAK,SAAS,CAAC;gBACf,KAAK,gBAAgB,CAAC;gBACtB,KAAK,gBAAgB,CAAC;gBACtB,KAAK,oBAAoB,CAAC;gBAC1B,KAAK,OAAO,CAAC;gBACb,KAAK,uBAAuB,CAAC;gBAC7B,KAAK,kBAAkB,CAAC;gBACxB,KAAK,aAAa,CAAC;gBACnB,KAAK,gBAAgB,CAAC;gBACtB,KAAK,SAAS,CAAC;gBACf,KAAK,OAAO,CAAC;gBACb,KAAK,OAAO,CAAC;gBACb,KAAK,kBAAkB,CAAC;gBACxB,KAAK,iBAAiB,CAAC;gBACvB,KAAK,SAAS,CAAC;gBACf,KAAK,gBAAgB,CAAC;gBACtB,KAAK,cAAc,CAAC;gBACpB,KAAK,YAAY,CAAC;gBAClB,KAAK,gBAAgB,CAAC;gBACtB,KAAK,UAAU,CAAC;gBAChB,KAAK,SAAS,CAAC;gBACf,KAAK,QAAQ,CAAC;gBACd,KAAK,MAAM,CAAC;gBACZ,KAAK,mBAAmB,CAAC;gBACzB,KAAK,OAAO,CAAC;gBACb,KAAK,mBAAmB,CAAC;gBACzB,KAAK,kBAAkB,CAAC;gBACxB,KAAK,MAAM,CAAC;gBACZ,KAAK,SAAS,CAAC;gBACf,KAAK,YAAY,CAAC;gBAClB,KAAK,kBAAkB,CAAC;gBACxB,KAAK,OAAO,CAAC;gBACb,KAAK,QAAQ,CAAC;gBACd,KAAK,QAAQ,CAAC;gBACd,KAAK,SAAS,CAAC;gBACf,KAAK,SAAS,CAAC;gBACf,KAAK,QAAQ,CAAC;gBACd,KAAK,SAAS,CAAC;gBACf,KAAK,SAAS,CAAC;gBACf,KAAK,YAAY,CAAC;gBAClB,KAAK,aAAa,CAAC;gBACnB,KAAK,kBAAkB,CAAC;gBACxB,KAAK,cAAc,CAAC;gBACpB,KAAK,SAAS;oBACZ,eAAe,GAAG,qBAAqB,CAAC,KAAK,CAAC,CAAC;oBAC/C,MAAM;gBACR,KAAK,eAAe;oBAClB,eAAe,GAAG,wBAAwB,CAAC,KAAK,CAAC,CAAC;oBAClD,MAAM;gBACR;oBACE,MAAM,IAAI,KAAK,CAAC,SAAS,GAAG,8BAA8B,CAAC,CAAC;aAC/D;YAED,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;gBACd,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,8BAAsC;gBACnF,WAAW,EAAE,SAAS;gBACtB,aAAa,EAAE,WAAW;gBAC1B,OAAO,EAAE,eAAe;aACzB,CAAC,CAAC;;;YAIH,OAAO,KAAK,CAAC;SACd;QACH,sBAAC;IAAD,CAAC,IAAA;;ICvHD;;;;;;;IAkBA;QAIE,+BACY,cAA2C,EAAU,IAAgB,EACrE,WAAuB,EAAU,YAAyB,EAC1D,gBAAkC;YAFlC,mBAAc,GAAd,cAAc,CAA6B;YAAU,SAAI,GAAJ,IAAI,CAAY;YACrE,gBAAW,GAAX,WAAW,CAAY;YAAU,iBAAY,GAAZ,YAAY,CAAa;YAC1D,qBAAgB,GAAhB,gBAAgB,CAAkB;SAAI;QAElD,qCAAK,GAAL;YAAA,iBAmCC;YAlCC,IAAM,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,CAAC;YAE3E,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;YACvC,IAAI,CAAC,gBAAgB,GAAG,IAAI,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YAEvF,IAAA;;;;iBAIL,EAJM,WAAG,EAAE,SAAC,EAAE,WAId,CAAC;YAEF,IAAM,OAAO,GAAY;gBACvB,CAAC,gBAAgB,EAAE,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;gBACpD,CAAC,eAAe,EAAE,IAAI,CAAC,aAAa,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnD,CAAC,eAAe,EAAE,IAAI,CAAC,aAAa,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC5F,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAChD,CAAC,cAAc,EAAE,IAAI,CAAC,YAAY,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBACvD,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAChD,CAAC,mBAAmB,EAAE,IAAI,CAAC,iBAAiB,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACxD,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;gBAC5F,CAAC,cAAc,EAAE,IAAI,CAAC,YAAY,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACtD,CAAC,iBAAiB,EAAE,IAAI,CAAC,eAAe,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACzD,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;gBACxF,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC9C,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACjD,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;gBAC3F,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,CAAC;gBACjF,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC,CAAC;aAE1E,CAAC;YAEF,OAAO,CAAC,OAAO,CAAC,UAAC,EAAkC;oBAAlC,eAAkC,EAAjC,YAAI,EAAE,cAAM,EAAE,sBAAW;gBACzC,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC;aAC1D,CAAC,CAAC;SACJ;QAEO,uCAAO,GAAf,UAAgB,CAAY,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC,EAAE;QAEtC,2CAAW,GAAnB,UAAoB,CAAY,EAAE,IAAS;YACzC,IAAI,CAAC,CAAC,WAAW,EAAE;gBACjB,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;aACrB;YACD,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAChC;QAEO,8CAAc,GAAtB,UAAuB,EAAO,EAAE,IAAmB,EAAE,EAAU;YAC7D,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;SAC7E;QAEO,6CAAa,GAArB,UAAsB,CAAY,EAAE,IAAY,EAAE,SAAiB,EAAE,EAAU;YAC7E,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC;SAC/D;QAEO,6CAAa,GAArB,UAAsB,CAAY,EAAE,KAAa,EAAE,EAAU;YAC3D,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;SACrD;QAEO,0CAAU,GAAlB,UAAmB,CAAY,EAAE,KAAa,EAAE,EAAU;YACxD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;SAClD;QAEO,2CAAW,GAAnB,UAAoB,CAAY,EAAE,MAAW,EAAE,KAAU,IAAI,CAAC,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,EAAE;QAEpF,4CAAY,GAApB,UAAqB,CAAY,EAAE,MAAW,EAAE,KAAU,EAAE,GAAQ;YAClE,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;SACpC;QAEO,2CAAW,GAAnB,UAAoB,CAAY,EAAE,MAAW,EAAE,KAAU,IAAI,CAAC,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,EAAE;QAEpF,iDAAiB,GAAzB,UAA0B,CAAY,EAAE,QAAgB,EAAE,EAAU;YAClE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC;SAC5D;QAEO,0CAAU,GAAlB,UAAmB,CAAY,EAAE,IAAS,EAAE,EAAU;YACpD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;SACjD;QAEO,2CAAW,GAAnB,UAAoB,CAAY,EAAE,IAAS,EAAE,EAAU;YACrD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;SAClD;QAEO,4CAAY,GAApB,UAAqB,CAAY,EAAE,EAAO,EAAE,IAAY,EAAE,KAAa,EAAE,SAAiB;YACxF,CAAC,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;SAC5C;QAEO,+CAAe,GAAvB,UAAwB,CAAY,EAAE,EAAO,EAAE,IAAY,EAAE,SAAiB;YAC5E,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC;SACxC;QAEO,wCAAQ,GAAhB,UAAiB,CAAY,EAAE,EAAO,EAAE,IAAY,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,EAAE;QAEvE,2CAAW,GAAnB,UAAoB,CAAY,EAAE,EAAO,EAAE,IAAY,IAAI,CAAC,CAAC,WAAW,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,EAAE;QAE7E,wCAAQ,GAAhB,UAAiB,CAAY,EAAE,EAAO,EAAE,KAAa,EAAE,KAAU,EAAE,KAA0B;YAC3F,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;SACrC;QAEO,2CAAW,GAAnB,UAAoB,CAAY,EAAE,EAAO,EAAE,KAAa,EAAE,KAA0B;YAClF,CAAC,CAAC,WAAW,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;SACjC;QAEO,2CAAW,GAAnB,UAAoB,CAAY,EAAE,EAAO,EAAE,IAAY,EAAE,KAAU;YACjE,CAAC,CAAC,WAAW,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;SAChC;QAEO,wCAAQ,GAAhB,UAAiB,CAAY,EAAE,IAAS,EAAE,KAAa,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE;QAE7E,sCAAM,GAAd,UAAe,CAAY,EAAE,EAAO,EAAE,MAAc,EAAE,SAAiB,EAAE,UAAkB;YAA3F,iBAOC;YANC,IAAM,QAAQ,GAAG,UAAC,KAAU;gBAC1B,OAAO,KAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;aAChF,CAAC;YAEF,IAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,MAAM,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;YAC7D,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;SAC/C;QAEO,wCAAQ,GAAhB,UAAiB,CAAY,EAAE,QAAuB,IAAI,QAAQ,EAAE,CAAC,EAAE;QA9H5D,qBAAqB;YADjCA,eAAU,EAAE;6CAMiB,2BAA2B,EAAgB,UAAU;gBACxD,UAAU,EAAwB,WAAW;gBACxCI,qBAAgB;WAPnC,qBAAqB,CA+HjC;QAAD,4BAAC;KA/HD,IA+HC;;ICjJD;;;;;;;IAuBA;;;;;;IAOA;QAAA;SAWC;;QAJQ,gCAAI,GAAX,UAAY,MAAc,EAAE,GAAe;YACzC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;SAChB;QAVU,iBAAiB;YAD7BJ,eAAU,EAAE;WACA,iBAAiB,CAW7B;QAAD,wBAAC;KAXD,IAWC;IAED;;;AAGA,IAAO,IAAM,aAAa,GAAG,IAAID,mBAAc,CAAS,iBAAiB,CAAC,CAAC;IAE3E;;;;;;AAMA,IAAO,IAAM,qCAAqC,GAC9C,IAAIA,mBAAc,CAA0B,iCAAiC,CAAC,CAAC;AAEnF,QAAa,6BAA6B,GAAqB;QAC7D,EAAC,OAAO,EAAEM,WAAM,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,EAAE,EAAE,EAAC;QACrD;YACE,OAAO,EAAE,qBAAqB;YAC9B,IAAI,EAAE,CAAC,2BAA2B,EAAE,UAAU,EAAE,UAAU,EAAE,WAAW,EAAED,qBAAgB,CAAC;SAC3F;QACD,EAAC,OAAO,EAAE,qCAAqC,EAAE,WAAW,EAAE,qBAAqB,EAAE,KAAK,EAAE,IAAI,EAAC;QACjGE,+CAA8B;QAC9B,EAAC,OAAO,EAAEC,iBAAY,EAAE,UAAU,EAAE,iBAAiB,EAAE,IAAI,EAAE,EAAE,EAAC;QAChE,EAAC,OAAO,EAAEC,eAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,IAAI,EAAE,EAAE,EAAC;;;QAGpD;YACE,OAAO,EAAEC,qCAAqB;YAC9B,QAAQ,EAAEC,gCAAe;YACzB,IAAI,EAAE,CAACF,eAAQ,EAAEH,WAAM,CAAC;YACxB,KAAK,EAAE,IAAI;SACZ;QACD,EAAC,OAAO,EAAEI,qCAAqB,EAAE,QAAQ,EAAEE,gCAAe,EAAE,IAAI,EAAE,CAACH,eAAQ,CAAC,EAAE,KAAK,EAAE,IAAI,EAAC;QAC1F;YACE,OAAO,EAAEC,qCAAqB;YAC9B,QAAQ,EAAEG,qCAAoB;YAC9B,IAAI,EAAE,CAACJ,eAAQ,EAAEK,qCAAqB,CAAC;YACvC,KAAK,EAAE,IAAI;SACZ;QACD,EAAC,OAAO,EAAEA,qCAAqB,EAAE,QAAQ,EAAEC,mCAAmB,EAAE,IAAI,EAAE,EAAE,EAAC;QACzEC,4BAAsB;QACtB,EAAC,OAAO,EAAEC,oCAAmB,EAAE,IAAI,EAAE,CAACC,4BAAY,EAAEC,oCAAmB,CAAC,EAAC;QACzE,EAAC,OAAO,EAAEd,qBAAgB,EAAE,WAAW,EAAEY,oCAAmB,EAAC;QAC7D,EAAC,OAAO,EAAEG,iCAAgB,EAAE,WAAW,EAAED,oCAAmB,EAAC;QAC7D;YACE,OAAO,EAAE,2BAA2B;YACpC,QAAQ,EAAE,2BAA2B;YACrC,IAAI,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC;SAC/B;QACD;YACE,OAAO,EAAE,0BAA0B;YACnC,QAAQ,EAAE,0BAA0B;YACpC,IAAI,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC;SAC/B;QACD,EAAC,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,WAAW,CAAC,EAAC;QAC1C,EAAC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAC;QACzC,EAAC,OAAO,EAAE,WAAW,EAAE,IAAI,EAAE,EAAE,EAAC;QAChC,EAAC,OAAO,EAAEA,oCAAmB,EAAE,IAAI,EAAE,CAACV,eAAQ,CAAC,EAAC;QAChD,EAAC,OAAO,EAAEY,gBAAW,EAAE,IAAI,EAAE,CAACf,WAAM,CAAC,EAAC;QACtC,EAAC,OAAO,EAAEY,4BAAY,EAAE,IAAI,EAAE,CAACR,qCAAqB,EAAEJ,WAAM,CAAC,EAAC;QAC9D,EAAC,OAAO,EAAE,iBAAiB,EAAE,IAAI,EAAE,EAAE,EAAC;QACtC;YACE,OAAO,EAAEgB,yBAAoB;YAC7B,UAAU,EAAE,2BAA2B;YACvC,KAAK,EAAE,IAAI;YACX,IAAI,EAAE,CAACC,aAAQ,CAAC;SACjB;QACD,EAAC,OAAO,EAAEC,gBAAW,EAAE,QAAQ,EAAEC,6BAAqB,EAAC;QACvD,EAAC,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAC,iBAAiB,CAAC,EAAC;KAChF,CAAC;IAEF,SAAS,+BAA+B,CAAC,QAAkB;QACzD,IAAM,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACrC,IAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAASnB,WAAM,CAAC,CAAC;QAC1C,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;;QAGvB,IAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;QACrE,IAAI,CAAC,UAAU,CAAC,cAAQ,QAAQ,CAAC,OAAO,CAAC,UAAC,GAAQ,IAAO,GAAG,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAC/E,CAAC;IAED,SAAS,iBAAiB,CAAC,QAA2B;QACpD,OAAO,QAAQ,CAAC,GAAG,CAAC;IACtB,CAAC;IAED,SAAS,2BAA2B,CAAC,QAAkB;QACrD,OAAO;YACLoB,kCAAiB,CAAC,WAAW,EAAE,CAAC;YAChCC,sCAAqB,CAAC,IAAI,EAAE,CAAC;YAC7B,IAAI,SAAiB,CAAC;YACtB,IAAI;gBACF,SAAS,GAAG,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;aACzC;YAAC,WAAM;gBACN,MAAM,IAAI,KAAK,CACX,uFAAuF,CAAC,CAAC;aAC9F;YAED,IAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YACjD,cAAc,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;YAEpC,+BAA+B,CAAC,QAAQ,CAAC,CAAC;SAC3C,CAAC;IACJ,CAAC;IAED;;;AAGA,QAAa,gBAAgB,GACzBC,0BAAqB,CAACC,iBAAY,EAAE,UAAU,EAAE,6BAA6B,CAAC,CAAC;IAEnF,SAAS,iBAAiB;QACxB,OAAO,IAAIrB,iBAAY,EAAE,CAAC;IAC5B,CAAC;IAED,SAAS,SAAS;QAChB,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,SAAS,YAAY;QACnB,OAAO,IAAIF,WAAM,CAAC,EAAC,oBAAoB,EAAEwB,cAAS,EAAE,EAAC,CAAC,CAAC;IACzD,CAAC;IAED;;;IAGA,SAAS,cAAc,CAAC,GAAW,EAAE,QAA2B;QAC9D,IAAM,SAAS,GAAW,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;QAC1C,IAAM,IAAI,GAAG,IAAI,kBAAkB,CAAC,SAAS,CAAC,CAAC;QAC/C,IAAM,MAAM,GAAG,IAAI,oBAAoB,CAAC,SAAS,CAAC,CAAC;QACnD,IAAM,GAAG,GAAG,IAAI,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAE7C,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;IAChC,CAAC;;IC/KD;;;;;;;AAQA,IAQA;;;AAGA,QAAa,OAAO,GAAG,IAAIC,YAAO,CAAC,mBAAmB,CAAC;;ICnBvD;;;;;;;IAiBA;QAIE,sCACY,cAA2C,EAC3C,iBAA0C,EAAE,GAAe,EAC3D,WAAuB;YAFvB,mBAAc,GAAd,cAAc,CAA6B;YAC3C,sBAAiB,GAAjB,iBAAiB,CAAyB;YAC1C,gBAAW,GAAX,WAAW,CAAY;YACjC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAyB,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC/F,IAAI,CAAC,iBAAiB,CAAC,YAAY,CACP,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC;YACvE,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;SAC5C;QAED,4CAAK,GAAL;YACE,IAAM,CAAC,qBAA6B;YAEpC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,YAAY,CAAC,CAAC;YAC7F,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC9E,IAAI,CAAC,OAAO,CAAC,cAAc,CACvB,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC3F,IAAI,CAAC,OAAO,CAAC,cAAc,CACvB,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACzB,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACtE,IAAI,CAAC,OAAO,CAAC,cAAc,CACvB,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAClF,IAAI,CAAC,OAAO,CAAC,cAAc,CACvB,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;SAC7E;QAEO,mDAAY,GAApB;YACE,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;SACzD;QAEO,0DAAmB,GAA3B,UAA4B,CAAQ;YAClC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;gBACrB,OAAO,EAAE,EAAC,MAAM,EAAE,CAAC,CAAC,IAAI,EAAC;gBACzB,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,YAAY,CAAC;aACtF,CAAC,CAAC;SACJ;QAEO,mDAAY,GAApB,UAAqB,QAAgB,IAAU,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,QAAQ,CAAC,EAAE;QA1CjF,4BAA4B;YADxC9B,eAAU,EAAE;6CAMiB,2BAA2B;gBACxB+B,wCAAuB,EAAO,UAAU;gBAC9C,UAAU;WAPxB,4BAA4B,CA2CxC;QAAD,mCAAC;KA3CD,IA2CC;;IC5DD;;;;;;;AAQA,IAYA;;;;;AAKA,QAAa,4BAA4B,GAAqB;QAC5D,EAAC,OAAO,EAAE,4BAA4B,EAAE,IAAI,EAAE,CAAC,2BAA2B;gBACxEA,wCAAuB,EAAE,UAAU,EAAE,UAAU,CAAC,EAAC;QACnD,EAAC,OAAO,EAAEA,wCAAuB,EAAE,IAAI,EAAE,CAACvB,eAAQ,CAAC,EAAC;QACpD,EAAC,OAAO,EAAEa,yBAAoB,EAAE,UAAU,EAAE,cAAc,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,CAACC,aAAQ,CAAC,EAAC;KAC3F,CAAC;IAEF,SAAS,cAAc,CAAC,QAAkB;QACxC,OAAO;YACL,IAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAASjB,WAAM,CAAC,CAAC;YAE1C,IAAI,CAAC,UAAU,CAAC,cAAM,OAAA,QAAQ,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC,KAAK,EAAE,GAAA,CAAC,CAAC;SAC3E,CAAC;IACJ,CAAC;;ICtCD;;;;;;;;QAgB+C2B,6CAAgB;QAU7D,mCACI,aAAyC,EAAE,GAAe,EAAU,WAAuB;YAD/F,YAEE,iBAAO,SAwBR;YAzBuE,iBAAW,GAAX,WAAW,CAAY;YATvF,wBAAkB,GAAoB,EAAE,CAAC;YACzC,0BAAoB,GAAoB,EAAE,CAAC;YAC3C,eAAS,GAAiB,IAAM,CAAC;YASvC,KAAI,CAAC,OAAO,GAAG,aAAa,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC;YACjE,KAAI,CAAC,cAAc,GAAG,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAE/C,KAAI,CAAC,cAAc,CAAC,SAAS,CAAC;gBAC5B,IAAI,EAAE,UAAC,GAAyB;oBAC9B,IAAI,SAAS,GAAyB,IAAI,CAAC;oBAC3C,IAAI,GAAG,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;wBAC/B,IAAM,IAAI,GAAW,GAAG,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC;wBAC1C,IAAI,IAAI,KAAK,UAAU,EAAE;4BACvB,SAAS,GAAG,KAAI,CAAC,kBAAkB,CAAC;yBACrC;6BAAM,IAAI,IAAI,KAAK,YAAY,EAAE;4BAChC,SAAS,GAAG,KAAI,CAAC,oBAAoB,CAAC;yBACvC;wBAED,IAAI,SAAS,EAAE;;4BAEb,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,YAAY,CAAC,CAAC;4BAC7E,SAAS,CAAC,OAAO,CAAC,UAAC,EAAY,IAAK,OAAA,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAA,CAAC,CAAC;yBACvD;qBACF;iBACF;aACF,CAAC,CAAC;YACH,KAAI,CAAC,WAAW,GAAG,IAAI,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,KAAI,CAAC,kBAAkB,GAAG,GAAG,GAAA,CAAC,CAAC;;SACtE;;QAGD,wCAAI,GAAJ;YAAA,iBAUC;YATC,IAAM,IAAI,GAAgB,IAAI,WAAW,CAAC,aAAa,CAAC,CAAC;YAEzD,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,CAAG,CAAC,IAAI,CACvD,UAAC,GAAiB;gBAChB,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC;gBACrB,KAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC1B,OAAO,IAAI,CAAC;aACb,EACD,UAAA,GAAG,IAAM,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;SACvC;QAED,sDAAkB,GAAlB;YACE,MAAM,IAAI,KAAK,CACX,6JAA6J,CAAC,CAAC;SACpK;QAED,8CAAU,GAAV,UAAW,EAA0B,IAAU,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE;QAElF,gDAAY,GAAZ,UAAa,EAA0B,IAAU,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE;QAEtF,sBAAI,2CAAI;iBAAR,cAAqB,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAM,GAAG,WAAW,CAAC,EAAE;;;WAAA;QAEnF,sBAAI,+CAAQ;iBAAZ,cAAyB,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAM,GAAG,WAAW,CAAC,EAAE;;;WAAA;QAEvF,sBAAI,2CAAI;iBAAR,cAAqB,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAM,GAAG,WAAW,CAAC,EAAE;;;WAAA;QAEnF,sBAAI,+CAAQ;iBAAZ,cAAyB,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,QAAU,GAAG,WAAW,CAAC,EAAE;;;WAAA;QAE3F,sBAAI,6CAAM;iBAAV,cAAuB,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,WAAW,CAAC,EAAE;;;WAAA;QAErF,sBAAI,2CAAI;iBAAR,cAAqB,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,WAAW,CAAC,EAAE;;;WAAA;QAEjF,sBAAI,+CAAQ;iBAAZ,UAAa,OAAe;gBAC1B,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;oBAC3B,MAAM,IAAI,KAAK,CAAC,0DAA0D,CAAC,CAAC;iBAC7E;gBAED,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,OAAO,CAAC;gBAElC,IAAM,MAAM,GAAG,CAAC,IAAI,KAAK,CAAC,OAAO,oBAA4B,CAAC,CAAC;gBAC/D,IAAM,IAAI,GAAG,IAAI,WAAW,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;gBACpD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aACvC;;;WAAA;QAED,6CAAS,GAAT,UAAU,KAAU,EAAE,KAAa,EAAE,GAAW;YAC9C,IAAM,MAAM,GAAG;gBACb,IAAI,KAAK,CAAC,KAAK,oBAA4B;gBAC3C,IAAI,KAAK,CAAC,KAAK,oBAA4B;gBAC3C,IAAI,KAAK,CAAC,GAAG,oBAA4B;aAC1C,CAAC;YACF,IAAM,IAAI,GAAG,IAAI,WAAW,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;YAClD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACvC;QAED,gDAAY,GAAZ,UAAa,KAAU,EAAE,KAAa,EAAE,GAAW;YACjD,IAAM,MAAM,GAAG;gBACb,IAAI,KAAK,CAAC,KAAK,oBAA4B;gBAC3C,IAAI,KAAK,CAAC,KAAK,oBAA4B;gBAC3C,IAAI,KAAK,CAAC,GAAG,oBAA4B;aAC1C,CAAC;YACF,IAAM,IAAI,GAAG,IAAI,WAAW,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;YACrD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACvC;QAED,2CAAO,GAAP;YACE,IAAM,IAAI,GAAG,IAAI,WAAW,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACvC;QAED,wCAAI,GAAJ;YACE,IAAM,IAAI,GAAG,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACvC;;QAGD,4CAAQ,GAAR,cAAsB,OAAO,SAAS,CAAC,EAAE;QAnH9B,yBAAyB;YADrChC,eAAU,EAAE;6CAYQ,0BAA0B,EAAO,UAAU,EAAuB,UAAU;WAXpF,yBAAyB,CAoHrC;QAAD,gCAAC;KAAA,CApH8CiC,uBAAgB;;IChB/D;;;;;;;AAQA,IAMA;;;;;;AAMA,QAAa,6BAA6B,GAAG;QAC3C,EAAC,OAAO,EAAEA,uBAAgB,EAAE,QAAQ,EAAE,yBAAyB,EAAC,EAAE;YAChE,OAAO,EAAEC,oBAAe;YACxB,UAAU,EAAE,gBAAgB;YAC5B,KAAK,EAAE,IAAI;YACX,IAAI,EAAE,CAACD,uBAAgB,EAAE5B,WAAM,CAAC;SACjC;QACD,EAAC,OAAO,EAAE8B,2BAAoB,EAAE,UAAU,EAAE,mBAAmB,EAAE,IAAI,EAAE,CAACF,uBAAgB,CAAC,EAAC;KAC3F,CAAC;AAEF,aAAgB,mBAAmB,CAAC,gBAA2C;QAC7E,OAAO,gBAAgB,CAAC,WAAW,CAAC;IACtC,CAAC;AAED,aAAgB,gBAAgB,CAAC,gBAA2C,EAAE,IAAY;QAExF,OAAO,cAAM,OAAA,IAAI,CAAC,UAAU,CAAC,cAAM,OAAA,gBAAgB,CAAC,IAAI,EAAE,GAAA,CAAC,GAAA,CAAC;IAC9D,CAAC;;ICrCD;;;;;;;IAgBA;QAAA;SAgCC;QA5BC,kCAAM,GAAN,UAAO,SAAiB,EAAE,QAAkB,IAAI,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE;QAE/F,oCAAQ,GAAR,UAAS,SAAiB,EAAE,QAAkB;YAC5C,IAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;YAChD,IAAM,KAAK,GAAG,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;gBACd,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aAC5B;SACF;QAED,yCAAa,GAAb,UAAc,SAAiB,EAAE,KAAU;YACzC,IAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;YAChD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACzC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACrB;SACF;QAEO,yCAAa,GAArB,UAAsB,SAAiB;YACrC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,EAAsB,CAAC;aACjD;YACD,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAC/C,IAAI,CAAC,SAAS,EAAE;gBACd,SAAS,GAAG,EAAE,CAAC;gBACf,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;aAC3C;YACD,OAAO,SAAS,CAAC;SAClB;QACH,wBAAC;IAAD,CAAC,IAAA;IAGD,SAAS,mBAAmB,CAAC,MAAc,EAAE,SAAiB;QAC5D,OAAU,MAAM,SAAI,SAAW,CAAC;IAClC,CAAC;AAGD;QAKE,mCACI,oBAAgD,EAAE,GAAe,EACzD,WAAuB,EAAS,WAAwB;YAFpE,iBAOC;YALW,gBAAW,GAAX,WAAW,CAAY;YAAS,gBAAW,GAAX,WAAW,CAAa;YANpE,iBAAY,GAAG,IAAI,iBAAiB,EAAE,CAAC;YAOrC,IAAI,CAAC,cAAc,GAAG,oBAAoB,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,CAAC;YACnF,GAAG,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;YACjC,IAAM,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YACzC,MAAM,CAAC,SAAS,CAAC,EAAC,IAAI,EAAE,UAAC,OAAY,IAAK,OAAA,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAA,EAAC,CAAC,CAAC;SAC1E;QAED,kDAAc,GAAd,UAAe,OAAY,EAAE,IAAwB;YACnD,IAAM,QAAQ,GAAG,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAE9C,IAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE;gBAC5B,IAAI,KAAK,CAAC,OAAO,8BAAsC;gBACvD,IAAI,KAAK,CAAC,IAAI,0BAAkC;gBAChD,IAAI,KAAK,CAAC,QAAQ,8BAAsC;aACzD,CAAC,CAAC;YAEH,OAAO,QAAQ,CAAC;SACjB;QAED,yCAAK,GAAL,eAAU;QACV,uCAAG,GAAH,eAAQ;QAER,0CAAM,GAAN,UAAO,MAAc,EAAE,MAAe;YACpC,IAAM,IAAI,GAAG,IAAI,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAC7C,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC9C;QAED,gDAAY,GAAZ;YACE,IAAM,MAAM,GAAG,IAAI,mBAAmB,EAAE,CAAC;YACzC,IAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;YACnC,OAAO,MAAM,CAAC;SACf;QAED,4CAAQ,GAAR,UAAS,IAAS,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;QAEtD,8CAAU,GAAV,cAAuB,OAAO,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC,EAAE;QAEtD,kDAAc,GAAtB,UAAuB,OAA6B;YAClD,IAAM,OAAO,GACT,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,8BAAsC,CAAC;YAE1F,IAAM,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;YACvC,IAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;YACtC,IAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;YAE/B,IAAI,MAAM,EAAE;gBACV,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,mBAAmB,CAAC,MAAM,EAAE,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;aAChF;iBAAM;gBACL,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;aAChD;SACF;QA5DU,yBAAyB;YADrCjC,eAAU,EAAE;6CAOe,0BAA0B,EAAO,UAAU;gBAC5C,UAAU,EAAsB,WAAW;WAPzD,yBAAyB,CA6DrC;QAAD,gCAAC;KA7DD,IA6DC;IAGD;QAGE,4BAAoB,gBAA2C;YAA3C,qBAAgB,GAAhB,gBAAgB,CAA2B;YAF/D,SAAI,GAAyB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAIzC,YAAO,GAAG,IAAI,KAAK,CAAC,IAAI,8BAAsC,CAAC;SAFJ;QAInE,oCAAO,GAAP,cAAkB,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,EAAE;QAEvD,wCAAW,GAAX,UAAY,IAAS;YACnB,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,CAAC,IAAI,KAAK,CAAC,IAAI,8BAAsC,CAAC,CAAC,CAAC;YAC/F,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SACtC;QAED,0CAAa,GAAb,UAAc,IAAY,EAAE,SAAkB;YAC5C,IAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YAClD,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE;gBACvC,IAAI,KAAK,CAAC,IAAI,CAAC;gBACf,IAAI,KAAK,CAAC,SAAS,CAAC;gBACpB,IAAI,KAAK,CAAC,IAAI,8BAAsC;aACrD,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACb;QAED,0CAAa,GAAb,UAAc,KAAa;YACzB,IAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YAClD,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE;gBACvC,IAAI,KAAK,CAAC,KAAK,CAAC;gBAChB,IAAI,KAAK,CAAC,IAAI,8BAAsC;aACrD,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACb;QAED,uCAAU,GAAV,UAAW,KAAa;YACtB,IAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YAClD,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE;gBACpC,IAAI,KAAK,CAAC,KAAK,CAAC;gBAChB,IAAI,KAAK,CAAC,IAAI,8BAAsC;aACrD,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACb;QAED,wCAAW,GAAX,UAAY,MAAW,EAAE,QAAa;YACpC,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE;gBACrC,IAAI,KAAK,CAAC,MAAM,8BAAsC;gBACtD,IAAI,KAAK,CAAC,QAAQ,8BAAsC;aACzD,CAAC,CAAC;SACJ;QAED,yCAAY,GAAZ,UAAa,MAAW,EAAE,QAAa,EAAE,QAAa;YACpD,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO;aACR;YAED,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAAE;gBACtC,IAAI,KAAK,CAAC,MAAM,8BAAsC;gBACtD,IAAI,KAAK,CAAC,QAAQ,8BAAsC;gBACxD,IAAI,KAAK,CAAC,QAAQ,8BAAsC;aACzD,CAAC,CAAC;SACJ;QAED,wCAAW,GAAX,UAAY,MAAW,EAAE,QAAa;YACpC,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE;gBACrC,IAAI,KAAK,CAAC,MAAM,8BAAsC;gBACtD,IAAI,KAAK,CAAC,QAAQ,8BAAsC;aACzD,CAAC,CAAC;SACJ;QAED,8CAAiB,GAAjB,UAAkB,cAA0B;YAC1C,IAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YAClD,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,EAAE;gBAC3C,IAAI,KAAK,CAAC,cAAc,CAAC;gBACzB,IAAI,KAAK,CAAC,IAAI,8BAAsC;aACrD,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACb;QAED,uCAAU,GAAV,UAAW,IAAS;YAClB,IAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YACjD,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE;gBACpC,IAAI,KAAK,CAAC,IAAI,8BAAsC;gBACpD,IAAI,KAAK,CAAC,GAAG,8BAAsC;aACpD,CAAC,CAAC;YACH,OAAO,GAAG,CAAC;SACZ;QAED,wCAAW,GAAX,UAAY,IAAS;YACnB,IAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YACjD,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE;gBACrC,IAAI,KAAK,CAAC,IAAI,8BAAsC;gBACpD,IAAI,KAAK,CAAC,GAAG,8BAAsC;aACpD,CAAC,CAAC;YACH,OAAO,GAAG,CAAC;SACZ;QAED,yCAAY,GAAZ,UAAa,EAAO,EAAE,IAAY,EAAE,KAAa,EAAE,SAAkB;YACnE,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAAE;gBACtC,IAAI,KAAK,CAAC,EAAE,8BAAsC;gBAClD,IAAI,KAAK,CAAC,IAAI,CAAC;gBACf,IAAI,KAAK,CAAC,KAAK,CAAC;gBAChB,IAAI,KAAK,CAAC,SAAS,CAAC;aACrB,CAAC,CAAC;SACJ;QAED,4CAAe,GAAf,UAAgB,EAAO,EAAE,IAAY,EAAE,SAAkB;YACvD,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,EAAE;gBACzC,IAAI,KAAK,CAAC,EAAE,8BAAsC;gBAClD,IAAI,KAAK,CAAC,IAAI,CAAC;gBACf,IAAI,KAAK,CAAC,SAAS,CAAC;aACrB,CAAC,CAAC;SACJ;QAED,qCAAQ,GAAR,UAAS,EAAO,EAAE,IAAY;YAC5B,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE;gBAClC,IAAI,KAAK,CAAC,EAAE,8BAAsC;gBAClD,IAAI,KAAK,CAAC,IAAI,CAAC;aAChB,CAAC,CAAC;SACJ;QAED,wCAAW,GAAX,UAAY,EAAO,EAAE,IAAY;YAC/B,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE;gBACrC,IAAI,KAAK,CAAC,EAAE,8BAAsC;gBAClD,IAAI,KAAK,CAAC,IAAI,CAAC;aAChB,CAAC,CAAC;SACJ;QAED,qCAAQ,GAAR,UAAS,EAAO,EAAE,KAAa,EAAE,KAAU,EAAE,KAA0B;YACrE,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE;gBAClC,IAAI,KAAK,CAAC,EAAE,8BAAsC;gBAClD,IAAI,KAAK,CAAC,KAAK,CAAC;gBAChB,IAAI,KAAK,CAAC,KAAK,CAAC;gBAChB,IAAI,KAAK,CAAC,KAAK,CAAC;aACjB,CAAC,CAAC;SACJ;QAED,wCAAW,GAAX,UAAY,EAAO,EAAE,KAAa,EAAE,KAA0B;YAC5D,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE;gBACrC,IAAI,KAAK,CAAC,EAAE,8BAAsC;gBAClD,IAAI,KAAK,CAAC,KAAK,CAAC;gBAChB,IAAI,KAAK,CAAC,KAAK,CAAC;aACjB,CAAC,CAAC;SACJ;QAED,wCAAW,GAAX,UAAY,EAAO,EAAE,IAAY,EAAE,KAAU;YAC3C,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE;gBACrC,IAAI,KAAK,CAAC,EAAE,8BAAsC;gBAClD,IAAI,KAAK,CAAC,IAAI,CAAC;gBACf,IAAI,KAAK,CAAC,KAAK,CAAC;aACjB,CAAC,CAAC;SACJ;QAED,qCAAQ,GAAR,UAAS,IAAS,EAAE,KAAa;YAC/B,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE;gBAClC,IAAI,KAAK,CAAC,IAAI,8BAAsC;gBACpD,IAAI,KAAK,CAAC,KAAK,CAAC;aACjB,CAAC,CAAC;SACJ;QAED,mCAAM,GAAN,UACI,MAAsC,EAAE,SAAiB,EACzD,QAAiC;YAFrC,iBA8BC;YA3BC,IAAM,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC;YAEhD,IAAA;wCAE+C,EAF9C,gBAAQ,EAAE,kBAAU,EAAE,gBAEwB,CAAC;YAEtD,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;aAC/D;iBAAM;gBACL,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;aAC7C;YAED,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE;gBAChC,IAAI,KAAK,CAAC,QAAQ,8BAAsC;gBACxD,IAAI,KAAK,CAAC,UAAU,CAAC;gBACrB,IAAI,KAAK,CAAC,SAAS,CAAC;gBACpB,IAAI,KAAK,CAAC,UAAU,CAAC;aACtB,CAAC,CAAC;YAEH,OAAO;gBACL,IAAI,QAAQ,EAAE;oBACZ,KAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;iBACjE;qBAAM;oBACL,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;iBAC/C;gBACD,KAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,CAAC,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aAC9D,CAAC;SACH;QAEO,+CAAkB,GAA1B,UAA2B,MAAc,EAAE,MAAoB;YAApB,uBAAA,EAAA,WAAoB;;YAE7D,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,MAAM,YAAG,IAAI,CAAC,OAAO,GAAK,MAAM,EAAE,CAAC;SACjE;QACH,yBAAC;IAAD,CAAC,IAAA;IAED;QAAA;YAAmC,WAAM,GAAG,IAAI,iBAAiB,EAAE,CAAC;SAAE;QAAD,0BAAC;IAAD,CAAC,IAAA;;IC5TtE;;;;;;;IAUA;;;;;IAKA;QAAsCgC,oCAAU;QAAhD;;SAyJC;QAxJQ,4BAAW,GAAlB,cAAuBI,kCAAiB,CAAC,IAAI,gBAAgB,EAAE,CAAC,CAAC,EAAE;QAEnE,mCAAQ,GAAR,UAAS,KAAU;YACjB,IAAI,OAAO,CAAC,KAAK,EAAE;gBACjB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACtB;iBAAM;;gBAEL,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;aACpB;SACF;QAED,8BAAG,GAAH,UAAI,KAAU;;YAEZ,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACpB;QAED,mCAAQ,GAAR,UAAS,KAAU;YACjB,IAAI,OAAO,CAAC,KAAK,EAAE;gBACjB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aACtB;iBAAM;;gBAEL,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;aACpB;SACF;QAED,sCAAW,GAAX;YACE,IAAI,OAAO,CAAC,QAAQ,EAAE;gBACpB,OAAO,CAAC,QAAQ,EAAE,CAAC;aACpB;SACF;QAED,mCAAQ,GAAR,UAAS,KAAU,EAAE,KAAU,IAAa,MAAM,iBAAiB,CAAC,EAAE;QACtE,sCAAW,GAAX,UAAY,OAAY,EAAE,IAAY,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC7E,sCAAW,GAAX,UAAY,EAAW,EAAE,IAAY,EAAE,KAAU,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC/E,sCAAW,GAAX,UAAY,EAAW,EAAE,IAAY,IAAS,MAAM,iBAAiB,CAAC,EAAE;QACxE,iCAAM,GAAN,UAAO,EAAW,EAAE,UAAkB,EAAE,IAAW,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAEtF,sBAAI,2CAAa;iBAAjB,cAA+C,MAAM,iBAAiB,CAAC,EAAE;iBACzE,UAAkB,KAA8B,IAAI,MAAM,iBAAiB,CAAC,EAAE;;;WADL;QAGzE,gCAAK,GAAL,UAAM,YAAoB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACxD,wCAAa,GAAb,UAAc,EAAO,EAAE,QAAgB,IAAiB,MAAM,iBAAiB,CAAC,EAAE;QAClF,2CAAgB,GAAhB,UAAiB,EAAO,EAAE,QAAgB,IAAW,MAAM,iBAAiB,CAAC,EAAE;QAC/E,6BAAE,GAAF,UAAG,EAAO,EAAE,GAAQ,EAAE,QAAa,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACjE,sCAAW,GAAX,UAAY,EAAO,EAAE,GAAQ,EAAE,QAAa,IAAc,MAAM,iBAAiB,CAAC,EAAE;QACpF,wCAAa,GAAb,UAAc,EAAO,EAAE,GAAQ,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC7D,2CAAgB,GAAhB,UAAiB,SAAc,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAClE,sCAAW,GAAX,UAAY,SAAiB,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAChE,yCAAc,GAAd,UAAe,GAAQ,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACrD,sCAAW,GAAX,UAAY,GAAQ,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC3D,uCAAY,GAAZ,UAAa,EAAO,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC1D,6CAAkB,GAAlB,UAAmB,EAAO,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAC7D,uCAAY,GAAZ,UAAa,EAAO,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC1D,mCAAQ,GAAR,UAAS,IAAS,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACxD,oCAAS,GAAT,UAAU,IAAS,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACzD,+BAAI,GAAJ,UAAK,IAAS,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACpD,kCAAO,GAAP,UAAQ,IAAS,IAAS,MAAM,iBAAiB,CAAC,EAAE;QACpD,qCAAU,GAAV,UAAW,EAAO,IAAU,MAAM,iBAAiB,CAAC,EAAE;QACtD,sCAAW,GAAX,UAAY,EAAO,IAAU,MAAM,iBAAiB,CAAC,EAAE;QACvD,wCAAa,GAAb,UAAc,EAAO,IAAU,MAAM,iBAAiB,CAAC,EAAE;QACzD,qCAAU,GAAV,UAAW,EAAO,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACxD,2CAAgB,GAAhB,UAAiB,EAAO,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC9D,qCAAU,GAAV,UAAW,EAAO,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAChD,sCAAW,GAAX,UAAY,EAAO,EAAE,IAAS,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC5D,sCAAW,GAAX,UAAY,EAAO,EAAE,IAAS,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC5D,uCAAY,GAAZ,UAAa,EAAO,EAAE,OAAY,EAAE,OAAY,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC9E,iCAAM,GAAN,UAAO,EAAO,IAAU,MAAM,iBAAiB,CAAC,EAAE;QAClD,uCAAY,GAAZ,UAAa,MAAW,EAAE,EAAO,EAAE,IAAS,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC1E,0CAAe,GAAf,UAAgB,MAAW,EAAE,EAAO,EAAE,KAAU,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC9E,sCAAW,GAAX,UAAY,MAAW,EAAE,EAAO,EAAE,IAAS,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACzE,uCAAY,GAAZ,UAAa,EAAO,EAAE,KAAU,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC9D,kCAAO,GAAP,UAAQ,EAAO,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACrD,kCAAO,GAAP,UAAQ,EAAO,EAAE,KAAa,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC5D,mCAAQ,GAAR,UAAS,EAAO,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACtD,mCAAQ,GAAR,UAAS,EAAO,EAAE,KAAa,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC7D,qCAAU,GAAV,UAAW,EAAO,IAAa,MAAM,iBAAiB,CAAC,EAAE;QACzD,qCAAU,GAAV,UAAW,EAAO,EAAE,KAAc,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAChE,wCAAa,GAAb,UAAc,IAAY,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAC7D,yCAAc,GAAd,UAAe,IAAS,IAAiB,MAAM,iBAAiB,CAAC,EAAE;QACnE,wCAAa,GAAb,UAAc,OAAY,EAAE,GAAS,IAAiB,MAAM,iBAAiB,CAAC,EAAE;QAChF,0CAAe,GAAf,UAAgB,EAAU,EAAE,OAAe,EAAE,GAAS,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC7F,yCAAc,GAAd,UAAe,IAAY,EAAE,GAAS,IAAU,MAAM,iBAAiB,CAAC,EAAE;QAC1E,0CAAe,GAAf,UAAgB,QAAgB,EAAE,SAAiB,EAAE,GAAS;YAC5D,MAAM,iBAAiB,CAAC;SACzB;QACD,6CAAkB,GAAlB,UAAmB,GAAW,EAAE,GAAS,IAAsB,MAAM,iBAAiB,CAAC,EAAE;QACzF,2CAAgB,GAAhB,UAAiB,EAAO,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAC3D,wCAAa,GAAb,UAAc,EAAO,IAAS,MAAM,iBAAiB,CAAC,EAAE;QACxD,kCAAO,GAAP,UAAQ,EAAO,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAClD,8CAAmB,GAAnB,UAAoB,EAAO,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACjE,gCAAK,GAAL,UAAM,IAAU,IAAU,MAAM,iBAAiB,CAAC,EAAE;QACpD,iDAAsB,GAAtB,UAAuB,OAAY,EAAE,IAAY,IAAmB,MAAM,iBAAiB,CAAC,EAAE;QAC9F,+CAAoB,GAApB,UAAqB,OAAY,EAAE,IAAY,IAAmB,MAAM,iBAAiB,CAAC,EAAE;QAC5F,oCAAS,GAAT,UAAU,OAAY,IAAW,MAAM,iBAAiB,CAAC,EAAE;QAC3D,mCAAQ,GAAR,UAAS,OAAY,EAAE,SAAiB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACtE,sCAAW,GAAX,UAAY,OAAY,EAAE,SAAiB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACzE,mCAAQ,GAAR,UAAS,OAAY,EAAE,SAAiB,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC/E,mCAAQ,GAAR,UAAS,OAAY,EAAE,SAAiB,EAAE,UAAkB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC1F,sCAAW,GAAX,UAAY,OAAY,EAAE,SAAiB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACzE,mCAAQ,GAAR,UAAS,OAAY,EAAE,SAAiB,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC9E,mCAAQ,GAAR,UAAS,OAAY,EAAE,SAAiB,EAAE,UAAmB;YAC3D,MAAM,iBAAiB,CAAC;SACzB;QACD,kCAAO,GAAP,UAAQ,OAAY,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC1D,uCAAY,GAAZ,UAAa,OAAY,IAAyB,MAAM,iBAAiB,CAAC,EAAE;QAC5E,uCAAY,GAAZ,UAAa,OAAY,EAAE,SAAiB,IAAa,MAAM,iBAAiB,CAAC,EAAE;QACnF,yCAAc,GAAd,UAAe,OAAY,EAAE,EAAU,EAAE,SAAiB,IAAa,MAAM,iBAAiB,CAAC,EAAE;QACjG,uCAAY,GAAZ,UAAa,OAAY,EAAE,SAAiB,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAClF,yCAAc,GAAd,UAAe,OAAY,EAAE,EAAU,EAAE,SAAiB,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAChG,uCAAY,GAAZ,UAAa,OAAY,EAAE,IAAY,EAAE,KAAa,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACpF,yCAAc,GAAd,UAAe,OAAY,EAAE,EAAU,EAAE,IAAY,EAAE,KAAa,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAClG,0CAAe,GAAf,UAAgB,OAAY,EAAE,SAAiB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC7E,4CAAiB,GAAjB,UAAkB,OAAY,EAAE,EAAU,EAAE,SAAiB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC3F,4CAAiB,GAAjB,UAAkB,EAAO,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACvD,6CAAkB,GAAlB,cAAqC,MAAM,iBAAiB,CAAC,EAAE;QAC/D,6CAAkB,GAAlB,cAAiC,MAAM,iBAAiB,CAAC,EAAE;QAC3D,gDAAqB,GAArB,UAAsB,EAAO,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC3D,mCAAQ,GAAR,UAAS,GAAa,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC5D,mCAAQ,GAAR,UAAS,GAAa,EAAE,QAAgB,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACtE,yCAAc,GAAd,UAAe,CAAM,EAAE,QAAgB,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC9E,4CAAiB,GAAjB,UAAkB,EAAO,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAChE,qCAAU,GAAV,UAAW,IAAS,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC3D,wCAAa,GAAb,UAAc,IAAS,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC9D,wCAAa,GAAb,UAAc,IAAS,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC9D,wCAAa,GAAb,UAAc,IAAS,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC9D,uCAAY,GAAZ,UAAa,IAAS,IAAa,MAAM,iBAAiB,CAAC,EAAE;QAC7D,wCAAa,GAAb,UAAc,IAAU,IAAU,MAAM,iBAAiB,CAAC,EAAE;QAC5D,oCAAS,GAAT,UAAU,IAAU,IAAU,MAAM,iBAAiB,CAAC,EAAE;QACxD,kCAAO,GAAP,UAAQ,OAAY,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC1D,sCAAW,GAAX,UAAY,KAAU,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC5D,4CAAiB,GAAjB,UAAkB,OAAY,EAAE,OAAe,EAAE,IAAY,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC3F,4CAAiB,GAAjB,cAA+B,MAAM,iBAAiB,CAAC,EAAE;QACzD,kDAAuB,GAAvB,cAAqC,MAAM,iBAAiB,CAAC,EAAE;QAC/D,+CAAoB,GAApB,UAAqB,GAAa,EAAE,MAAc,IAAS,MAAM,iBAAiB,CAAC,EAAE;QACrF,qCAAU,GAAV,cAAwB,MAAM,iBAAiB,CAAC,EAAE;QAClD,sCAAW,GAAX,cAA0B,MAAM,iBAAiB,CAAC,EAAE;QACpD,sCAAW,GAAX,UAAY,GAAa,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC/D,2CAAgB,GAAhB,cAA2B,MAAM,iBAAiB,CAAC,EAAE;QACrD,uCAAY,GAAZ,cAAyB,OAAO,iBAAiB,CAAC,EAAE;QACpD,kCAAO,GAAP,UAAQ,OAAY,EAAE,IAAY,EAAE,KAAa,IAAI,MAAM,iBAAiB,CAAC,EAAE;QAC/E,2CAAgB,GAAhB,UAAiB,OAAY,IAAS,MAAM,iBAAiB,CAAC,EAAE;QAChE,kCAAO,GAAP,UAAQ,OAAY,EAAE,IAAY,IAAY,MAAM,iBAAiB,CAAC,EAAE;QACxE,yCAAc,GAAd,cAA2B,MAAM,iBAAiB,CAAC,EAAE;QACrD,6CAAkB,GAAlB,cAA+B,MAAM,iBAAiB,CAAC,EAAE;QACzD,2CAAgB,GAAhB,cAA6B,MAAM,iBAAiB,CAAC,EAAE;QACvD,4CAAiB,GAAjB,cAA+B,MAAM,iBAAiB,CAAC,EAAE;QACzD,+CAAoB,GAApB,cAAkC,MAAM,iBAAiB,CAAC,EAAE;QAE5D,0CAAe,GAAf,cAA6B,OAAO,KAAK,CAAC,EAAE;QAC5C,oCAAS,GAAT,UAAU,IAAY,IAAY,MAAM,iBAAiB,CAAC,EAAE;QAC5D,oCAAS,GAAT,UAAU,IAAY,EAAE,KAAa,IAAI,MAAM,iBAAiB,CAAC,EAAE;QACrE,uBAAC;IAAD,CAzJA,CAAsCC,2BAAU,GAyJ/C;;ICxKD;;;;;;;aA4BiEC,8BAAsB;IAJvF;;;AAGA,QAAa,iBAAiB,GAAGX,0BAAqB,CAClDC,iBAAY,EAAE,WAAW,EAAE,CAAC,EAAC,OAAO,EAAEL,gBAAW,EAAE,QAAQ,IAAwB,EAAC,CAAC,CAAC,CAAC;AAE3F,aAAgB,YAAY;QAC1B,OAAO,IAAIhB,iBAAY,EAAE,CAAC;IAC5B,CAAC;aAKc,UAAC,OAAY,EAAE,cAA8B;QAClD,WAAY,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;IAC9C,CAAC;IAJH;IACA,IAAM,YAAY,GAAG;QACnB,WAAW,IAEV;KACF,CAAC;AAEF,aAAgB,gBAAgB,CAAC,IAAY;QAC3C,IAAM,IAAI,GAAG,IAAI,kBAAkB,CAAC,YAAY,CAAC,CAAC;QAClD,IAAM,MAAM,GAAG,IAAI,oBAAoB,EAAE,CAAC;QAC1C,IAAM,GAAG,GAAG,IAAI,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC7C,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACvB,OAAO,GAAG,CAAC;IACb,CAAC;AAED,aAAgB,cAAc;QAC5B,gBAAgB,CAAC,WAAW,EAAE,CAAC;IACjC,CAAC;IAED;;;;;AA2BA;QAAA;SACC;QADY,eAAe;YAtB3BgC,aAAQ,CAAC;gBACR,SAAS,EAAE;oBACTjC,+CAA8B;oBAC9B,EAAC,OAAO,EAAEkC,cAAQ,EAAE,QAAQ,EAAE,IAAI,EAAC;oBACnC,UAAU;oBACV,EAAC,OAAO,EAAEhC,eAAQ,EAAE,QAAQ,EAAE,IAAI,EAAC;oBACnC,0BAA0B;oBAC1B,2BAA2B;oBAC3B,yBAAyB;oBACzB,EAAC,OAAO,EAAEJ,qBAAgB,EAAE,WAAW,EAAE,yBAAyB,EAAC;oBACnE,EAAC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,IAAI,EAAC;oBACxC,WAAW;oBACX,EAAC,OAAO,EAAEG,iBAAY,EAAE,UAAU,EAAE,YAAY,EAAE,IAAI,EAAE,EAAE,EAAC;oBAC3D,EAAC,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAACF,WAAM,CAAC,EAAC;oBACnE,EAAC,OAAO,EAAE6B,oBAAe,EAAE,QAAQ,EAAE,cAAc,EAAE,KAAK,EAAE,IAAI,EAAC;oBACjE,EAAC,OAAO,EAAEO,uBAAgB,EAAE,QAAQ,EAAEC,4BAAoB,EAAE,IAAI,EAAE,EAAE,EAAC;iBACtE;gBACD,OAAO,EAAE;oBACPC,mBAAY;oBACZC,sBAAiB;iBAClB;aACF,CAAC;WACW,eAAe,CAC3B;QAAD,sBAAC;KADD;;ICjFA;;;;;;;IAsBA;;;;;AAKA,aAAgB,iBAAiB,CAC7B,eAAuB,EAAE,eAAsC;QAAtC,gCAAA,EAAA,oBAAsC;;QAEjE,IAAM,QAAQ,GAAG,gBAAgB;YAC/B,EAAC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,eAAe,EAAC;WAChD,eAAe,EAClB,CAAC;QAEH,OAAO,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IACnC,CAAC;;ICpCD;;;;;;;AAQA,IAMA,0EAA0E;;ICd1E;;;;;;OAMG;;ICNH;;OAEG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}