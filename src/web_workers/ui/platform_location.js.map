{"version":3,"sources":["../../../../../../modules/@angular/platform-webworker/src/web_workers/ui/platform_location.ts"],"names":[],"mappings":"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","file":"platform_location.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LocationChangeListener} from '@angular/common/index';\nimport {Injectable} from '@angular/core/index';\n\nimport {EventEmitter} from '../../facade/async';\nimport {BrowserPlatformLocation} from '../../private_import_platform-browser';\nimport {MessageBus} from '../shared/message_bus';\nimport {ROUTER_CHANNEL} from '../shared/messaging_api';\nimport {LocationType, Serializer, SerializerTypes} from '../shared/serializer';\nimport {ServiceMessageBroker, ServiceMessageBrokerFactory} from '../shared/service_message_broker';\nexport class MessageBasedPlatformLocation {\nprivate _channelSink: EventEmitter<Object>;\nprivate _broker: ServiceMessageBroker;\n/**\n * @param {?} _brokerFactory\n * @param {?} _platformLocation\n * @param {?} bus\n * @param {?} _serializer\n */\nconstructor(\nprivate _brokerFactory: ServiceMessageBrokerFactory,\nprivate _platformLocation: BrowserPlatformLocation, bus: MessageBus,\nprivate _serializer: Serializer) {\n    this._platformLocation.onPopState(<LocationChangeListener>this._sendUrlChangeEvent.bind(this));\n    this._platformLocation.onHashChange(\n        <LocationChangeListener>this._sendUrlChangeEvent.bind(this));\n    this._broker = this._brokerFactory.createMessageBroker(ROUTER_CHANNEL);\n    this._channelSink = bus.to(ROUTER_CHANNEL);\n  }\n/**\n * @return {?}\n */\nstart(): void {\n    const /** @type {?} */ P = SerializerTypes.PRIMITIVE;\n\n    this._broker.registerMethod('getLocation', null, this._getLocation.bind(this), LocationType);\n    this._broker.registerMethod('setPathname', [P], this._setPathname.bind(this));\n    this._broker.registerMethod(\n        'pushState', [P, P, P], this._platformLocation.pushState.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'replaceState', [P, P, P],\n        this._platformLocation.replaceState.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'forward', null, this._platformLocation.forward.bind(this._platformLocation));\n    this._broker.registerMethod(\n        'back', null, this._platformLocation.back.bind(this._platformLocation));\n  }\n/**\n * @return {?}\n */\nprivate _getLocation(): Promise<Location> {\n    return Promise.resolve(this._platformLocation.location);\n  }\n/**\n * @param {?} e\n * @return {?}\n */\nprivate _sendUrlChangeEvent(e: Event): void {\n    this._channelSink.emit({\n      'event': {'type': e.type},\n      'location': this._serializer.serialize(this._platformLocation.location, LocationType),\n    });\n  }\n/**\n * @param {?} pathname\n * @return {?}\n */\nprivate _setPathname(pathname: string): void { this._platformLocation.pathname = pathname; }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ServiceMessageBrokerFactory, },\n{type: BrowserPlatformLocation, },\n{type: MessageBus, },\n{type: Serializer, },\n];\n}\n\nfunction MessageBasedPlatformLocation_tsickle_Closure_declarations() {\n/** @type {?} */\nMessageBasedPlatformLocation.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMessageBasedPlatformLocation.ctorParameters;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._channelSink;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._broker;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._brokerFactory;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._platformLocation;\n/** @type {?} */\nMessageBasedPlatformLocation.prototype._serializer;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}