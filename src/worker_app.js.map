{"version":3,"sources":["../../../../modules/@angular/platform-webworker/src/worker_app.ts"],"names":[],"mappings":"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","file":"worker_app.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {CommonModule} from '@angular/common';\nimport {APP_INITIALIZER, ApplicationModule, ErrorHandler, NgModule, NgZone, PlatformRef, Provider, RendererFactoryV2, RootRenderer, createPlatformFactory, platformCore} from '@angular/core';\nimport {DOCUMENT} from '@angular/platform-browser';\n\nimport {BROWSER_SANITIZATION_PROVIDERS} from './private_import_platform-browser';\nimport {ON_WEB_WORKER} from './web_workers/shared/api';\nimport {ClientMessageBrokerFactory, ClientMessageBrokerFactory_} from './web_workers/shared/client_message_broker';\nimport {MessageBus} from './web_workers/shared/message_bus';\nimport {PostMessageBus, PostMessageBusSink, PostMessageBusSource} from './web_workers/shared/post_message_bus';\nimport {RenderStore} from './web_workers/shared/render_store';\nimport {Serializer} from './web_workers/shared/serializer';\nimport {ServiceMessageBrokerFactory, ServiceMessageBrokerFactory_} from './web_workers/shared/service_message_broker';\nimport {WebWorkerRendererFactoryV2, WebWorkerRootRenderer} from './web_workers/worker/renderer';\nimport {WorkerDomAdapter} from './web_workers/worker/worker_adapter';\n\n\n\n/**\n * @experimental\n */\nexport const /** @type {?} */ platformWorkerApp = createPlatformFactory(platformCore, 'workerApp');\n/**\n * @return {?}\n */\nexport function errorHandler(): ErrorHandler {\n  return new ErrorHandler();\n}\n\n\n// TODO(jteplitz602) remove this and compile with lib.webworker.d.ts (#3492)\nconst /** @type {?} */ _postMessage = {\n  postMessage: (message: any, transferrables?: [ArrayBuffer]) => {\n    ( /** @type {?} */((<any>postMessage)))(message, transferrables);\n  }\n};\n/**\n * @param {?} zone\n * @return {?}\n */\nexport function createMessageBus(zone: NgZone): MessageBus {\n  const /** @type {?} */ sink = new PostMessageBusSink(_postMessage);\n  const /** @type {?} */ source = new PostMessageBusSource();\n  const /** @type {?} */ bus = new PostMessageBus(sink, source);\n  bus.attachToZone(zone);\n  return bus;\n}\n/**\n * @return {?}\n */\nexport function setupWebWorker(): void {\n  WorkerDomAdapter.makeCurrent();\n}\n/**\n * The ng module for the worker app side.\n * \n * \\@experimental\n */\nexport class WorkerAppModule {\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  providers: [\n    BROWSER_SANITIZATION_PROVIDERS,\n    Serializer,\n    {provide: DOCUMENT, useValue: null},\n    {provide: ClientMessageBrokerFactory, useClass: ClientMessageBrokerFactory_},\n    {provide: ServiceMessageBrokerFactory, useClass: ServiceMessageBrokerFactory_},\n    WebWorkerRootRenderer,\n    {provide: RootRenderer, useExisting: WebWorkerRootRenderer},\n    WebWorkerRendererFactoryV2,\n    {provide: RendererFactoryV2, useExisting: WebWorkerRendererFactoryV2},\n    {provide: ON_WEB_WORKER, useValue: true},\n    RenderStore,\n    {provide: ErrorHandler, useFactory: errorHandler, deps: []},\n    {provide: MessageBus, useFactory: createMessageBus, deps: [NgZone]},\n    {provide: APP_INITIALIZER, useValue: setupWebWorker, multi: true},\n  ],\n  exports: [\n    CommonModule,\n    ApplicationModule,\n  ]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction WorkerAppModule_tsickle_Closure_declarations() {\n/** @type {?} */\nWorkerAppModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nWorkerAppModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}